(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5aa7fc9d"],{"0073":function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-dialog",{attrs:{title:e.title2,visible:e.dialogVisible6,"before-close":e.handleClose,width:"80%"},on:{"update:visible":function(t){e.dialogVisible6=t}}},[s("div",[s("div",[s("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[s("div",{staticStyle:{display:"inline-flex","margin-left":"8px"}}),s("div",[s("el-input",{staticStyle:{width:"350px","margin-right":"10px"},attrs:{placeholder:"请输入资产编号进行搜索，可以直接回车搜索...","prefix-icon":"el-icon-search",clearable:"",disabled:e.showAdvanceSearchView},on:{clear:e.initAssets},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.initAssets(t)}},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}}),s("el-button",{attrs:{icon:"el-icon-search",type:"primary",disabled:e.showAdvanceSearchView},on:{click:e.initAssets}},[e._v("\n            搜索\n          ")]),s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.showAdvanceSearchView=!e.showAdvanceSearchView}}},[s("i",{class:e.showAdvanceSearchView?"fa fa-angle-double-up":"fa fa-angle-double-down",attrs:{"aria-hidden":"true"}}),e._v("\n            高级搜索\n          ")])],1)]),s("transition",{attrs:{name:"slide-fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.showAdvanceSearchView,expression:"showAdvanceSearchView"}],staticStyle:{border:"1px solid #759ad1","border-radius":"5px","box-sizing":"border-box",padding:"5px",margin:"10px 0px"}},[s("el-row",[s("el-col",{attrs:{span:6}},[e._v("\n              类型:\n              "),s("el-select",{staticStyle:{width:"130px"},attrs:{clearable:"",placeholder:"类型",size:"mini"},model:{value:e.searchValue.type,callback:function(t){e.$set(e.searchValue,"type",t)},expression:"searchValue.type"}},e._l(e.types,(function(e){return s("el-option",{key:e.id,attrs:{label:e.name,value:e.name}})})),1)],1),s("el-col",{attrs:{span:5}},[e._v("\n              品牌:\n              "),s("el-input",{staticStyle:{width:"100px"},attrs:{size:"mini","prefix-icon":"el-icon-edit",clearable:""},model:{value:e.searchValue.brand,callback:function(t){e.$set(e.searchValue,"brand",t)},expression:"searchValue.brand"}})],1),s("el-col",{attrs:{span:5}},[e._v("\n              状态:\n              "),s("el-select",{staticStyle:{width:"130px"},attrs:{clearable:"",placeholder:"状态",size:"mini"},model:{value:e.searchValue.status,callback:function(t){e.$set(e.searchValue,"status",t)},expression:"searchValue.status"}},e._l(e.statuses,(function(e){return s("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),s("el-row",{staticStyle:{"margin-top":"10px"}},[s("el-col",{attrs:{span:6}},[e._v("\n              价格:\n              "),s("el-input",{staticStyle:{width:"100px"},attrs:{size:"mini","prefix-icon":"el-icon-edit",clearable:""},model:{value:e.searchValue.priceLow,callback:function(t){e.$set(e.searchValue,"priceLow",t)},expression:"searchValue.priceLow"}}),e._v("\n              至:\n              "),s("el-input",{staticStyle:{width:"100px"},attrs:{size:"mini","prefix-icon":"el-icon-edit",clearable:""},model:{value:e.searchValue.priceHigh,callback:function(t){e.$set(e.searchValue,"priceHigh",t)},expression:"searchValue.priceHigh"}})],1),s("el-col",{attrs:{span:9}},[e._v("\n              入库时间:\n              "),s("el-date-picker",{attrs:{type:"daterange",size:"mini","unlink-panels":"","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.searchValue.dateScope,callback:function(t){e.$set(e.searchValue,"dateScope",t)},expression:"searchValue.dateScope"}})],1),s("el-col",{attrs:{span:5,offset:4}},[s("el-button",{attrs:{size:"mini"},on:{click:e.clearSearchValue}},[e._v("重置")]),s("el-button",{attrs:{size:"mini"},on:{click:function(t){e.showAdvanceSearchView=!1}}},[e._v("取消")]),s("el-button",{attrs:{size:"mini",icon:"el-icon-search",type:"primary"},on:{click:e.initAssetsAdv}},[e._v("搜索")])],1)],1)],1)])],1),s("div",{staticStyle:{"margin-top":"10px"}},[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.assets,stripe:"",border:"","element-loading-text":"正在加载...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"},on:{"selection-change":e.handleSelectionChange}},[s("el-table-column",{attrs:{type:"selection",width:"55"}}),s("el-table-column",{attrs:{fixed:"",label:"资产编号",align:"left",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{size:"mini"},on:{click:function(s){return e.showDetailView(t.row)}}},[e._v(e._s(t.row.id))])]}}])}),s("el-table-column",{attrs:{prop:"statusName",label:"状态",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return["2"==t.row.status?s("span",{staticStyle:{color:"#00e079","font-weight":"bold"}},[e._v(e._s(t.row.statusName))]):"3"==t.row.status?s("span",{staticStyle:{color:"#ff4777","font-weight":"bold"}},[e._v(e._s(t.row.statusName))]):"4"==t.row.status?s("span",{staticStyle:{color:"#c0c0c0"}},[e._v(e._s(t.row.statusName))]):s("span",[e._v(e._s(t.row.statusName))])]}}])}),s("el-table-column",{attrs:{prop:"type",align:"left",label:"类型",width:"80"}}),s("el-table-column",{attrs:{fixed:"",prop:"assetName","show-overflow-tooltip":!0,align:"left",label:"资产名称"}}),s("el-table-column",{attrs:{prop:"brand",label:"品牌",align:"left",width:"80"}}),s("el-table-column",{attrs:{prop:"price",label:"价格（元）",align:"left",width:"90"}}),s("el-table-column",{attrs:{prop:"readyDate",width:"100",align:"left",label:"入库时间"}}),s("el-table-column",{attrs:{prop:"updateTime",width:"100",align:"left",label:"更新时间"}})],1),s("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[s("el-pagination",{attrs:{background:"",layout:"sizes, prev, pager, next, jumper, ->, total, slot",total:e.total},on:{"current-change":e.currentChange,"size-change":e.sizeChange}})],1),s("AssetDetail",{attrs:{dialogVisible2:e.dialogVisible2,asset:e.asset,urlList:e.urlList,title:e.title},on:{close:function(t){e.dialogVisible2=!1}}})],1)]),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){return e.$emit("close")}}},[e._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:e.doAddAsset}},[e._v("确 定")])],1)])},i=[],l=s("5c8f"),r={name:"AssetSelect",props:["title2","dialogVisible6","out"],mounted:function(){this.initAssets(),this.initTypes()},data:function(){return{uploadData:{aid:""},assetIds:[],showAdvanceSearchView:!1,searchValue:{type:null,brand:null,status:null,priceLow:null,priceHigh:null,dateScope:null},loading:!1,total:0,page:1,keyword:"",size:10,dialogVisible2:!1,title:"",assets:[],asset:{id:"",status:"",statusName:"",assetName:"",brand:"",type:"",price:"",fileList:[],adv:{},remark:""},fileList:[],urlList:[],type:"",types:[],statuses:[{id:2,name:"闲置"},{id:3,name:"故障"},{id:4,name:"报废"},{id:6,name:"使用中"}],dialogImageUrl:"",visible:!1}},components:{AssetDetail:l["a"]},methods:{doAddAsset:function(){this.$emit("handleAssetIds",this.assetIds)},exportData:function(){var e="/asset/export/?1=1";this.type&&"advanced"==this.type?(this.searchValue.type&&(e+="&type="+this.searchValue.type),this.searchValue.brand&&(e+="&brand="+this.searchValue.brand),this.searchValue.status&&(e+="&status="+this.searchValue.status),this.searchValue.userEmail&&(e+="&userEmail="+this.searchValue.userEmail),this.searchValue.priceLow&&(e+="&priceLow="+this.searchValue.priceLow),this.searchValue.priceHigh&&(e+="&priceHigh="+this.searchValue.priceHigh),this.searchValue.dateScope&&(e+="&dateScope="+this.searchValue.dateScope)):e+="&id="+this.keyword,window.open(e,"_parent")},sizeChange:function(e){this.size=e,this.type&&"advanced"==this.type?this.initAssetsAdv():this.initAssets()},currentChange:function(e){this.page=e,this.type&&"advanced"==this.type?this.initAssetsAdv():this.initAssets()},showEditView:function(e){this.title="编辑资产信息",this.asset=e,this.asset.fileList&&this.asset.fileList.length>0?this.fileList=this.asset.fileList:this.fileList=[],this.dialogVisible=!0},showDetailView:function(e){if(this.title="资产信息详情",this.asset=e,this.asset&&this.asset.fileList){this.urlList=[];for(var t=0;t<this.asset.fileList.length;t++)this.urlList.push(this.asset.fileList[t].url)}else this.urlList=null;this.dialogVisible2=!0},initAssets:function(){var e=this;this.type="",this.loading=!0;var t="/asset/getReturn/?page=";this.out&&1==this.out&&(t="/asset/getAvailable/?page="),t+=this.page+"&size="+this.size+"&aid="+this.keyword,this.getRequest(t).then((function(t){e.loading=!1,t&&(e.assets=t.data,e.total=t.total)}))},initAssetsAdv:function(){var e=this;this.type="advanced",this.loading=!0;var t="/asset/getReturn/?page=";this.out&&1==this.out&&(t="/asset/getAvailable/?page="),t+=this.page+"&size="+this.size,this.searchValue.type&&(t+="&type="+this.searchValue.type),this.searchValue.brand&&(t+="&brand="+this.searchValue.brand),this.searchValue.status&&(t+="&status="+this.searchValue.status),this.searchValue.userEmail&&(t+="&userEmail="+this.searchValue.userEmail),this.searchValue.priceLow&&(t+="&priceLow="+this.searchValue.priceLow),this.searchValue.priceHigh&&(t+="&priceHigh="+this.searchValue.priceHigh),this.searchValue.dateScope&&(t+="&dateScope="+this.searchValue.dateScope),this.getRequest(t).then((function(t){e.loading=!1,t&&(e.assets=t.data,e.total=t.total)}))},editAsset:function(){var e=this;this.$refs["assetForm"].validate((function(t){t&&e.putRequest("/asset/edit",e.asset).then((function(t){t&&(e.uploadData.aid=e.asset.id,e.$refs.upload.submit(),e.dialogVisible=!1,e.initAssets())}))}))},clearSearchValue:function(){this.searchValue={type:null,brand:null,status:null,priceLow:null,priceHigh:null,dateScope:null}},handleRemove:function(e,t){var s=this;e.id&&this.deleteRequest("/order/basic/pic/remove/?pid="+e.id).then((function(e){e&&s.initAssets()})),console.log(e,t)},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.visible=!0},initTypes:function(){var e=this,t="/asset/types/get";this.getRequest(t).then((function(t){t&&(e.types=t.obj)}))},handleClose:function(){this.$emit("close")},handleSelectionChange:function(e){this.assetIds=[];for(var t=0;t<e.length;t++)this.assetIds.push(e[t].id)}}},n=r,o=s("2877"),c=Object(o["a"])(n,a,i,!1,null,"71d834ff",null);t["a"]=c.exports},"27fb":function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-dialog",{attrs:{title:e.title,visible:e.dialogVisible3,"before-close":e.handleClose,width:"80%"},on:{"update:visible":function(t){e.dialogVisible3=t}}},[s("div",[s("el-form",{ref:"purchaseForm",attrs:{model:e.purchase,rules:e.rules}},[s("el-row",[s("el-col",{attrs:{span:15}},[s("el-form-item",{attrs:{label:"订单名称:",prop:"name"}},[s("el-input",{staticStyle:{width:"800px"},attrs:{size:"mini","prefix-icon":"el-icon-edit"},model:{value:e.purchase.name,callback:function(t){e.$set(e.purchase,"name",t)},expression:"purchase.name"}})],1)],1)],1),s("el-row",[s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"订单总价（元）:",prop:"total"}},[s("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini","prefix-icon":"el-icon-edit"},model:{value:e.purchase.total,callback:function(t){e.$set(e.purchase,"total",t)},expression:"purchase.total"}})],1)],1),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"订单优惠（元）:",prop:"discount"}},[s("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini","prefix-icon":"el-icon-edit"},model:{value:e.purchase.discount,callback:function(t){e.$set(e.purchase,"discount",t)},expression:"purchase.discount"}})],1)],1),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"实际支付（元）:",prop:"pay"}},[s("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini","prefix-icon":"el-icon-edit"},model:{value:e.purchase.pay,callback:function(t){e.$set(e.purchase,"pay",t)},expression:"purchase.pay"}})],1)],1),s("el-col",{attrs:{span:9}},[s("el-form-item",{attrs:{label:"购买日期:",prop:"purchaseDate"}},[s("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.purchase.purchaseDate,callback:function(t){e.$set(e.purchase,"purchaseDate",t)},expression:"purchase.purchaseDate"}})],1)],1)],1),s("el-row",[s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"是否有发票:",prop:"hasInvoice"}},[s("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.purchase.hasInvoice,callback:function(t){e.$set(e.purchase,"hasInvoice",t)},expression:"purchase.hasInvoice"}},e._l(e.options,(function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),s("el-col",{attrs:{span:9}},[s("el-form-item",{attrs:{label:"发票日期:",prop:"invoiceDate"}},[s("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.purchase.invoiceDate,callback:function(t){e.$set(e.purchase,"invoiceDate",t)},expression:"purchase.invoiceDate"}})],1)],1)],1),s("el-row",[s("el-col",{attrs:{span:20}},[s("el-form-item",{attrs:{label:"订单备注:",prop:"remark"}},[s("el-input",{attrs:{size:"mini",type:"textarea",rows:2},model:{value:e.purchase.remark,callback:function(t){e.$set(e.purchase,"remark",t)},expression:"purchase.remark"}})],1)],1)],1)],1),s("el-form",[s("el-row",[s("el-form-item",{attrs:{label:"订单相关图片:"}})],1),s("el-row",[s("el-form-item",{attrs:{prop:"pics"}},[s("el-upload",{ref:"upload",attrs:{data:e.uploadData,"file-list":e.fileList,action:"/purchase/pic/add","list-type":"picture-card","on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove,"auto-upload":!1}},[s("i",{staticClass:"el-icon-plus"})])],1)],1)],1)],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){return e.$emit("close")}}},[e._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:e.doAddPurchase}},[e._v("确 定")])],1)]),s("el-dialog",{attrs:{visible:e.visible},on:{"update:visible":function(t){e.visible=t}}},[s("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)},i=[],l={name:"PurchaseOrderEdit",props:["purchase","fileList","title","dialogVisible3","assetIds"],data:function(){return{addData:{purchaseOrder:{},aids:[]},uploadData:{poid:""},options:[{value:!0,label:"是"},{value:!1,label:"否"}],rules:{total:[{required:!0,message:"请输入订单总价",trigger:"blur"}],discount:[{required:!0,message:"请输入订单优惠",trigger:"blur"}],pay:[{required:!0,message:"请输入实际支付",trigger:"blur"}],purchaseDate:[{required:!0,message:"请输入购买日期",trigger:"blur"}],hasInvoice:[{required:!0,message:"请选择发票情况",trigger:"blur"}]},dialogImageUrl:"",visible:!1}},methods:{doAddPurchase:function(){var e=this;this.purchase.id?this.$refs["purchaseForm"].validate((function(t){t&&e.putRequest("/purchase/edit",e.purchase).then((function(t){t&&(e.uploadData.poid=e.purchase.id,e.$refs.upload.submit(),e.$emit("empty"),e.$emit("close"),e.$parent.initPurchaseOrders())}))})):this.$refs["purchaseForm"].validate((function(t){t&&(e.addData.purchaseOrder=e.purchase,e.addData.aids=e.assetIds,e.postRequest("/purchase/add",e.addData).then((function(t){t&&(e.uploadData.poid=t.obj,e.$refs.upload.submit(),e.$emit("empty"),e.$emit("close"),e.$parent.initPurchaseOrders())})))}))},handleClose:function(){this.$emit("close")},handleRemove:function(e,t){var s=this;e.id&&this.deleteRequest("/purchase/pic/remove/?pid="+e.id).then((function(e){e&&s.$parent.initPurchaseOrders()})),console.log(e,t)},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.visible=!0}}},r=l,n=s("2877"),o=Object(n["a"])(r,a,i,!1,null,"9a84273e",null);t["a"]=o.exports},"2aa2":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",[s("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[s("div",[s("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.showAddView}},[e._v("\n          借用资产\n        ")]),s("el-button",{attrs:{type:"success",icon:"el-icon-download"},on:{click:e.exportData}},[e._v("\n          导出数据\n        ")]),s("el-button",{staticStyle:{display:"inline-flex","margin-left":"8px"},attrs:{type:"danger"},on:{click:e.deleteOrder}},[e._v("\n          删除\n        ")])],1),s("div",[s("el-input",{staticStyle:{width:"350px","margin-right":"10px"},attrs:{placeholder:"请输入借用单号进行搜索，可以直接回车搜索...","prefix-icon":"el-icon-search",clearable:"",disabled:e.showAdvanceSearchView},on:{clear:e.initOrders},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.initOrders(t)}},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}}),s("el-button",{attrs:{icon:"el-icon-search",type:"primary",disabled:e.showAdvanceSearchView},on:{click:e.initOrders}},[e._v("\n          搜索\n        ")]),s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.showAdvanceSearchView=!e.showAdvanceSearchView}}},[s("i",{class:e.showAdvanceSearchView?"fa fa-angle-double-up":"fa fa-angle-double-down",attrs:{"aria-hidden":"true"}}),e._v("\n          高级搜索\n        ")])],1)]),s("transition",{attrs:{name:"slide-fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.showAdvanceSearchView,expression:"showAdvanceSearchView"}],staticStyle:{border:"1px solid #759ad1","border-radius":"5px","box-sizing":"border-box",padding:"5px",margin:"10px 0px"}},[s("el-row",[s("el-col",{attrs:{span:4}},[e._v("\n            状态:\n            "),s("el-select",{staticStyle:{width:"130px"},attrs:{clearable:"",placeholder:"状态",size:"mini"},model:{value:e.searchValue.status,callback:function(t){e.$set(e.searchValue,"status",t)},expression:"searchValue.status"}},e._l(e.statuses,(function(e){return s("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),s("el-col",{attrs:{span:6}},[e._v("\n            申请人邮箱:\n            "),s("el-input",{staticStyle:{width:"200px"},attrs:{size:"mini",clearable:"","prefix-icon":"el-icon-edit"},model:{value:e.searchValue.userEmail,callback:function(t){e.$set(e.searchValue,"userEmail",t)},expression:"searchValue.userEmail"}})],1),s("el-col",{attrs:{span:10}},[e._v("\n            申请时间:\n            "),s("el-date-picker",{attrs:{type:"daterange",size:"mini","unlink-panels":"","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.searchValue.dateScope,callback:function(t){e.$set(e.searchValue,"dateScope",t)},expression:"searchValue.dateScope"}})],1),s("el-col",{attrs:{span:4}},[s("el-button",{attrs:{size:"mini"},on:{click:e.clearSearchValue}},[e._v("重置")]),s("el-button",{attrs:{size:"mini"},on:{click:function(t){e.showAdvanceSearchView=!1}}},[e._v("取消")]),s("el-button",{attrs:{size:"mini",icon:"el-icon-search",type:"primary"},on:{click:e.initOrdersAdv}},[e._v("搜索")])],1)],1)],1)])],1),s("div",{staticStyle:{"margin-top":"10px"}},[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.orders,stripe:"",border:"","element-loading-text":"正在加载...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"},on:{"selection-change":e.handleSelectionChange}},[s("el-table-column",{attrs:{type:"selection",width:"55"}}),s("el-table-column",{attrs:{prop:"id",fixed:"",label:"借用单号",align:"left",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{size:"mini"},on:{click:function(s){return e.getOperateList(t.row)}}},[e._v(e._s(t.row.id))])]}}])}),s("el-table-column",{attrs:{prop:"statusName",width:"90",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return["5"==t.row.status?s("span",{staticStyle:{color:"#00e079","font-weight":"bold"}},[e._v(e._s(t.row.statusName))]):"8"==t.row.status?s("span",{staticStyle:{color:"#ff4777","font-weight":"bold"}},[e._v(e._s(t.row.statusName))]):"7"==t.row.status?s("span",{staticStyle:{color:"#c0c0c0"}},[e._v(e._s(t.row.statusName))]):s("span",[e._v(e._s(t.row.statusName))])]}}])}),s("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"关联资产编号"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.assetList,(function(t,a){return s("el-tag",{key:a,staticStyle:{"margin-right":"4px"},attrs:{type:"success"}},[e._v(e._s(t.id)+"\n          ")])}))}}])}),s("el-table-column",{attrs:{prop:"expireTime",width:"100",align:"left",label:"预计归还时间"}}),s("el-table-column",{attrs:{prop:"reason",label:"申请理由"}}),s("el-table-column",{attrs:{prop:"user.name",width:"95",align:"left",label:"申请人"}}),s("el-table-column",{attrs:{prop:"user.username",width:"150",label:"申请人邮箱"}}),s("el-table-column",{attrs:{prop:"user.phone",width:"100",label:"申请人电话"}}),s("el-table-column",{attrs:{prop:"createTime",width:"100",align:"left",label:"申请时间"}}),s("el-table-column",{attrs:{fixed:"right",width:"80",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{directives:[{name:"show",rawName:"v-show",value:"4"==t.row.status,expression:"scope.row.status=='4'"}],on:{click:function(s){return e.showEditView(t.row)}}},[e._v("编辑")])]}}])})],1),s("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[s("el-pagination",{attrs:{background:"",layout:"sizes, prev, pager, next, jumper, ->, total, slot",total:e.total},on:{"current-change":e.currentChange,"size-change":e.sizeChange}})],1)],1),s("NewOrderOut",{attrs:{dialogVisible4:e.dialogVisible4,order:e.order,title:e.title,types:e.types},on:{close:function(t){e.dialogVisible4=!1}}}),s("OrderDetail",{attrs:{dialogVisible7:e.dialogVisible7,order:e.order,title:e.title,urlList:e.urlList,operateList:e.operateList},on:{close:function(t){e.dialogVisible7=!1}}})],1)},i=[],l=s("b9d6"),r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-dialog",{attrs:{title:e.title,visible:e.dialogVisible4,"before-close":e.handleClose,width:"80%"},on:{"update:visible":function(t){e.dialogVisible4=t}}},[s("div",[s("el-form",{ref:"orderForm",attrs:{model:e.order,rules:e.rules}},[s("el-row",[s("el-col",{attrs:{span:20}},[s("el-form-item",{attrs:{label:"理由:",prop:"reason"}},[s("el-input",{attrs:{size:"mini",type:"textarea",rows:2,placeholder:"请输入申请理由"},model:{value:e.order.reason,callback:function(t){e.$set(e.order,"reason",t)},expression:"order.reason"}})],1)],1)],1),s("el-row",[s("el-form-item",{attrs:{label:"预计归还时间:",prop:"expireTime"}},[s("el-date-picker",{attrs:{type:"date","picker-options":e.pickerOptions,placeholder:"选择日期",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd"},model:{value:e.order.expireTime,callback:function(t){e.$set(e.order,"expireTime",t)},expression:"order.expireTime"}})],1)],1),s("el-row",[s("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.showAddView}},[e._v("\n            借用资产\n          ")]),s("el-button",{staticStyle:{display:"inline-flex","margin-left":"8px"},attrs:{type:"danger"},on:{click:e.deleteAsset}},[e._v("\n            删除\n          ")])],1),s("div",{staticStyle:{"margin-top":"20px"}},[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.order.assetList,stripe:"",border:"","element-loading-text":"正在加载...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"},on:{"selection-change":e.handleSelectionChange}},[s("el-table-column",{attrs:{type:"selection",width:"55"}}),s("el-table-column",{attrs:{fixed:"",label:"资产编号",align:"left",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{size:"mini"},on:{click:function(s){return e.showDetailView(t.row)}}},[e._v(e._s(t.row.id))])]}}])}),s("el-table-column",{attrs:{fixed:"",prop:"assetName","show-overflow-tooltip":!0,align:"left",label:"资产名称"}}),s("el-table-column",{attrs:{prop:"statusName",label:"状态",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return["2"==t.row.status?s("span",{staticStyle:{color:"#00e079","font-weight":"bold"}},[e._v(e._s(t.row.statusName))]):"3"==t.row.status?s("span",{staticStyle:{color:"#ff4777","font-weight":"bold"}},[e._v(e._s(t.row.statusName))]):"4"==t.row.status?s("span",{staticStyle:{color:"#c0c0c0"}},[e._v(e._s(t.row.statusName))]):s("span",[e._v(e._s(t.row.statusName))])]}}])}),s("el-table-column",{attrs:{prop:"type",align:"left",label:"类型",width:"200"}}),s("el-table-column",{attrs:{prop:"brand",label:"品牌",align:"left",width:"200"}}),s("el-table-column",{attrs:{prop:"price",label:"价格（元）",align:"left",width:"200"}})],1),s("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[s("el-pagination",{attrs:{background:"",layout:"sizes, prev, pager, next, jumper, ->, total, slot",total:e.total},on:{"current-change":e.currentChange,"size-change":e.sizeChange}})],1)],1)],1)],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){return e.$emit("close")}}},[e._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:e.doAddOrderOut}},[e._v("确 定")])],1)]),s("AssetDetail",{attrs:{dialogVisible2:e.dialogVisible2,asset:e.asset,urlList:e.urlList,title:e.title},on:{close:function(t){e.dialogVisible2=!1}}}),s("AssetSelect",{attrs:{dialogVisible6:e.dialogVisible6,title2:e.title2,out:!0},on:{close:function(t){e.dialogVisible6=!1},handleAssetIds:e.handleAssetIds}})],1)},n=[],o=s("0073"),c=s("5c8f"),d={name:"NewOrderOut",props:["order","title","dialogVisible4","types"],data:function(){var e=this;return{pickerOptions:{disabledDate:function(t){return e.dealDisabledDate(t)}},initData:{aids:[],page:1,size:10},assetIds:[],fileList:[],urlList:[],dialogVisible:!1,dialogVisible2:!1,dialogVisible6:!1,title2:"",loading:!1,asset:{id:"",status:"",statusName:"",assetName:"",brand:"",type:"",price:"",fileList:[],adv:{},remark:""},total:0,rules:{reason:[{required:!0,message:"请输入申请理由",trigger:"blur"}],expireTime:[{required:!0,message:"请输入预计转交时间",trigger:"blur"}]}}},components:{AssetSelect:o["a"],AssetDetail:c["a"]},methods:{doAddOrderOut:function(){var e=this;this.order.id?this.$refs["orderForm"].validate((function(t){t&&e.putRequest("/order/basic/edit",e.order).then((function(t){t&&(e.$emit("close"),e.$parent.initOrders())}))})):this.$refs["orderForm"].validate((function(t){t&&e.postRequest("/order/basic/borrow",e.order).then((function(t){t&&(e.$emit("close"),e.$parent.initOrders())}))}))},showAddView:function(){this.title2="选择资产",this.dialogVisible6=!0},showDetailView:function(e){if(this.title="申请单详情",this.asset=e,this.asset&&this.asset.fileList){this.urlList=[];for(var t=0;t<this.asset.fileList.length;t++)this.urlList.push(this.asset.fileList[t].url)}else this.urlList=null;this.dialogVisible2=!0},deleteAsset:function(){for(var e=[],t=0;t<this.order.assetList.length;t++){for(var s=!0,a=0;a<this.assetIds.length;a++)if(this.order.assetList[t].id==this.assetIds[a]){s=!1;break}1==s&&e.push(this.order.assetList[t].id)}this.initData.aids=e,this.initAssets()},handleClose:function(){this.$emit("close")},initAssets:function(){var e=this;this.loading=!0;var t="/asset/getAssetByAids";this.postRequest(t,this.initData).then((function(t){e.loading=!1,t&&(e.order.assetList=t.data,e.total=t.total)}))},sizeChange:function(e){this.initData.size=e,this.initAssets()},currentChange:function(e){this.initData.page=e,this.initAssets()},handleSelectionChange:function(e){this.assetIds=[];for(var t=0;t<e.length;t++)this.assetIds.push(e[t].id)},handleAssetIds:function(e){this.freshAids();for(var t=0;t<e.length;t++)this.initData.aids.push(e[t]);this.dialogVisible6=!1,this.initAssets()},dealDisabledDate:function(e){var t=Date.now()-864e5;return e.getTime()<t},freshAids:function(){for(var e=0;e<this.order.assetList.length;e++)this.initData.aids.push(this.order.assetList[e].id)}}},u=d,h=s("2877"),p=Object(h["a"])(u,r,n,!1,null,"821cff28",null),f=p.exports,m={name:"AssetOut",data:function(){return{searchValue:{status:null,userEmail:null,dateScope:null},title:"",showAdvanceSearchView:!1,orders:[],loading:!1,dialogVisible5:!1,dialogVisible7:!1,dialogVisible4:!1,total:0,page:1,keyword:"",size:10,types:[],statuses:[{id:4,name:"申请借用"},{id:5,name:"已借出"},{id:6,name:"审批未通过"},{id:7,name:"已关闭"}],operateList:[],order:{id:"",category:"",categoryName:"",status:"",statusName:"",expireTime:"",reason:"",userEmail:"",user:{id:"",name:"",phone:"",username:"",enabled:"",remark:""},createTime:"",updateTime:"",assetList:[]},type:"",fileList:[],urlList:[]}},components:{NewOrderOut:f,OrderDetail:l["a"]},mounted:function(){this.initOrders(),this.initTypes()},methods:{exportData:function(){var e="/order/basic/export/out/?category=2";this.type&&"advanced"==this.type?(this.searchValue.status&&(e+="&status="+this.searchValue.status),this.searchValue.userEmail&&(e+="&userEmail="+this.searchValue.userEmail),this.searchValue.dateScope&&(e+="&dateScope="+this.searchValue.dateScope)):e+="&id="+this.keyword,window.open(e,"_parent")},emptyOrder:function(){this.order={id:"",category:"",categoryName:"",status:"",statusName:"",expireTime:"",reason:"",userEmail:"",user:{id:"",name:"",phone:"",username:""},createTime:"",updateTime:"",assetList:[]}},showAddView:function(){this.emptyOrder(),this.title="资产借用申请",this.dialogVisible4=!0},showEditView:function(e){this.title="编辑申请信息",this.order=e,this.dialogVisible4=!0},showDetailView:function(e){if(this.title="申请单详情",this.order=e,this.order.asset&&this.order.asset.fileList){this.urlList=[];for(var t=0;t<this.order.asset.fileList.length;t++)this.urlList.push(this.order.asset.fileList[t].url)}else this.urlList=null;this.dialogVisible7=!0},getOperateList:function(e){var t=this;this.getRequest("/order/task/getOperateList?id="+e.id).then((function(s){s&&(t.operateList=s.obj,t.showDetailView(e))}))},deleteOrder:function(){var e=this;this.$confirm("此操作将永久删除选中的记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.deleteRequestWithData("/order/basic/delete",e.orderIds).then((function(t){t&&e.initOrders()}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},sizeChange:function(e){this.size=e,this.type&&"advanced"==this.type?this.initOrdersAdv():this.initOrders()},currentChange:function(e){this.page=e,this.type&&"advanced"==this.type?this.initOrdersAdv():this.initOrders()},initOrders:function(){var e=this;this.type="",this.loading=!0;var t="/order/basic/get/?category=2&page="+this.page+"&size="+this.size+"&oid="+this.keyword;this.getRequest(t).then((function(t){e.loading=!1,t&&(e.orders=t.data,e.total=t.total)}))},initOrdersAdv:function(){var e=this;this.type="advanced",this.loading=!0;var t="/order/basic/get/?category=2&page="+this.page+"&size="+this.size;this.searchValue.status&&(t+="&status="+this.searchValue.status),this.searchValue.userEmail&&(t+="&userEmail="+this.searchValue.userEmail),this.searchValue.dateScope&&(t+="&dateScope="+this.searchValue.dateScope),this.getRequest(t).then((function(t){e.loading=!1,t&&(e.orders=t.data,e.total=t.total)}))},handleSelectionChange:function(e){for(var t=0;t<e.length;t++)this.orderIds.push(e[t].id)},clearSearchValue:function(){this.searchValue={status:null,userEmail:null,dateScope:null}},initTypes:function(){var e=this,t="/asset/types/get";this.getRequest(t).then((function(t){t&&(e.types=t.obj)}))}}},b=m,g=Object(h["a"])(b,a,i,!1,null,null,null);t["default"]=g.exports},"4ca5":function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-dialog",{attrs:{title:e.title,visible:e.dialogVisible,"before-close":e.handleClose,width:"80%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[s("div",[s("el-form",{ref:"assetForm",attrs:{model:e.asset,rules:e.rules}},[s("el-row",[s("el-col",{attrs:{span:15}},[s("el-form-item",{attrs:{label:"资产名称:",prop:"assetName"}},[s("el-input",{staticStyle:{width:"800px"},attrs:{size:"mini","prefix-icon":"el-icon-edit"},model:{value:e.asset.assetName,callback:function(t){e.$set(e.asset,"assetName",t)},expression:"asset.assetName"}})],1)],1)],1),s("el-row",[s("el-col",{attrs:{span:6}},[s("el-form-item",{attrs:{label:"品牌:",prop:"brand"}},[s("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini","prefix-icon":"el-icon-edit"},model:{value:e.asset.brand,callback:function(t){e.$set(e.asset,"brand",t)},expression:"asset.brand"}})],1)],1),s("el-col",{attrs:{span:6}},[s("el-form-item",{attrs:{label:"类型:",prop:"type"}},[s("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.asset.type,callback:function(t){e.$set(e.asset,"type",t)},expression:"asset.type"}},e._l(e.types,(function(e){return s("el-option",{key:e.id,attrs:{label:e.name,value:e.name}})})),1)],1)],1),s("el-col",{attrs:{span:6}},[s("el-form-item",{attrs:{label:"价格（元）:",prop:"price"}},[s("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini","prefix-icon":"el-icon-edit"},model:{value:e.asset.price,callback:function(t){e.$set(e.asset,"price",t)},expression:"asset.price"}})],1)],1)],1),s("el-row",[s("el-col",{attrs:{span:20}},[s("el-form-item",{attrs:{label:"资产备注:",prop:"remark"}},[s("el-input",{attrs:{size:"mini",type:"textarea",rows:2},model:{value:e.asset.remark,callback:function(t){e.$set(e.asset,"remark",t)},expression:"asset.remark"}})],1)],1)],1),s("el-row",{directives:[{name:"show",rawName:"v-show",value:null==e.asset.id,expression:"asset.id==null"}]},[s("el-form-item",{attrs:{label:"数量（个）:",prop:"amount"}},[s("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini","prefix-icon":"el-icon-edit"},model:{value:e.addData.amount,callback:function(t){e.$set(e.addData,"amount",t)},expression:"addData.amount"}})],1)],1)],1),e.asset.adv?[s("el-form",{directives:[{name:"show",rawName:"v-show",value:"手机"==e.asset.type,expression:"asset.type=='手机'"}],attrs:{model:e.asset.adv}},[s("el-row",[s("el-col",{attrs:{span:6}},[s("el-form-item",{attrs:{label:"内存（G）:",prop:"memory"}},[s("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini","prefix-icon":"el-icon-edit"},model:{value:e.asset.adv.memory,callback:function(t){e.$set(e.asset.adv,"memory",t)},expression:"asset.adv.memory"}})],1)],1),s("el-col",{attrs:{span:6}},[s("el-form-item",{attrs:{label:"屏幕尺寸（寸）:",prop:"screenSize"}},[s("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini","prefix-icon":"el-icon-edit"},model:{value:e.asset.adv.screenSize,callback:function(t){e.$set(e.asset.adv,"screenSize",t)},expression:"asset.adv.screenSize"}})],1)],1)],1)],1),s("el-form",{directives:[{name:"show",rawName:"v-show",value:"交换机"==e.asset.type,expression:"asset.type=='交换机'"}],attrs:{model:e.asset.adv}},[s("el-row",[s("el-col",{attrs:{span:6}},[s("el-form-item",{attrs:{label:"接口数:",prop:"nums"}},[s("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini","prefix-icon":"el-icon-edit"},model:{value:e.asset.adv.nums,callback:function(t){e.$set(e.asset.adv,"nums",t)},expression:"asset.adv.nums"}})],1)],1),s("el-col",{attrs:{span:6}},[s("el-form-item",{attrs:{label:"类型:",prop:"type"}},[s("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini","prefix-icon":"el-icon-edit"},model:{value:e.asset.adv.type,callback:function(t){e.$set(e.asset.adv,"type",t)},expression:"asset.adv.type"}})],1)],1)],1)],1),s("el-form",{directives:[{name:"show",rawName:"v-show",value:"主机"==e.asset.type,expression:"asset.type=='主机'"}],attrs:{model:e.asset.adv}},[s("el-row",[s("el-col",{attrs:{span:6}},[s("el-form-item",{attrs:{label:"cpu:",prop:"cpu"}},[s("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini","prefix-icon":"el-icon-edit"},model:{value:e.asset.adv.cpu,callback:function(t){e.$set(e.asset.adv,"cpu",t)},expression:"asset.adv.cpu"}})],1)],1),s("el-col",{attrs:{span:6}},[s("el-form-item",{attrs:{label:"内存（G）:",prop:"memory"}},[s("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini","prefix-icon":"el-icon-edit"},model:{value:e.asset.adv.memory,callback:function(t){e.$set(e.asset.adv,"memory",t)},expression:"asset.adv.memory"}})],1)],1)],1)],1),s("el-form",{directives:[{name:"show",rawName:"v-show",value:"测距仪"==e.asset.type,expression:"asset.type=='测距仪'"}],attrs:{model:e.asset.adv}},[s("el-row",[s("el-col",{attrs:{span:6}},[s("el-form-item",{attrs:{label:"精度:",prop:"precision"}},[s("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini","prefix-icon":"el-icon-edit"},model:{value:e.asset.adv.precision,callback:function(t){e.$set(e.asset.adv,"precision",t)},expression:"asset.adv.precision"}})],1)],1),s("el-col",{attrs:{span:6}},[s("el-form-item",{attrs:{label:"距离:",prop:"distance"}},[s("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini","prefix-icon":"el-icon-edit"},model:{value:e.asset.adv.distance,callback:function(t){e.$set(e.asset.adv,"distance",t)},expression:"asset.adv.distance"}})],1)],1),s("el-col",{attrs:{span:6}},[s("el-form-item",{attrs:{label:"方式:",prop:"methods"}},[s("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini","prefix-icon":"el-icon-edit"},model:{value:e.asset.adv.methods,callback:function(t){e.$set(e.asset.adv,"methods",t)},expression:"asset.adv.methods"}})],1)],1)],1)],1)]:e._e(),s("el-form",[s("el-row",[s("el-form-item",{attrs:{label:"资产相关图片:"}})],1),s("el-row",[s("el-form-item",{attrs:{prop:"pics"}},[s("el-upload",{ref:"upload",attrs:{data:e.uploadData,"file-list":e.fileList,action:"/order/basic/pic/add","list-type":"picture-card","on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove,"auto-upload":!1}},[s("i",{staticClass:"el-icon-plus"})])],1)],1)],1)],2),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:e.handleClose}},[e._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:e.doAddAsset}},[e._v("确 定")])],1)]),s("el-dialog",{attrs:{visible:e.visible},on:{"update:visible":function(t){e.visible=t}}},[s("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)},i=[],l={name:"AssetEdit",props:["asset","fileList","title","dialogVisible","types"],data:function(){return{addData:{asset:{},amount:1},uploadData:{aids:[]},rules:{assetName:[{required:!0,message:"请输入资产名称",trigger:"blur"}],brand:[{required:!0,message:"请输入品牌",trigger:"blur"}],price:[{required:!0,message:"请输入价格",trigger:"blur"}],reason:[{required:!0,message:"请输入申请理由",trigger:"blur"}]},dialogImageUrl:"",visible:!1}},methods:{doAddAsset:function(){var e=this;this.asset.id?this.$refs["assetForm"].validate((function(t){t&&e.putRequest("/asset/edit",e.asset).then((function(t){t&&(e.uploadData.aids=[],e.uploadData.aids.push(e.asset.id),e.$refs.upload.submit(),e.$emit("close"),e.$parent.freshAids(),e.$parent.initAssets())}))})):this.$refs["assetForm"].validate((function(t){t&&(e.addData.asset=e.asset,e.postRequest("/asset/add",e.addData).then((function(t){t&&(e.addData.amount=1,e.uploadData.aids=t.obj,e.$refs.upload.submit(),e.$emit("handleAssetIds",t.obj))})))}))},handleClose:function(){this.addData.amount=1,this.$emit("close")},handleRemove:function(e,t){var s=this;e.id&&this.deleteRequest("/order/basic/pic/remove/?pid="+e.id).then((function(e){e&&s.$parent.initOrders()})),console.log(e,t)},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.visible=!0}}},r=l,n=s("2877"),o=Object(n["a"])(r,a,i,!1,null,"0fdca15f",null);t["a"]=o.exports},"5c8f":function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-dialog",{attrs:{title:e.title,visible:e.dialogVisible2,"before-close":e.handleClose,width:"80%"},on:{"update:visible":function(t){e.dialogVisible2=t}}},[s("div",[s("el-form",{attrs:{model:e.asset}},[s("el-row",[s("el-col",{attrs:{span:20}},[s("el-form-item",{attrs:{label:"资产编号:",prop:"id"}},[e._v("\n            "+e._s(e.asset.id)+"\n          ")])],1)],1),s("el-row",[s("el-col",{attrs:{span:20}},[s("el-form-item",{attrs:{label:"资产名称:",prop:"assetName"}},[e._v("\n            "+e._s(e.asset.assetName)+"\n          ")])],1),s("el-col",{attrs:{span:6}},[s("el-form-item",{attrs:{label:"状态:",prop:"statusName"}},[e._v("\n            "+e._s(e.asset.statusName)+"\n          ")])],1)],1),s("el-row",[s("el-col",{attrs:{span:6}},[s("el-form-item",{attrs:{label:"品牌:",prop:"brand"}},[e._v("\n            "+e._s(e.asset.brand)+"\n          ")])],1),s("el-col",{attrs:{span:6}},[s("el-form-item",{attrs:{label:"类型:",prop:"type"}},[e._v("\n            "+e._s(e.asset.type)+"\n          ")])],1),s("el-col",{attrs:{span:6}},[s("el-form-item",{attrs:{label:"价格（元）:",prop:"price"}},[e._v("\n            "+e._s(e.asset.price)+"\n          ")])],1)],1),s("el-row",[s("el-col",{attrs:{span:10}},[s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.asset.remark&&""!=e.asset.remark,expression:"asset.remark&&asset.remark!=''"}],attrs:{label:"资产备注:",prop:"remark"}},[e._v("\n            "+e._s(e.asset.remark)+"\n          ")])],1)],1)],1),e.asset.adv?[s("el-form",{directives:[{name:"show",rawName:"v-show",value:"手机"==e.asset.type,expression:"asset.type=='手机'"}],attrs:{model:e.asset.adv}},[s("el-row",[s("el-col",{attrs:{span:6}},[s("el-form-item",{attrs:{label:"内存（G）:",prop:"memory"}},[e._v("\n              "+e._s(e.asset.adv.memory)+"\n            ")])],1),s("el-col",{attrs:{span:6}},[s("el-form-item",{attrs:{label:"屏幕尺寸（寸）:",prop:"screenSize"}},[e._v("\n              "+e._s(e.asset.adv.screenSize)+"\n            ")])],1)],1)],1),s("el-form",{directives:[{name:"show",rawName:"v-show",value:"交换机"==e.asset.type,expression:"asset.type=='交换机'"}],attrs:{model:e.asset.adv}},[s("el-row",[s("el-col",{attrs:{span:6}},[s("el-form-item",{attrs:{label:"接口数:",prop:"nums"}},[e._v("\n              "+e._s(e.asset.adv.nums)+"\n            ")])],1),s("el-col",{attrs:{span:6}},[s("el-form-item",{attrs:{label:"类型:",prop:"type"}},[e._v("\n              "+e._s(e.asset.adv.type)+"\n            ")])],1)],1)],1),s("el-form",{directives:[{name:"show",rawName:"v-show",value:"主机"==e.asset.type,expression:"asset.type=='主机'"}],attrs:{model:e.asset.adv}},[s("el-row",[s("el-col",{attrs:{span:6}},[s("el-form-item",{attrs:{label:"cpu:",prop:"cpu"}},[e._v("\n              "+e._s(e.asset.adv.cpu)+"\n            ")])],1),s("el-col",{attrs:{span:6}},[s("el-form-item",{attrs:{label:"内存（G）:",prop:"memory"}},[e._v("\n              "+e._s(e.asset.adv.memory)+"\n            ")])],1)],1)],1),s("el-form",{directives:[{name:"show",rawName:"v-show",value:"测距仪"==e.asset.type,expression:"asset.type=='测距仪'"}],attrs:{model:e.asset.adv}},[s("el-row",[s("el-col",{attrs:{span:6}},[s("el-form-item",{attrs:{label:"精度:",prop:"precision"}},[e._v("\n              "+e._s(e.asset.adv.precision)+"\n            ")])],1),s("el-col",{attrs:{span:6}},[s("el-form-item",{attrs:{label:"距离:",prop:"distance"}},[e._v("\n              "+e._s(e.asset.adv.distance)+"\n            ")])],1),s("el-col",{attrs:{span:6}},[s("el-form-item",{attrs:{label:"方式:",prop:"methods"}},[e._v("\n              "+e._s(e.asset.adv.methods)+"\n            ")])],1)],1)],1),s("el-form",[s("el-row",{directives:[{name:"show",rawName:"v-show",value:e.urlList&&e.urlList.length>0,expression:"urlList&&urlList.length>0"}]},[s("el-form-item",{attrs:{label:"资产相关图片:"}})],1),s("el-row",[e._l(e.urlList,(function(t){return[s("el-col",{attrs:{span:3}},[s("el-form-item",[s("el-image",{staticStyle:{width:"130px",height:"130px"},attrs:{src:t,"preview-src-list":e.urlList}})],1)],1)]}))],2)],1)]:e._e()],2),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){return e.$emit("close")}}},[e._v("关 闭")])],1)])},i=[],l={name:"AssetDetail",props:["asset","title","urlList","dialogVisible2"],methods:{handleClose:function(){this.$emit("close")}}},r=l,n=s("2877"),o=Object(n["a"])(r,a,i,!1,null,"4214fd36",null);t["a"]=o.exports},"77b6":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",[s("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[s("div",[s("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.showAddView}},[e._v("\n          归还资产\n        ")]),s("el-button",{attrs:{type:"success",icon:"el-icon-download"},on:{click:e.exportData}},[e._v("\n          导出数据\n        ")]),s("el-button",{staticStyle:{display:"inline-flex","margin-left":"8px"},attrs:{type:"danger"},on:{click:e.deleteOrder}},[e._v("\n          删除\n        ")])],1),s("div",[s("el-input",{staticStyle:{width:"350px","margin-right":"10px"},attrs:{placeholder:"请输入归还单号进行搜索，可以直接回车搜索...","prefix-icon":"el-icon-search",clearable:"",disabled:e.showAdvanceSearchView},on:{clear:e.initOrders},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.initOrders(t)}},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}}),s("el-button",{attrs:{icon:"el-icon-search",type:"primary",disabled:e.showAdvanceSearchView},on:{click:e.initOrders}},[e._v("\n          搜索\n        ")]),s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.showAdvanceSearchView=!e.showAdvanceSearchView}}},[s("i",{class:e.showAdvanceSearchView?"fa fa-angle-double-up":"fa fa-angle-double-down",attrs:{"aria-hidden":"true"}}),e._v("\n          高级搜索\n        ")])],1)]),s("transition",{attrs:{name:"slide-fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.showAdvanceSearchView,expression:"showAdvanceSearchView"}],staticStyle:{border:"1px solid #759ad1","border-radius":"5px","box-sizing":"border-box",padding:"5px",margin:"10px 0px"}},[s("el-row",[s("el-col",{attrs:{span:4}},[e._v("\n            状态:\n            "),s("el-select",{staticStyle:{width:"130px"},attrs:{clearable:"",placeholder:"状态",size:"mini"},model:{value:e.searchValue.status,callback:function(t){e.$set(e.searchValue,"status",t)},expression:"searchValue.status"}},e._l(e.statuses,(function(e){return s("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),s("el-col",{attrs:{span:6}},[e._v("\n            申请人邮箱:\n            "),s("el-input",{staticStyle:{width:"200px"},attrs:{size:"mini",clearable:"","prefix-icon":"el-icon-edit"},model:{value:e.searchValue.userEmail,callback:function(t){e.$set(e.searchValue,"userEmail",t)},expression:"searchValue.userEmail"}})],1),s("el-col",{attrs:{span:10}},[e._v("\n            申请时间:\n            "),s("el-date-picker",{attrs:{type:"daterange",size:"mini","unlink-panels":"","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.searchValue.dateScope,callback:function(t){e.$set(e.searchValue,"dateScope",t)},expression:"searchValue.dateScope"}})],1),s("el-col",{attrs:{span:4}},[s("el-button",{attrs:{size:"mini"},on:{click:e.clearSearchValue}},[e._v("重置")]),s("el-button",{attrs:{size:"mini"},on:{click:function(t){e.showAdvanceSearchView=!1}}},[e._v("取消")]),s("el-button",{attrs:{size:"mini",icon:"el-icon-search",type:"primary"},on:{click:e.initOrdersAdv}},[e._v("搜索")])],1)],1)],1)])],1),s("div",{staticStyle:{"margin-top":"10px"}},[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.orders,stripe:"",border:"","element-loading-text":"正在加载...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"},on:{"selection-change":e.handleSelectionChange}},[s("el-table-column",{attrs:{type:"selection",width:"55"}}),s("el-table-column",{attrs:{prop:"id",fixed:"",label:"归还单号",align:"left",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{size:"mini"},on:{click:function(s){return e.getOperateList(t.row)}}},[e._v(e._s(t.row.id))])]}}])}),s("el-table-column",{attrs:{prop:"statusName",width:"90",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return["11"==t.row.status?s("span",{staticStyle:{color:"#00e079","font-weight":"bold"}},[e._v(e._s(t.row.statusName))]):"12"==t.row.status?s("span",{staticStyle:{color:"#ff4777","font-weight":"bold"}},[e._v(e._s(t.row.statusName))]):"7"==t.row.status?s("span",{staticStyle:{color:"#c0c0c0"}},[e._v(e._s(t.row.statusName))]):s("span",[e._v(e._s(t.row.statusName))])]}}])}),s("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"关联资产编号"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.assetList,(function(t,a){return s("el-tag",{key:a,staticStyle:{"margin-right":"4px"},attrs:{type:"success"}},[e._v(e._s(t.id)+"\n          ")])}))}}])}),s("el-table-column",{attrs:{prop:"user.name",width:"95",align:"left",label:"申请人"}}),s("el-table-column",{attrs:{prop:"user.username",width:"150",label:"申请人邮箱"}}),s("el-table-column",{attrs:{prop:"user.phone",width:"100",label:"申请人电话"}}),s("el-table-column",{attrs:{prop:"createTime",width:"100",align:"left",label:"申请时间"}}),s("el-table-column",{attrs:{fixed:"right",width:"80",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{directives:[{name:"show",rawName:"v-show",value:"10"==t.row.status,expression:"scope.row.status=='10'"}],on:{click:function(s){return e.showEditView(t.row)}}},[e._v("编辑")])]}}])})],1),s("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[s("el-pagination",{attrs:{background:"",layout:"sizes, prev, pager, next, jumper, ->, total, slot",total:e.total},on:{"current-change":e.currentChange,"size-change":e.sizeChange}})],1)],1),s("NewOrderReturn",{attrs:{dialogVisible4:e.dialogVisible4,order:e.order,title:e.title,types:e.types},on:{close:function(t){e.dialogVisible4=!1}}}),s("OrderDetail",{attrs:{dialogVisible7:e.dialogVisible7,order:e.order,title:e.title,urlList:e.urlList,operateList:e.operateList},on:{close:function(t){e.dialogVisible7=!1}}})],1)},i=[],l=s("b9d6"),r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-dialog",{attrs:{title:e.title,visible:e.dialogVisible4,"before-close":e.handleClose,width:"80%"},on:{"update:visible":function(t){e.dialogVisible4=t}}},[s("div",[s("el-form",{ref:"orderForm",attrs:{model:e.order,rules:e.rules}},[s("el-row",[s("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.showAddView}},[e._v("\n            归还资产\n          ")]),s("el-button",{staticStyle:{display:"inline-flex","margin-left":"8px"},attrs:{type:"danger"},on:{click:e.deleteAsset}},[e._v("\n            删除\n          ")])],1),s("div",{staticStyle:{"margin-top":"20px"}},[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.order.assetList,stripe:"",border:"","element-loading-text":"正在加载...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"},on:{"selection-change":e.handleSelectionChange}},[s("el-table-column",{attrs:{type:"selection",width:"55"}}),s("el-table-column",{attrs:{fixed:"",label:"资产编号",align:"left",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{size:"mini"},on:{click:function(s){return e.showDetailView(t.row)}}},[e._v(e._s(t.row.id))])]}}])}),s("el-table-column",{attrs:{fixed:"",prop:"assetName","show-overflow-tooltip":!0,align:"left",label:"资产名称"}}),s("el-table-column",{attrs:{prop:"statusName",label:"状态",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return["2"==t.row.status?s("span",{staticStyle:{color:"#00e079","font-weight":"bold"}},[e._v(e._s(t.row.statusName))]):"3"==t.row.status?s("span",{staticStyle:{color:"#ff4777","font-weight":"bold"}},[e._v(e._s(t.row.statusName))]):"4"==t.row.status?s("span",{staticStyle:{color:"#c0c0c0"}},[e._v(e._s(t.row.statusName))]):s("span",[e._v(e._s(t.row.statusName))])]}}])}),s("el-table-column",{attrs:{prop:"type",align:"left",label:"类型",width:"200"}}),s("el-table-column",{attrs:{prop:"brand",label:"品牌",align:"left",width:"200"}}),s("el-table-column",{attrs:{prop:"price",label:"价格（元）",align:"left",width:"200"}})],1),s("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[s("el-pagination",{attrs:{background:"",layout:"sizes, prev, pager, next, jumper, ->, total, slot",total:e.total},on:{"current-change":e.currentChange,"size-change":e.sizeChange}})],1)],1)],1)],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){return e.$emit("close")}}},[e._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:e.doAddReturn}},[e._v("确 定")])],1)]),s("AssetDetail",{attrs:{dialogVisible2:e.dialogVisible2,asset:e.asset,urlList:e.urlList,title:e.title},on:{close:function(t){e.dialogVisible2=!1}}}),s("AssetSelect",{attrs:{dialogVisible6:e.dialogVisible6,title2:e.title2},on:{close:function(t){e.dialogVisible6=!1},handleAssetIds:e.handleAssetIds}})],1)},n=[],o=s("0073"),c=s("5c8f"),d={name:"NewOrderReturn",props:["order","title","dialogVisible4","types"],data:function(){var e=this;return{pickerOptions:{disabledDate:function(t){return e.dealDisabledDate(t)}},deleteData:{assetIds:[],oid:null},initData:{aids:[],page:1,size:10},assetIds:[],fileList:[],urlList:[],dialogVisible:!1,dialogVisible2:!1,dialogVisible6:!1,title2:"",loading:!1,asset:{id:"",status:"",statusName:"",assetName:"",brand:"",type:"",price:"",fileList:[],adv:{},remark:""},total:0,rules:{reason:[{required:!0,message:"请输入申请理由",trigger:"blur"}],expireTime:[{required:!0,message:"请输入预计转交时间",trigger:"blur"}]}}},components:{AssetSelect:o["a"],AssetDetail:c["a"]},methods:{emptyAsset:function(){this.asset={id:"",assetName:"",brand:"",type:"",price:"",fileList:[],adv:{},remark:""}},doAddReturn:function(){var e=this;this.order.id?this.$refs["orderForm"].validate((function(t){t&&e.putRequest("/order/basic/edit",e.order).then((function(t){t&&(e.$emit("close"),e.$parent.initOrders())}))})):this.$refs["orderForm"].validate((function(t){t&&e.postRequest("/order/basic/return",e.order).then((function(t){t&&(e.$emit("close"),e.$parent.initOrders())}))}))},showAddView:function(){this.title2="选择资产",this.dialogVisible6=!0},showDetailView:function(e){if(this.title="申请单详情",this.asset=e,this.asset&&this.asset.fileList){this.urlList=[];for(var t=0;t<this.asset.fileList.length;t++)this.urlList.push(this.asset.fileList[t].url)}else this.urlList=null;this.dialogVisible2=!0},deleteAsset:function(){for(var e=[],t=0;t<this.initData.aids.length;t++){for(var s=!0,a=0;a<this.assetIds.length;a++)if(this.initData.aids[t]==this.assetIds[a]){s=!1;break}1==s&&e.push(this.initData.aids[t])}this.initData.aids=e,this.initAssets()},handleClose:function(){this.$emit("close")},initAssets:function(){var e=this;this.loading=!0;var t="/asset/getAssetByAids";this.postRequest(t,this.initData).then((function(t){e.loading=!1,t&&(e.order.assetList=t.data,e.total=t.total)}))},sizeChange:function(e){this.initData.size=e,this.initAssets()},currentChange:function(e){this.initData.page=e,this.initAssets()},handleSelectionChange:function(e){this.assetIds=[];for(var t=0;t<e.length;t++)this.assetIds.push(e[t].id)},handleAssetIds:function(e){this.freshAids();for(var t=0;t<e.length;t++)this.initData.aids.push(e[t]);this.dialogVisible6=!1,this.initAssets()},dealDisabledDate:function(e){var t=Date.now()-864e5;return e.getTime()<t},freshAids:function(){for(var e=0;e<this.order.assetList.length;e++)this.initData.aids.push(this.order.assetList[e].id)}}},u=d,h=s("2877"),p=Object(h["a"])(u,r,n,!1,null,"5508f976",null),f=p.exports,m={name:"AssetReturn",data:function(){return{searchValue:{status:null,userEmail:null,dateScope:null},title:"",showAdvanceSearchView:!1,orders:[],loading:!1,dialogVisible5:!1,dialogVisible7:!1,dialogVisible4:!1,total:0,page:1,keyword:"",size:10,types:[],statuses:[{id:10,name:"归还中"},{id:11,name:"已归还"},{id:12,name:"审批未通过"},{id:7,name:"已关闭"}],operateList:[],order:{id:"",category:"",categoryName:"",status:"",statusName:"",expireTime:"",reason:"",userEmail:"",user:{id:"",name:"",phone:"",username:"",enabled:"",remark:""},createTime:"",updateTime:"",assetList:[]},type:"",fileList:[],urlList:[]}},components:{NewOrderReturn:f,OrderDetail:l["a"]},mounted:function(){this.initOrders(),this.initTypes()},methods:{exportData:function(){var e="/order/basic/export/return/?category=4";this.type&&"advanced"==this.type?(this.searchValue.status&&(e+="&status="+this.searchValue.status),this.searchValue.userEmail&&(e+="&userEmail="+this.searchValue.userEmail),this.searchValue.dateScope&&(e+="&dateScope="+this.searchValue.dateScope)):e+="&id="+this.keyword,window.open(e,"_parent")},emptyOrder:function(){this.order={id:"",category:"",categoryName:"",status:"",statusName:"",expireTime:"",reason:"",userEmail:"",user:{id:"",name:"",phone:"",username:""},createTime:"",updateTime:"",assetList:[]}},showAddView:function(){this.emptyOrder(),this.title="归还资产",this.dialogVisible4=!0},showEditView:function(e){this.title="编辑申请信息",this.order=e,this.dialogVisible4=!0},showDetailView:function(e){if(this.title="申请单详情",this.order=e,this.order.asset&&this.order.asset.fileList){this.urlList=[];for(var t=0;t<this.order.asset.fileList.length;t++)this.urlList.push(this.order.asset.fileList[t].url)}else this.urlList=null;this.dialogVisible7=!0},getOperateList:function(e){var t=this;this.getRequest("/order/task/getOperateList?id="+e.id).then((function(s){s&&(t.operateList=s.obj,t.showDetailView(e))}))},deleteOrder:function(){var e=this;this.$confirm("此操作将永久删除选中的记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.deleteRequestWithData("/order/basic/delete",e.orderIds).then((function(t){t&&e.initOrders()}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},sizeChange:function(e){this.size=e,this.type&&"advanced"==this.type?this.initOrdersAdv():this.initOrders()},currentChange:function(e){this.page=e,this.type&&"advanced"==this.type?this.initOrdersAdv():this.initOrders()},initOrders:function(){var e=this;this.type="",this.loading=!0;var t="/order/basic/get/?category=4&page="+this.page+"&size="+this.size+"&oid="+this.keyword;this.getRequest(t).then((function(t){e.loading=!1,t&&(e.orders=t.data,e.total=t.total)}))},initOrdersAdv:function(){var e=this;this.type="advanced",this.loading=!0;var t="/order/basic/get/?category=4&page="+this.page+"&size="+this.size;this.searchValue.status&&(t+="&status="+this.searchValue.status),this.searchValue.userEmail&&(t+="&userEmail="+this.searchValue.userEmail),this.searchValue.dateScope&&(t+="&dateScope="+this.searchValue.dateScope),this.getRequest(t).then((function(t){e.loading=!1,t&&(e.orders=t.data,e.total=t.total)}))},handleSelectionChange:function(e){for(var t=0;t<e.length;t++)this.orderIds.push(e[t].id)},clearSearchValue:function(){this.searchValue={status:null,userEmail:null,dateScope:null}},initTypes:function(){var e=this,t="/asset/types/get";this.getRequest(t).then((function(t){t&&(e.types=t.obj)}))}}},b=m,g=Object(h["a"])(b,a,i,!1,null,null,null);t["default"]=g.exports},"9f77":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",[s("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[s("div",[s("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.showPurchaseOrderAddView}},[e._v("\n          添加订单信息\n        ")]),s("el-button",{staticStyle:{display:"inline-flex","margin-left":"8px"},attrs:{type:"success",icon:"el-icon-download"},on:{click:e.exportData}},[e._v("\n          导出数据\n        ")])],1),s("div",[s("el-input",{staticStyle:{width:"350px","margin-right":"10px"},attrs:{placeholder:"请输入资产编号进行搜索，可以直接回车搜索...","prefix-icon":"el-icon-search",clearable:"",disabled:e.showAdvanceSearchView},on:{clear:e.initAssets},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.initAssets(t)}},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}}),s("el-button",{attrs:{icon:"el-icon-search",type:"primary",disabled:e.showAdvanceSearchView},on:{click:e.initAssets}},[e._v("\n          搜索\n        ")]),s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.showAdvanceSearchView=!e.showAdvanceSearchView}}},[s("i",{class:e.showAdvanceSearchView?"fa fa-angle-double-up":"fa fa-angle-double-down",attrs:{"aria-hidden":"true"}}),e._v("\n          高级搜索\n        ")])],1)]),s("transition",{attrs:{name:"slide-fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.showAdvanceSearchView,expression:"showAdvanceSearchView"}],staticStyle:{border:"1px solid #759ad1","border-radius":"5px","box-sizing":"border-box",padding:"5px",margin:"10px 0px"}},[s("el-row",[s("el-col",{attrs:{span:6}},[e._v("\n            类型:\n            "),s("el-select",{staticStyle:{width:"130px"},attrs:{clearable:"",placeholder:"类型",size:"mini"},model:{value:e.searchValue.type,callback:function(t){e.$set(e.searchValue,"type",t)},expression:"searchValue.type"}},e._l(e.types,(function(e){return s("el-option",{key:e.id,attrs:{label:e.name,value:e.name}})})),1)],1),s("el-col",{attrs:{span:5}},[e._v("\n            品牌:\n            "),s("el-input",{staticStyle:{width:"100px"},attrs:{size:"mini","prefix-icon":"el-icon-edit",clearable:""},model:{value:e.searchValue.brand,callback:function(t){e.$set(e.searchValue,"brand",t)},expression:"searchValue.brand"}})],1),s("el-col",{attrs:{span:5}},[e._v("\n            状态:\n            "),s("el-select",{staticStyle:{width:"130px"},attrs:{clearable:"",placeholder:"状态",size:"mini"},model:{value:e.searchValue.status,callback:function(t){e.$set(e.searchValue,"status",t)},expression:"searchValue.status"}},e._l(e.statuses,(function(e){return s("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),s("el-row",{staticStyle:{"margin-top":"10px"}},[s("el-col",{attrs:{span:6}},[e._v("\n            价格:\n            "),s("el-input",{staticStyle:{width:"100px"},attrs:{size:"mini","prefix-icon":"el-icon-edit",clearable:""},model:{value:e.searchValue.priceLow,callback:function(t){e.$set(e.searchValue,"priceLow",t)},expression:"searchValue.priceLow"}}),e._v("\n            至:\n            "),s("el-input",{staticStyle:{width:"100px"},attrs:{size:"mini","prefix-icon":"el-icon-edit",clearable:""},model:{value:e.searchValue.priceHigh,callback:function(t){e.$set(e.searchValue,"priceHigh",t)},expression:"searchValue.priceHigh"}})],1),s("el-col",{attrs:{span:9}},[e._v("\n            入库时间:\n            "),s("el-date-picker",{attrs:{type:"daterange",size:"mini","unlink-panels":"","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.searchValue.dateScope,callback:function(t){e.$set(e.searchValue,"dateScope",t)},expression:"searchValue.dateScope"}})],1),s("el-col",{attrs:{span:5,offset:4}},[s("el-button",{attrs:{size:"mini"},on:{click:e.clearSearchValue}},[e._v("重置")]),s("el-button",{attrs:{size:"mini"},on:{click:function(t){e.showAdvanceSearchView=!1}}},[e._v("取消")]),s("el-button",{attrs:{size:"mini",icon:"el-icon-search",type:"primary"},on:{click:e.initAssetsAdv}},[e._v("搜索")])],1)],1)],1)])],1),s("div",{staticStyle:{"margin-top":"10px"}},[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.assets,stripe:"",border:"","element-loading-text":"正在加载...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"},on:{"selection-change":e.handleSelectionChange}},[s("el-table-column",{attrs:{type:"selection",width:"55"}}),s("el-table-column",{attrs:{fixed:"",label:"资产编号",align:"left",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{size:"mini"},on:{click:function(s){return e.showDetailView(t.row)}}},[e._v(e._s(t.row.id))])]}}])}),s("el-table-column",{attrs:{prop:"statusName",label:"状态",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return["2"==t.row.status?s("span",{staticStyle:{color:"#00e079","font-weight":"bold"}},[e._v(e._s(t.row.statusName))]):"3"==t.row.status?s("span",{staticStyle:{color:"#ff4777","font-weight":"bold"}},[e._v(e._s(t.row.statusName))]):"4"==t.row.status?s("span",{staticStyle:{color:"#c0c0c0"}},[e._v(e._s(t.row.statusName))]):s("span",[e._v(e._s(t.row.statusName))])]}}])}),s("el-table-column",{attrs:{prop:"type",align:"left",label:"类型",width:"80"}}),s("el-table-column",{attrs:{fixed:"",prop:"assetName","show-overflow-tooltip":!0,align:"left",label:"资产名称"}}),s("el-table-column",{attrs:{prop:"brand",label:"品牌",align:"left",width:"150"}}),s("el-table-column",{attrs:{prop:"price",label:"价格（元）",align:"left",width:"90"}}),s("el-table-column",{attrs:{prop:"readyDate",width:"100",align:"left",label:"入库时间"}}),s("el-table-column",{attrs:{prop:"updateTime",width:"100",align:"left",label:"更新时间"}}),s("el-table-column",{attrs:{fixed:"right",width:"80",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{on:{click:function(s){return e.showEditView(t.row)}}},[e._v("编辑")])]}}])})],1),s("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[s("el-pagination",{attrs:{background:"",layout:"sizes, prev, pager, next, jumper, ->, total, slot",total:e.total},on:{"current-change":e.currentChange,"size-change":e.sizeChange}})],1),s("AssetDetail",{attrs:{dialogVisible2:e.dialogVisible2,asset:e.asset,urlList:e.urlList,title:e.title},on:{close:function(t){e.dialogVisible2=!1}}}),s("PurchaseOrderEdit",{attrs:{dialogVisible3:e.dialogVisible3,purchase:e.purchase,assetIds:e.assetIds,title:e.title},on:{close:function(t){e.dialogVisible3=!1},empty:function(t){e.assetIds=[]}}}),s("AssetEdit",{attrs:{dialogVisible:e.dialogVisible,asset:e.asset,fileList:e.fileList,title:e.title,types:e.types},on:{close:function(t){e.dialogVisible=!1}}})],1)])},i=[],l=s("5c8f"),r=s("27fb"),n=s("4ca5"),o={name:"AssetInfo",mounted:function(){this.initAssets(),this.initTypes()},data:function(){return{assetIds:[],showAdvanceSearchView:!1,searchValue:{type:null,brand:null,status:null,priceLow:null,priceHigh:null,dateScope:null},loading:!1,total:0,page:1,keyword:"",size:10,dialogVisible:!1,dialogVisible2:!1,dialogVisible3:!1,title:"",assets:[],asset:{id:"",status:"",statusName:"",assetName:"",brand:"",type:"",price:"",fileList:[],adv:{},remark:""},fileList:[],urlList:[],type:"",types:[],statuses:[{id:2,name:"闲置"},{id:3,name:"故障"},{id:4,name:"报废"},{id:6,name:"使用中"}],dialogImageUrl:"",purchase:{id:"",name:"",total:"",discount:"",pay:"",purchaseDate:"",hasInvoice:"",invoiceDate:"",remark:"",creatorEmail:"",updaterEmail:"",creator:{},updater:{},createTime:"",updateTime:"",assetList:[],fileList:[]}}},components:{AssetDetail:l["a"],PurchaseOrderEdit:r["a"],AssetEdit:n["a"]},methods:{emptyPurchase:function(){this.purchase={id:"",name:"",total:"",discount:"",pay:"",purchaseDate:"",hasInvoice:"",invoiceDate:"",remark:"",creatorEmail:"",updaterEmail:"",creator:{},updater:{},createTime:"",updateTime:"",assetList:[],fileList:[]}},exportData:function(){var e="/asset/export/?1=1";this.type&&"advanced"==this.type?(this.searchValue.type&&(e+="&type="+this.searchValue.type),this.searchValue.brand&&(e+="&brand="+this.searchValue.brand),this.searchValue.status&&(e+="&status="+this.searchValue.status),this.searchValue.userEmail&&(e+="&userEmail="+this.searchValue.userEmail),this.searchValue.priceLow&&(e+="&priceLow="+this.searchValue.priceLow),this.searchValue.priceHigh&&(e+="&priceHigh="+this.searchValue.priceHigh),this.searchValue.dateScope&&(e+="&dateScope="+this.searchValue.dateScope)):e+="&id="+this.keyword,window.open(e,"_parent")},sizeChange:function(e){this.size=e,this.type&&"advanced"==this.type?this.initAssetsAdv():this.initAssets()},currentChange:function(e){this.page=e,this.type&&"advanced"==this.type?this.initAssetsAdv():this.initAssets()},showEditView:function(e){this.title="编辑资产信息",this.asset=e,this.asset.fileList&&this.asset.fileList.length>0?this.fileList=this.asset.fileList:this.fileList=[],this.dialogVisible=!0},showDetailView:function(e){if(this.title="资产信息详情",this.asset=e,this.asset&&this.asset.fileList){this.urlList=[];for(var t=0;t<this.asset.fileList.length;t++)this.urlList.push(this.asset.fileList[t].url)}else this.urlList=null;this.dialogVisible2=!0},initAssets:function(){var e=this;this.type="",this.loading=!0;var t="/asset/get/?page="+this.page+"&size="+this.size+"&aid="+this.keyword;this.getRequest(t).then((function(t){e.loading=!1,t&&(e.assets=t.data,e.total=t.total)}))},initAssetsAdv:function(){var e=this;this.type="advanced",this.loading=!0;var t="/asset/get/?page="+this.page+"&size="+this.size;this.searchValue.type&&(t+="&type="+this.searchValue.type),this.searchValue.brand&&(t+="&brand="+this.searchValue.brand),this.searchValue.status&&(t+="&status="+this.searchValue.status),this.searchValue.userEmail&&(t+="&userEmail="+this.searchValue.userEmail),this.searchValue.priceLow&&(t+="&priceLow="+this.searchValue.priceLow),this.searchValue.priceHigh&&(t+="&priceHigh="+this.searchValue.priceHigh),this.searchValue.dateScope&&(t+="&dateScope="+this.searchValue.dateScope),this.getRequest(t).then((function(t){e.loading=!1,t&&(e.assets=t.data,e.total=t.total)}))},clearSearchValue:function(){this.searchValue={type:null,brand:null,status:null,priceLow:null,priceHigh:null,dateScope:null}},initTypes:function(){var e=this,t="/asset/types/get";this.getRequest(t).then((function(t){t&&(e.types=t.obj)}))},showPurchaseOrderAddView:function(){this.emptyPurchase(),this.fileList=[],this.title="新增订单信息",this.dialogVisible3=!0},handleSelectionChange:function(e){this.assetIds=[];for(var t=0;t<e.length;t++)this.assetIds.push(e[t].id)}}},c=o,d=s("2877"),u=Object(d["a"])(c,a,i,!1,null,"0614859e",null);t["default"]=u.exports},b9d6:function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-dialog",{attrs:{title:e.title,visible:e.dialogVisible7,"before-close":e.handleClose,width:"80%"},on:{"update:visible":function(t){e.dialogVisible7=t}}},[s("div",[s("el-form",{attrs:{model:e.order}},[e.order.user?[s("el-row",[s("el-col",{attrs:{span:6}},[s("el-form-item",{attrs:{label:"申请人:",prop:"applicant"}},[e._v("\n                "+e._s(e.order.user.name)+"\n              ")])],1),s("el-col",{attrs:{span:6}},[s("el-form-item",{attrs:{label:"申请人电话:",prop:"applicantPhone"}},[e._v("\n                "+e._s(e.order.user.phone)+"\n              ")])],1),s("el-col",{attrs:{span:6}},[s("el-form-item",{attrs:{label:"申请人邮箱:",prop:"applicantEmail"}},[e._v("\n                "+e._s(e.order.user.username)+"\n              ")])],1)],1)]:e._e(),s("el-row",[s("el-col",{attrs:{span:10}},[s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.order.expireTime,expression:"order.expireTime"}],attrs:{label:"预计归还时间:",prop:"expireTime"}},[e._v("\n              "+e._s(e.order.expireTime)+"\n            ")])],1)],1),s("el-row",[s("el-col",{attrs:{span:10}},[s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.order.reason&&""!=e.order.reason,expression:"order.reason&&order.reason!=''"}],attrs:{label:"理由:",prop:"reason"}},[e._v("\n              "+e._s(e.order.reason)+"\n            ")])],1)],1),s("el-table",{directives:[{name:"show",rawName:"v-show",value:e.order.assetList&&e.order.assetList.length>0,expression:"order.assetList&&order.assetList.length>0"}],staticStyle:{width:"100%"},attrs:{data:e.order.assetList,stripe:"",border:"","element-loading-text":"正在加载...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[s("el-table-column",{attrs:{fixed:"",label:"资产编号",align:"left",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{size:"mini"},on:{click:function(s){return e.showDetailView(t.row)}}},[e._v(e._s(t.row.id))])]}}])}),s("el-table-column",{attrs:{fixed:"",prop:"assetName","show-overflow-tooltip":!0,align:"left",label:"资产名称"}}),s("el-table-column",{attrs:{prop:"statusName",label:"状态",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return["2"==t.row.status?s("span",{staticStyle:{color:"#00e079","font-weight":"bold"}},[e._v(e._s(t.row.statusName))]):"3"==t.row.status?s("span",{staticStyle:{color:"#ff4777","font-weight":"bold"}},[e._v(e._s(t.row.statusName))]):"4"==t.row.status?s("span",{staticStyle:{color:"#c0c0c0"}},[e._v(e._s(t.row.statusName))]):s("span",[e._v(e._s(t.row.statusName))])]}}])}),s("el-table-column",{attrs:{prop:"type",align:"left",label:"类型",width:"200"}}),s("el-table-column",{attrs:{prop:"brand",label:"品牌",align:"left",width:"200"}}),s("el-table-column",{attrs:{prop:"price",label:"价格（元）",align:"left",width:"200"}})],1)],2)],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e._l(e.operateList,(function(t){return[s("el-button",{attrs:{type:"primary"},on:{click:function(s){return e.checkAndHandle(t.operateType)}}},[e._v(e._s(t.operate))])]})),s("el-button",{on:{click:function(t){return e.$emit("close")}}},[e._v("取 消")])],2)]),s("AssetDetail",{attrs:{dialogVisible2:e.dialogVisible2,asset:e.asset,urlList:e.urlList,title:e.title},on:{close:function(t){e.dialogVisible2=!1}}})],1)},i=[],l=s("5c8f"),r={name:"OrderDetail",props:["order","title","dialogVisible7","operateList"],data:function(){return{dialogVisible2:!1,asset:{id:"",brand:"",type:"",price:"",fileList:[],adv:{},remark:""},name:"",taskHandleDto:{id:null,operateType:null},urlList:[]}},components:{AssetDetail:l["a"]},methods:{handle:function(){var e=this;this.taskHandleDto.id=this.order.id,this.postRequest("/order/task/handleTask",this.taskHandleDto).then((function(t){t&&(e.visible=!1,e.$emit("close"),e.$parent.initOrders())}))},cancel:function(){var e=this;this.taskHandleDto.id=this.order.id,this.postRequest("/order/task/cancel",this.taskHandleDto).then((function(t){t&&(e.visible=!1,e.$emit("close"),e.$parent.initOrders())}))},checkAndHandle:function(e){this.taskHandleDto.operateType=e,"7"==e?this.cancel():this.handle()},handleClose:function(){this.$emit("close")},showDetailView:function(e){if(this.title="资产详情",this.asset=e,this.asset&&this.asset.fileList){this.urlList=[];for(var t=0;t<this.asset.fileList.length;t++)this.urlList.push(this.asset.fileList[t].url)}else this.urlList=null;this.dialogVisible2=!0}}},n=r,o=s("2877"),c=Object(o["a"])(n,a,i,!1,null,"0c8eb5ac",null);t["a"]=c.exports},bb79:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",[s("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[s("div",[s("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.showAddView}},[e._v("\n          新增采购单\n        ")]),s("el-button",{staticStyle:{display:"inline-flex","margin-left":"8px"},attrs:{type:"success",icon:"el-icon-download"},on:{click:e.exportData}},[e._v("\n          导出数据\n        ")]),s("el-button",{staticStyle:{display:"inline-flex","margin-left":"8px"},attrs:{type:"danger"},on:{click:e.deleteOrder}},[e._v("\n          删除\n        ")])],1),s("div",[s("el-input",{staticStyle:{width:"350px","margin-right":"10px"},attrs:{placeholder:"请输入采购单号进行搜索，可以直接回车搜索...","prefix-icon":"el-icon-search",clearable:"",disabled:e.showAdvanceSearchView},on:{clear:e.initOrders},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.initOrders(t)}},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}}),s("el-button",{attrs:{icon:"el-icon-search",type:"primary",disabled:e.showAdvanceSearchView},on:{click:e.initOrders}},[e._v("\n          搜索\n        ")]),s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.showAdvanceSearchView=!e.showAdvanceSearchView}}},[s("i",{class:e.showAdvanceSearchView?"fa fa-angle-double-up":"fa fa-angle-double-down",attrs:{"aria-hidden":"true"}}),e._v("\n          高级搜索\n        ")])],1)]),s("transition",{attrs:{name:"slide-fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.showAdvanceSearchView,expression:"showAdvanceSearchView"}],staticStyle:{border:"1px solid #759ad1","border-radius":"5px","box-sizing":"border-box",padding:"5px",margin:"10px 0px"}},[s("el-row",[s("el-col",{attrs:{span:4}},[e._v("\n            状态:\n            "),s("el-select",{staticStyle:{width:"130px"},attrs:{clearable:"",placeholder:"状态",size:"mini"},model:{value:e.searchValue.status,callback:function(t){e.$set(e.searchValue,"status",t)},expression:"searchValue.status"}},e._l(e.statuses,(function(e){return s("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),s("el-col",{attrs:{span:6}},[e._v("\n            申请人邮箱:\n            "),s("el-input",{staticStyle:{width:"200px"},attrs:{size:"mini",clearable:"","prefix-icon":"el-icon-edit"},model:{value:e.searchValue.userEmail,callback:function(t){e.$set(e.searchValue,"userEmail",t)},expression:"searchValue.userEmail"}})],1),s("el-col",{attrs:{span:10}},[e._v("\n            申请时间:\n            "),s("el-date-picker",{attrs:{type:"daterange",size:"mini","unlink-panels":"","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.searchValue.dateScope,callback:function(t){e.$set(e.searchValue,"dateScope",t)},expression:"searchValue.dateScope"}})],1),s("el-col",{attrs:{span:4}},[s("el-button",{attrs:{size:"mini"},on:{click:e.clearSearchValue}},[e._v("重置")]),s("el-button",{attrs:{size:"mini"},on:{click:function(t){e.showAdvanceSearchView=!1}}},[e._v("取消")]),s("el-button",{attrs:{size:"mini",icon:"el-icon-search",type:"primary"},on:{click:e.initOrdersAdv}},[e._v("搜索")])],1)],1)],1)])],1),s("div",{staticStyle:{"margin-top":"10px"}},[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.orders,stripe:"",border:"","element-loading-text":"正在加载...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"},on:{"selection-change":e.handleSelectionChange}},[s("el-table-column",{attrs:{type:"selection",width:"55"}}),s("el-table-column",{attrs:{fixed:"",label:"采购单号",align:"left",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{size:"mini"},on:{click:function(s){return e.getOperateList(t.row)}}},[e._v(e._s(t.row.id))])]}}])}),s("el-table-column",{attrs:{prop:"statusName",width:"90",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return["2"==t.row.status||"3"==t.row.status?s("span",{staticStyle:{color:"#00e079","font-weight":"bold"}},[e._v(e._s(t.row.statusName))]):"6"==t.row.status?s("span",{staticStyle:{color:"#ff4777","font-weight":"bold"}},[e._v(e._s(t.row.statusName))]):"7"==t.row.status?s("span",{staticStyle:{color:"#c0c0c0"}},[e._v(e._s(t.row.statusName))]):s("span",[e._v(e._s(t.row.statusName))])]}}])}),s("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"关联资产编号"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.assetList,(function(t,a){return s("el-tag",{key:a,staticStyle:{"margin-right":"4px"},attrs:{type:"success"}},[e._v(e._s(t.id)+"\n          ")])}))}}])}),s("el-table-column",{attrs:{prop:"reason","show-overflow-tooltip":!0,label:"申请理由"}}),s("el-table-column",{attrs:{prop:"user.name",width:"95",align:"left",label:"申请人"}}),s("el-table-column",{attrs:{prop:"user.username",width:"150",align:"left",label:"申请人邮箱"}}),s("el-table-column",{attrs:{prop:"user.phone",width:"100",label:"申请人电话"}}),s("el-table-column",{attrs:{prop:"createTime",width:"100",align:"left",label:"申请时间"}}),s("el-table-column",{attrs:{fixed:"right",width:"80",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{directives:[{name:"show",rawName:"v-show",value:"1"==t.row.status,expression:"scope.row.status=='1'"}],on:{click:function(s){return e.showEditView(t.row)}}},[e._v("编辑")])]}}])})],1),s("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[s("el-pagination",{attrs:{background:"",layout:"sizes, prev, pager, next, jumper, ->, total, slot",total:e.total},on:{"current-change":e.currentChange,"size-change":e.sizeChange}})],1)],1),s("NewOrderIn",{attrs:{dialogVisible4:e.dialogVisible4,order:e.order,title:e.title,types:e.types},on:{close:function(t){e.dialogVisible4=!1}}}),s("OrderDetail",{attrs:{dialogVisible7:e.dialogVisible7,order:e.order,title:e.title,operateList:e.operateList},on:{close:function(t){e.dialogVisible7=!1}}})],1)},i=[],l=s("b9d6"),r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-dialog",{attrs:{title:e.title,visible:e.dialogVisible4,"before-close":e.handleClose,width:"80%"},on:{"update:visible":function(t){e.dialogVisible4=t}}},[s("div",[s("el-form",{ref:"orderForm",attrs:{model:e.order,rules:e.rules}},[s("el-row",[s("el-col",{attrs:{span:20}},[s("el-form-item",{attrs:{label:"理由:",prop:"reason"}},[s("el-input",{attrs:{size:"mini",type:"textarea",rows:2,placeholder:"请输入申请理由"},model:{value:e.order.reason,callback:function(t){e.$set(e.order,"reason",t)},expression:"order.reason"}})],1)],1)],1),s("el-row",[s("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.showAddView}},[e._v("\n            新增资产\n          ")]),s("el-button",{staticStyle:{display:"inline-flex","margin-left":"8px"},attrs:{type:"danger"},on:{click:e.deleteAsset}},[e._v("\n            删除\n          ")])],1),s("div",{staticStyle:{"margin-top":"20px"}},[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.order.assetList,stripe:"",border:"","element-loading-text":"正在加载...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"},on:{"selection-change":e.handleSelectionChange}},[s("el-table-column",{attrs:{type:"selection",width:"55"}}),s("el-table-column",{attrs:{fixed:"",label:"资产编号",align:"left",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{size:"mini"},on:{click:function(s){return e.showDetailView(t.row)}}},[e._v(e._s(t.row.id))])]}}])}),s("el-table-column",{attrs:{fixed:"",prop:"assetName","show-overflow-tooltip":!0,align:"left",label:"资产名称"}}),s("el-table-column",{attrs:{prop:"statusName",label:"状态",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return["2"==t.row.status?s("span",{staticStyle:{color:"#00e079","font-weight":"bold"}},[e._v(e._s(t.row.statusName))]):"3"==t.row.status?s("span",{staticStyle:{color:"#ff4777","font-weight":"bold"}},[e._v(e._s(t.row.statusName))]):"4"==t.row.status?s("span",{staticStyle:{color:"#c0c0c0"}},[e._v(e._s(t.row.statusName))]):s("span",[e._v(e._s(t.row.statusName))])]}}])}),s("el-table-column",{attrs:{prop:"type",align:"left",label:"类型",width:"200"}}),s("el-table-column",{attrs:{prop:"brand",label:"品牌",align:"left",width:"200"}}),s("el-table-column",{attrs:{prop:"price",label:"价格（元）",align:"left",width:"200"}}),s("el-table-column",{attrs:{fixed:"right",width:"80",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{on:{click:function(s){return e.showEditView(t.row)}}},[e._v("编辑")])]}}])})],1),s("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[s("el-pagination",{attrs:{background:"",layout:"sizes, prev, pager, next, jumper, ->, total, slot",total:e.total},on:{"current-change":e.currentChange,"size-change":e.sizeChange}})],1)],1)],1)],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:e.handleCancle}},[e._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:e.doAddOrderIn}},[e._v("确 定")])],1)]),s("AssetDetail",{attrs:{dialogVisible2:e.dialogVisible2,asset:e.asset,urlList:e.urlList,title:e.title2},on:{close:function(t){e.dialogVisible2=!1}}}),s("AssetEdit",{attrs:{dialogVisible:e.dialogVisible,asset:e.asset,fileList:e.fileList,title:e.title2,types:e.types},on:{close:function(t){e.dialogVisible=!1},handleAssetIds:e.handleAssetIds}})],1)},n=[],o=s("4ca5"),c=s("5c8f"),d={name:"NewOrderIn",props:["order","title","dialogVisible4","types"],data:function(){return{initData:{aids:[],page:1,size:10},assetIds:[],fileList:[],urlList:[],dialogVisible:!1,dialogVisible2:!1,title2:"",loading:!1,asset:{id:"",status:"",statusName:"",assetName:"",brand:"",type:"",price:"",fileList:[],adv:{},remark:""},total:0,page:1,size:10,rules:{reason:[{required:!0,message:"请输入申请理由",trigger:"blur"}]}}},components:{AssetEdit:o["a"],AssetDetail:c["a"]},methods:{handleCancle:function(){var e=this;this.deleteRequest("/asset/clear").then((function(t){t&&(e.$emit("close"),e.$parent.initOrders())}))},emptyAsset:function(){this.asset={id:null,assetName:"",brand:"",type:"",price:"",fileList:[],adv:{},remark:""}},doAddOrderIn:function(){var e=this;this.order.id?this.$refs["orderForm"].validate((function(t){t&&e.putRequest("/order/basic/edit",e.order).then((function(t){t&&(e.$emit("close"),e.$parent.initOrders())}))})):this.$refs["orderForm"].validate((function(t){t&&e.postRequest("/order/basic/add",e.order).then((function(t){t&&(e.$emit("close"),e.$parent.initOrders())}))}))},showAddView:function(){this.emptyAsset(),this.fileList=[],this.title2="新增资产",this.dialogVisible=!0},showDetailView:function(e){if(this.title2="资产详情",this.asset=e,this.asset&&this.asset.fileList){this.urlList=[];for(var t=0;t<this.asset.fileList.length;t++)this.urlList.push(this.asset.fileList[t].url)}else this.urlList=null;this.dialogVisible2=!0},showEditView:function(e){this.title2="编辑资产",this.asset=e,this.asset.fileList&&this.asset.fileList.length>0?this.fileList=this.asset.fileList:this.fileList=[],this.dialogVisible=!0},deleteAsset:function(){for(var e=[],t=0;t<this.order.assetList.length;t++){for(var s=!0,a=0;a<this.assetIds.length;a++)if(this.order.assetList[t].id==this.assetIds[a]){s=!1;break}1==s&&e.push(this.order.assetList[t].id)}this.initData.aids=e,this.initAssets()},handleClose:function(){this.$emit("close")},initAssets:function(){var e=this;this.loading=!0;var t="/asset/getAssetByAids";this.postRequest(t,this.initData).then((function(t){e.loading=!1,t&&(e.order.assetList=t.data,e.total=t.total)}))},sizeChange:function(e){this.size=e,this.initAssets()},currentChange:function(e){this.page=e,this.initAssets()},handleSelectionChange:function(e){this.assetIds=[];for(var t=0;t<e.length;t++)this.assetIds.push(e[t].id)},handleAssetIds:function(e){this.freshAids();for(var t=0;t<e.length;t++)this.initData.aids.push(e[t]);this.dialogVisible=!1,this.initAssets()},freshAids:function(){for(var e=0;e<this.order.assetList.length;e++)this.initData.aids.push(this.order.assetList[e].id)}}},u=d,h=s("2877"),p=Object(h["a"])(u,r,n,!1,null,"a443441e",null),f=p.exports,m={name:"AssetIn",data:function(){return{searchValue:{status:null,userEmail:null,dateScope:null},title:"",showAdvanceSearchView:!1,orders:[],loading:!1,dialogVisible7:!1,dialogVisible4:!1,total:0,page:1,keyword:"",size:10,types:[],statuses:[{id:1,name:"申请采购"},{id:2,name:"审批通过"},{id:3,name:"已入库"},{id:6,name:"审批未通过"},{id:7,name:"已关闭"}],operateList:[],orderIds:[],order:{id:"",category:"",categoryName:"",status:"",statusName:"",expireTime:"",reason:"",userEmail:"",user:{id:"",name:"",phone:"",username:"",enabled:"",remark:""},createTime:"",updateTime:"",assetList:[]},type:""}},components:{NewOrderIn:f,OrderDetail:l["a"]},mounted:function(){this.clearAndInit(),this.initTypes()},methods:{exportData:function(){var e="/order/basic/export/in/?category=1";this.type&&"advanced"==this.type?(this.searchValue.status&&(e+="&status="+this.searchValue.status),this.searchValue.userEmail&&(e+="&userEmail="+this.searchValue.userEmail),this.searchValue.dateScope&&(e+="&dateScope="+this.searchValue.dateScope)):e+="&id="+this.keyword,window.open(e,"_parent")},emptyOrder:function(){this.order={id:"",category:"",categoryName:"",status:"",statusName:"",expireTime:"",reason:"",userEmail:"",user:{id:"",name:"",phone:"",username:""},createTime:"",updateTime:"",assetList:[]}},showAddView:function(){this.emptyOrder(),this.title="资产采购申请",this.dialogVisible4=!0},showEditView:function(e){this.title="编辑申请信息",this.order=e,this.dialogVisible4=!0},showDetailView:function(e){this.title="申请单详情",this.order=e,this.dialogVisible7=!0},getOperateList:function(e){var t=this;this.getRequest("/order/task/getOperateList?id="+e.id).then((function(s){s&&(t.operateList=s.obj,t.showDetailView(e))}))},deleteOrder:function(){var e=this;this.$confirm("此操作将永久删除选中的记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.deleteRequestWithData("/order/basic/delete",e.orderIds).then((function(t){t&&(e.orderIds=[],e.initOrders())}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},sizeChange:function(e){this.size=e,this.type&&"advanced"==this.type?this.initOrdersAdv():this.initOrders()},currentChange:function(e){this.page=e,this.type&&"advanced"==this.type?this.initOrdersAdv():this.initOrders()},initOrders:function(){var e=this;this.type="",this.loading=!0;var t="/order/basic/get/?category=1&page="+this.page+"&size="+this.size+"&oid="+this.keyword;this.getRequest(t).then((function(t){e.loading=!1,t&&(e.orders=t.data,e.total=t.total)}))},initOrdersAdv:function(){var e=this;this.type="advanced",this.loading=!0;var t="/order/basic/get/?category=1&page="+this.page+"&size="+this.size;this.searchValue.status&&(t+="&status="+this.searchValue.status),this.searchValue.userEmail&&(t+="&userEmail="+this.searchValue.userEmail),this.searchValue.dateScope&&(t+="&dateScope="+this.searchValue.dateScope),this.getRequest(t).then((function(t){e.loading=!1,t&&(e.orders=t.data,e.total=t.total)}))},initTypes:function(){var e=this,t="/asset/types/get";this.getRequest(t).then((function(t){t&&(e.types=t.obj)}))},handleSelectionChange:function(e){this.orderIds=[];for(var t=0;t<e.length;t++)this.orderIds.push(e[t].id)},clearSearchValue:function(){this.searchValue={status:null,userEmail:null,dateScope:null}},clearAndInit:function(){var e=this;this.deleteRequest("/asset/clear").then((function(t){t&&e.initOrders()}))}}},b=m,g=Object(h["a"])(b,a,i,!1,null,null,null);t["default"]=g.exports},cf71:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",[s("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[s("div",{staticStyle:{display:"inline-flex","margin-left":"8px"}}),s("div",[s("el-input",{staticStyle:{width:"350px","margin-right":"10px"},attrs:{placeholder:"请输入资产编号进行搜索，可以直接回车搜索...","prefix-icon":"el-icon-search",clearable:"",disabled:e.showAdvanceSearchView},on:{clear:e.initAssets},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.initAssets(t)}},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}}),s("el-button",{attrs:{icon:"el-icon-search",type:"primary",disabled:e.showAdvanceSearchView},on:{click:e.initAssets}},[e._v("\n          搜索\n        ")]),s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.showAdvanceSearchView=!e.showAdvanceSearchView}}},[s("i",{class:e.showAdvanceSearchView?"fa fa-angle-double-up":"fa fa-angle-double-down",attrs:{"aria-hidden":"true"}}),e._v("\n          高级搜索\n        ")])],1)]),s("transition",{attrs:{name:"slide-fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.showAdvanceSearchView,expression:"showAdvanceSearchView"}],staticStyle:{border:"1px solid #759ad1","border-radius":"5px","box-sizing":"border-box",padding:"5px",margin:"10px 0px"}},[s("el-row",[s("el-col",{attrs:{span:6}},[e._v("\n            类型:\n            "),s("el-select",{staticStyle:{width:"130px"},attrs:{clearable:"",placeholder:"类型",size:"mini"},model:{value:e.searchValue.type,callback:function(t){e.$set(e.searchValue,"type",t)},expression:"searchValue.type"}},e._l(e.types,(function(e){return s("el-option",{key:e.id,attrs:{label:e.name,value:e.name}})})),1)],1),s("el-col",{attrs:{span:5}},[e._v("\n            品牌:\n            "),s("el-input",{staticStyle:{width:"100px"},attrs:{size:"mini","prefix-icon":"el-icon-edit",clearable:""},model:{value:e.searchValue.brand,callback:function(t){e.$set(e.searchValue,"brand",t)},expression:"searchValue.brand"}})],1),s("el-col",{attrs:{span:5}},[e._v("\n            状态:\n            "),s("el-select",{staticStyle:{width:"130px"},attrs:{clearable:"",placeholder:"状态",size:"mini"},model:{value:e.searchValue.status,callback:function(t){e.$set(e.searchValue,"status",t)},expression:"searchValue.status"}},e._l(e.statuses,(function(e){return s("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),s("el-row",{staticStyle:{"margin-top":"10px"}},[s("el-col",{attrs:{span:6}},[e._v("\n            价格:\n            "),s("el-input",{staticStyle:{width:"100px"},attrs:{size:"mini","prefix-icon":"el-icon-edit",clearable:""},model:{value:e.searchValue.priceLow,callback:function(t){e.$set(e.searchValue,"priceLow",t)},expression:"searchValue.priceLow"}}),e._v("\n            至:\n            "),s("el-input",{staticStyle:{width:"100px"},attrs:{size:"mini","prefix-icon":"el-icon-edit",clearable:""},model:{value:e.searchValue.priceHigh,callback:function(t){e.$set(e.searchValue,"priceHigh",t)},expression:"searchValue.priceHigh"}})],1),s("el-col",{attrs:{span:9}},[e._v("\n            入库时间:\n            "),s("el-date-picker",{attrs:{type:"daterange",size:"mini","unlink-panels":"","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.searchValue.dateScope,callback:function(t){e.$set(e.searchValue,"dateScope",t)},expression:"searchValue.dateScope"}})],1),s("el-col",{attrs:{span:5,offset:4}},[s("el-button",{attrs:{size:"mini"},on:{click:e.clearSearchValue}},[e._v("重置")]),s("el-button",{attrs:{size:"mini"},on:{click:function(t){e.showAdvanceSearchView=!1}}},[e._v("取消")]),s("el-button",{attrs:{size:"mini",icon:"el-icon-search",type:"primary"},on:{click:e.initAssetsAdv}},[e._v("搜索")])],1)],1)],1)])],1),s("div",{staticStyle:{"margin-top":"10px"}},[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.assets,stripe:"",border:"","element-loading-text":"正在加载...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[s("el-table-column",{attrs:{type:"selection",width:"55"}}),s("el-table-column",{attrs:{fixed:"",label:"资产编号",align:"left",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{size:"mini"},on:{click:function(s){return e.showDetailView(t.row)}}},[e._v(e._s(t.row.id))])]}}])}),s("el-table-column",{attrs:{prop:"statusName",label:"状态",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return["2"==t.row.status?s("span",{staticStyle:{color:"#00e079","font-weight":"bold"}},[e._v(e._s(t.row.statusName))]):"3"==t.row.status?s("span",{staticStyle:{color:"#ff4777","font-weight":"bold"}},[e._v(e._s(t.row.statusName))]):"4"==t.row.status?s("span",{staticStyle:{color:"#c0c0c0"}},[e._v(e._s(t.row.statusName))]):s("span",[e._v(e._s(t.row.statusName))])]}}])}),s("el-table-column",{attrs:{prop:"type",align:"left",label:"类型",width:"80"}}),s("el-table-column",{attrs:{fixed:"",prop:"assetName","show-overflow-tooltip":!0,align:"left",label:"资产名称"}}),s("el-table-column",{attrs:{prop:"brand",label:"品牌",align:"left",width:"150"}}),s("el-table-column",{attrs:{prop:"price",label:"价格（元）",align:"left",width:"90"}}),s("el-table-column",{attrs:{prop:"readyDate",width:"100",align:"left",label:"入库时间"}}),s("el-table-column",{attrs:{prop:"updateTime",width:"100",align:"left",label:"更新时间"}}),s("el-table-column",{attrs:{fixed:"right",width:"80",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{directives:[{name:"show",rawName:"v-show",value:"3"!=t.row.status&&"4"!=t.row.status,expression:"scope.row.status!='3'&&scope.row.status!='4'"}],on:{click:function(s){return e.changeStatus(t.row,"3")}}},[e._v("\n            报修\n          ")]),s("el-button",{directives:[{name:"show",rawName:"v-show",value:"3"==t.row.status,expression:"scope.row.status=='3'"}],attrs:{type:"success"},on:{click:function(s){return e.changeStatus(t.row,"2")}}},[e._v("\n            恢复\n          ")])]}}])})],1),s("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[s("el-pagination",{attrs:{background:"",layout:"sizes, prev, pager, next, jumper, ->, total, slot",total:e.total},on:{"current-change":e.currentChange,"size-change":e.sizeChange}})],1),s("AssetDetail",{attrs:{dialogVisible2:e.dialogVisible2,asset:e.asset,urlList:e.urlList,title:e.title},on:{close:function(t){e.dialogVisible2=!1}}})],1)])},i=[],l=s("5c8f"),r={name:"AssetRepair",mounted:function(){this.initAssets(),this.initTypes()},data:function(){return{showAdvanceSearchView:!1,searchValue:{type:null,brand:null,status:null,priceLow:null,priceHigh:null,dateScope:null},loading:!1,total:0,page:1,keyword:"",size:10,dialogVisible2:!1,title:"",assets:[],asset:{id:"",status:"",statusName:"",assetName:"",brand:"",type:"",price:"",fileList:[],adv:{}},rules:{brand:[{required:!0,message:"请输入品牌",trigger:"blur"}],price:[{required:!0,message:"请输入价格",trigger:"blur"}]},type:"",types:[],statuses:[{id:2,name:"正常"},{id:3,name:"故障"},{id:4,name:"报废"}],urlList:[]}},components:{AssetDetail:l["a"]},methods:{sizeChange:function(e){this.size=e,this.type&&"advanced"==this.type?this.initAssetsAdv():this.initAssets()},currentChange:function(e){this.page=e,this.type&&"advanced"==this.type?this.initAssetsAdv():this.initAssets()},changeStatus:function(e,t){var s=this;e.status=t,this.putRequest("/asset/changeStatus",e).then((function(e){s.initAssets()}))},showDetailView:function(e){if(this.title="资产信息详情",this.asset=e,this.asset&&this.asset.fileList){this.urlList=[];for(var t=0;t<this.asset.fileList.length;t++)this.urlList.push(this.asset.fileList[t].url)}else this.urlList=null;this.dialogVisible2=!0},initAssets:function(){var e=this;this.type="",this.loading=!0;var t="/asset/get/?page="+this.page+"&size="+this.size+"&aid="+this.keyword;this.getRequest(t).then((function(t){e.loading=!1,t&&(e.assets=t.data,e.total=t.total)}))},initAssetsAdv:function(){var e=this;this.type="advanced",this.loading=!0;var t="/asset/get/?category=1&page="+this.page+"&size="+this.size;this.searchValue.type&&(t+="&type="+this.searchValue.type),this.searchValue.brand&&(t+="&brand="+this.searchValue.brand),this.searchValue.status&&(t+="&status="+this.searchValue.status),this.searchValue.userEmail&&(t+="&userEmail="+this.searchValue.userEmail),this.searchValue.priceLow&&(t+="&priceLow="+this.searchValue.priceLow),this.searchValue.priceHigh&&(t+="&priceHigh="+this.searchValue.priceHigh),this.searchValue.dateScope&&(t+="&dateScope="+this.searchValue.dateScope),this.getRequest(t).then((function(t){e.loading=!1,t&&(e.assets=t.data,e.total=t.total)}))},clearSearchValue:function(){this.searchValue={type:null,brand:null,status:null,priceLow:null,priceHigh:null,dateScope:null}},initTypes:function(){var e=this,t="/asset/types/get";this.getRequest(t).then((function(t){t&&(e.types=t.obj)}))}}},n=r,o=s("2877"),c=Object(o["a"])(n,a,i,!1,null,"910fd0fc",null);t["default"]=c.exports},e11c:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",[s("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[s("div",{staticStyle:{display:"inline-flex","margin-left":"8px"}}),s("div",[s("el-input",{staticStyle:{width:"350px","margin-right":"10px"},attrs:{placeholder:"请输入资产编号进行搜索，可以直接回车搜索...","prefix-icon":"el-icon-search",clearable:"",disabled:e.showAdvanceSearchView},on:{clear:e.initAssets},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.initAssets(t)}},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}}),s("el-button",{attrs:{icon:"el-icon-search",type:"primary",disabled:e.showAdvanceSearchView},on:{click:e.initAssets}},[e._v("\n          搜索\n        ")]),s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.showAdvanceSearchView=!e.showAdvanceSearchView}}},[s("i",{class:e.showAdvanceSearchView?"fa fa-angle-double-up":"fa fa-angle-double-down",attrs:{"aria-hidden":"true"}}),e._v("\n          高级搜索\n        ")])],1)]),s("transition",{attrs:{name:"slide-fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.showAdvanceSearchView,expression:"showAdvanceSearchView"}],staticStyle:{border:"1px solid #759ad1","border-radius":"5px","box-sizing":"border-box",padding:"5px",margin:"10px 0px"}},[s("el-row",[s("el-col",{attrs:{span:6}},[e._v("\n            类型:\n            "),s("el-select",{staticStyle:{width:"130px"},attrs:{clearable:"",placeholder:"类型",size:"mini"},model:{value:e.searchValue.type,callback:function(t){e.$set(e.searchValue,"type",t)},expression:"searchValue.type"}},e._l(e.types,(function(e){return s("el-option",{key:e.id,attrs:{label:e.name,value:e.name}})})),1)],1),s("el-col",{attrs:{span:5}},[e._v("\n            品牌:\n            "),s("el-input",{staticStyle:{width:"100px"},attrs:{size:"mini","prefix-icon":"el-icon-edit",clearable:""},model:{value:e.searchValue.brand,callback:function(t){e.$set(e.searchValue,"brand",t)},expression:"searchValue.brand"}})],1),s("el-col",{attrs:{span:5}},[e._v("\n            状态:\n            "),s("el-select",{staticStyle:{width:"130px"},attrs:{clearable:"",placeholder:"状态",size:"mini"},model:{value:e.searchValue.status,callback:function(t){e.$set(e.searchValue,"status",t)},expression:"searchValue.status"}},e._l(e.statuses,(function(e){return s("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),s("el-row",{staticStyle:{"margin-top":"10px"}},[s("el-col",{attrs:{span:6}},[e._v("\n            价格:\n            "),s("el-input",{staticStyle:{width:"100px"},attrs:{size:"mini","prefix-icon":"el-icon-edit",clearable:""},model:{value:e.searchValue.priceLow,callback:function(t){e.$set(e.searchValue,"priceLow",t)},expression:"searchValue.priceLow"}}),e._v("\n            至:\n            "),s("el-input",{staticStyle:{width:"100px"},attrs:{size:"mini","prefix-icon":"el-icon-edit",clearable:""},model:{value:e.searchValue.priceHigh,callback:function(t){e.$set(e.searchValue,"priceHigh",t)},expression:"searchValue.priceHigh"}})],1),s("el-col",{attrs:{span:9}},[e._v("\n            入库时间:\n            "),s("el-date-picker",{attrs:{type:"daterange",size:"mini","unlink-panels":"","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.searchValue.beginDateScope,callback:function(t){e.$set(e.searchValue,"beginDateScope",t)},expression:"searchValue.beginDateScope"}})],1),s("el-col",{attrs:{span:5,offset:4}},[s("el-button",{attrs:{size:"mini"},on:{click:e.clearSearchValue}},[e._v("重置")]),s("el-button",{attrs:{size:"mini"},on:{click:function(t){e.showAdvanceSearchView=!1}}},[e._v("取消")]),s("el-button",{attrs:{size:"mini",icon:"el-icon-search",type:"primary"},on:{click:e.initAssetsAdv}},[e._v("搜索")])],1)],1)],1)])],1),s("div",{staticStyle:{"margin-top":"10px"}},[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.assets,stripe:"",border:"","element-loading-text":"正在加载...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[s("el-table-column",{attrs:{type:"selection",width:"55"}}),s("el-table-column",{attrs:{fixed:"",label:"资产编号",align:"left",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{size:"mini"},on:{click:function(s){return e.showDetailView(t.row)}}},[e._v(e._s(t.row.id))])]}}])}),s("el-table-column",{attrs:{prop:"statusName",label:"状态",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return["2"==t.row.status?s("span",{staticStyle:{color:"#00e079","font-weight":"bold"}},[e._v(e._s(t.row.statusName))]):"3"==t.row.status?s("span",{staticStyle:{color:"#ff4777","font-weight":"bold"}},[e._v(e._s(t.row.statusName))]):"4"==t.row.status?s("span",{staticStyle:{color:"#c0c0c0"}},[e._v(e._s(t.row.statusName))]):s("span",[e._v(e._s(t.row.statusName))])]}}])}),s("el-table-column",{attrs:{prop:"type",align:"left",label:"类型",width:"80"}}),s("el-table-column",{attrs:{fixed:"",prop:"assetName","show-overflow-tooltip":!0,align:"left",label:"资产名称"}}),s("el-table-column",{attrs:{prop:"brand",label:"品牌",align:"left",width:"150"}}),s("el-table-column",{attrs:{prop:"price",label:"价格（元）",align:"left",width:"90"}}),s("el-table-column",{attrs:{prop:"readyDate",width:"100",align:"left",label:"入库时间"}}),s("el-table-column",{attrs:{prop:"updateTime",width:"100",align:"left",label:"更新时间"}}),s("el-table-column",{attrs:{fixed:"right",width:"80",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{directives:[{name:"show",rawName:"v-show",value:"4"!=t.row.status,expression:"scope.row.status!='4'"}],attrs:{type:"danger"},on:{click:function(s){return e.changeStatus(t.row,"4")}}},[e._v("清退\n          ")])]}}])})],1),s("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[s("el-pagination",{attrs:{background:"",layout:"sizes, prev, pager, next, jumper, ->, total, slot",total:e.total},on:{"current-change":e.currentChange,"size-change":e.sizeChange}})],1),s("AssetDetail",{attrs:{dialogVisible2:e.dialogVisible2,asset:e.asset,urlList:e.urlList,title:e.title},on:{close:function(t){e.dialogVisible2=!1}}})],1)])},i=[],l=s("5c8f"),r={name:"AssetClean",mounted:function(){this.initAssets(),this.initTypes()},data:function(){return{showAdvanceSearchView:!1,searchValue:{type:null,brand:null,status:null,priceLow:null,priceHigh:null,beginDateScope:null},loading:!1,total:0,page:1,keyword:"",size:10,dialogVisible:!1,dialogVisible2:!1,title:"",assets:[],asset:{id:"",status:"",statusName:"",assetName:"",brand:"",type:"",price:"",fileList:[],adv:{}},type:"",types:[],statuses:[{id:2,name:"正常"},{id:3,name:"故障"},{id:4,name:"报废"}],urlList:[]}},components:{AssetDetail:l["a"]},methods:{sizeChange:function(e){this.size=e,this.type&&"advanced"==this.type?this.initAssetsAdv():this.initAssets()},currentChange:function(e){this.page=e,this.type&&"advanced"==this.type?this.initAssetsAdv():this.initAssets()},changeStatus:function(e,t){var s=this;e.status=t,this.putRequest("/asset/changeStatus",e).then((function(e){s.initAssets()}))},showDetailView:function(e){if(this.title="资产信息详情",this.asset=e,this.asset&&this.asset.fileList){this.urlList=[];for(var t=0;t<this.asset.fileList.length;t++)this.urlList.push(this.asset.fileList[t].url)}else this.urlList=null;this.dialogVisible2=!0},initAssets:function(){var e=this;this.type="",this.loading=!0;var t="/asset/get/?page="+this.page+"&size="+this.size+"&aid="+this.keyword;this.getRequest(t).then((function(t){e.loading=!1,t&&(e.assets=t.data,e.total=t.total)}))},initAssetsAdv:function(){var e=this;this.type="advanced",this.loading=!0;var t="/asset/get/?category=1&page="+this.page+"&size="+this.size;this.searchValue.type&&(t+="&type="+this.searchValue.type),this.searchValue.brand&&(t+="&brand="+this.searchValue.brand),this.searchValue.status&&(t+="&status="+this.searchValue.status),this.searchValue.userEmail&&(t+="&userEmail="+this.searchValue.userEmail),this.searchValue.priceLow&&(t+="&priceLow="+this.searchValue.priceLow),this.searchValue.priceHigh&&(t+="&priceHigh="+this.searchValue.priceHigh),this.searchValue.beginDateScope&&(t+="&beginDateScope="+this.searchValue.beginDateScope),this.getRequest(t).then((function(t){e.loading=!1,t&&(e.assets=t.data,e.total=t.total)}))},clearSearchValue:function(){this.searchValue={type:null,brand:null,status:null,priceLow:null,priceHigh:null,beginDateScope:null}},initTypes:function(){var e=this,t="/asset/types/get";this.getRequest(t).then((function(t){t&&(e.types=t.obj)}))}}},n=r,o=s("2877"),c=Object(o["a"])(n,a,i,!1,null,"5d3130f0",null);t["default"]=c.exports}}]);
//# sourceMappingURL=chunk-5aa7fc9d.d6fc4b8e.js.map