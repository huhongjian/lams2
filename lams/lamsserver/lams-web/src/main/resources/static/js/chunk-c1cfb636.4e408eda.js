(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c1cfb636"],{"27fb":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{title:e.title,visible:e.dialogVisible3,"before-close":e.handleClose,width:"80%"},on:{"update:visible":function(t){e.dialogVisible3=t}}},[a("div",[a("el-form",{ref:"purchaseForm",attrs:{model:e.purchase,rules:e.rules}},[a("el-row",[a("el-col",{attrs:{span:15}},[a("el-form-item",{attrs:{label:"订单名称:",prop:"name"}},[a("el-input",{staticStyle:{width:"800px"},attrs:{size:"mini","prefix-icon":"el-icon-edit"},model:{value:e.purchase.name,callback:function(t){e.$set(e.purchase,"name",t)},expression:"purchase.name"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"订单总价（元）:",prop:"total"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini","prefix-icon":"el-icon-edit"},model:{value:e.purchase.total,callback:function(t){e.$set(e.purchase,"total",t)},expression:"purchase.total"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"订单优惠（元）:",prop:"discount"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini","prefix-icon":"el-icon-edit"},model:{value:e.purchase.discount,callback:function(t){e.$set(e.purchase,"discount",t)},expression:"purchase.discount"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"实际支付（元）:",prop:"pay"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini","prefix-icon":"el-icon-edit"},model:{value:e.purchase.pay,callback:function(t){e.$set(e.purchase,"pay",t)},expression:"purchase.pay"}})],1)],1),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:"购买日期:",prop:"purchaseDate"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.purchase.purchaseDate,callback:function(t){e.$set(e.purchase,"purchaseDate",t)},expression:"purchase.purchaseDate"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"是否有发票:",prop:"hasInvoice"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.purchase.hasInvoice,callback:function(t){e.$set(e.purchase,"hasInvoice",t)},expression:"purchase.hasInvoice"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:"发票日期:",prop:"invoiceDate"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.purchase.invoiceDate,callback:function(t){e.$set(e.purchase,"invoiceDate",t)},expression:"purchase.invoiceDate"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"订单备注:",prop:"remark"}},[a("el-input",{attrs:{size:"mini",type:"textarea",rows:2},model:{value:e.purchase.remark,callback:function(t){e.$set(e.purchase,"remark",t)},expression:"purchase.remark"}})],1)],1)],1)],1),a("el-form",[a("el-row",[a("el-form-item",{attrs:{label:"订单相关图片:"}})],1),a("el-row",[a("el-form-item",{attrs:{prop:"pics"}},[a("el-upload",{ref:"upload",attrs:{data:e.uploadData,"file-list":e.fileList,action:"/purchase/pic/add","list-type":"picture-card","on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove,"auto-upload":!1}},[a("i",{staticClass:"el-icon-plus"})])],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.$emit("close")}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.doAddPurchase}},[e._v("确 定")])],1)]),a("el-dialog",{attrs:{visible:e.visible},on:{"update:visible":function(t){e.visible=t}}},[a("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)},i=[],r={name:"PurchaseOrderEdit",props:["purchase","fileList","title","dialogVisible3","assetIds"],data:function(){return{addData:{purchaseOrder:{},aids:[]},uploadData:{poid:""},options:[{value:!0,label:"是"},{value:!1,label:"否"}],rules:{total:[{required:!0,message:"请输入订单总价",trigger:"blur"}],discount:[{required:!0,message:"请输入订单优惠",trigger:"blur"}],pay:[{required:!0,message:"请输入实际支付",trigger:"blur"}],purchaseDate:[{required:!0,message:"请输入购买日期",trigger:"blur"}],hasInvoice:[{required:!0,message:"请选择发票情况",trigger:"blur"}]},dialogImageUrl:"",visible:!1}},methods:{doAddPurchase:function(){var e=this;this.purchase.id?this.$refs["purchaseForm"].validate((function(t){t&&e.putRequest("/purchase/edit",e.purchase).then((function(t){t&&(e.uploadData.poid=e.purchase.id,e.$refs.upload.submit(),e.$emit("empty"),e.$emit("close"),e.$parent.initPurchaseOrders())}))})):this.$refs["purchaseForm"].validate((function(t){t&&(e.addData.purchaseOrder=e.purchase,e.addData.aids=e.assetIds,e.postRequest("/purchase/add",e.addData).then((function(t){t&&(e.uploadData.poid=t.obj,e.$refs.upload.submit(),e.$emit("empty"),e.$emit("close"),e.$parent.initPurchaseOrders())})))}))},handleClose:function(){this.$emit("close")},handleRemove:function(e,t){var a=this;e.id&&this.deleteRequest("/purchase/pic/remove/?pid="+e.id).then((function(e){e&&a.$parent.initPurchaseOrders()})),console.log(e,t)},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.visible=!0}}},l=r,n=a("2877"),o=Object(n["a"])(l,s,i,!1,null,"9a84273e",null);t["a"]=o.exports},"2aa2":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[a("div",[a("el-button",{attrs:{type:"success",icon:"el-icon-download"},on:{click:e.exportData}},[e._v("\n          导出数据\n        ")]),a("el-button",{staticStyle:{display:"inline-flex","margin-left":"8px"},attrs:{type:"danger"},on:{click:e.deleteOrder}},[e._v("\n          删除\n        ")])],1),a("div",[a("el-input",{staticStyle:{width:"350px","margin-right":"10px"},attrs:{placeholder:"请输入借用单号进行搜索，可以直接回车搜索...","prefix-icon":"el-icon-search",clearable:"",disabled:e.showAdvanceSearchView},on:{clear:e.initOrders},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.initOrders(t)}},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}}),a("el-button",{attrs:{icon:"el-icon-search",type:"primary",disabled:e.showAdvanceSearchView},on:{click:e.initOrders}},[e._v("\n          搜索\n        ")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.showAdvanceSearchView=!e.showAdvanceSearchView}}},[a("i",{class:e.showAdvanceSearchView?"fa fa-angle-double-up":"fa fa-angle-double-down",attrs:{"aria-hidden":"true"}}),e._v("\n          高级搜索\n        ")])],1)]),a("transition",{attrs:{name:"slide-fade"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.showAdvanceSearchView,expression:"showAdvanceSearchView"}],staticStyle:{border:"1px solid #759ad1","border-radius":"5px","box-sizing":"border-box",padding:"5px",margin:"10px 0px"}},[a("el-row",[a("el-col",{attrs:{span:6}},[e._v("\n            类型:\n            "),a("el-select",{staticStyle:{width:"130px"},attrs:{clearable:"",placeholder:"类型",size:"mini"},model:{value:e.searchValue.type,callback:function(t){e.$set(e.searchValue,"type",t)},expression:"searchValue.type"}},e._l(e.types,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.name}})})),1)],1),a("el-col",{attrs:{span:5}},[e._v("\n            品牌:\n            "),a("el-input",{staticStyle:{width:"100px"},attrs:{size:"mini","prefix-icon":"el-icon-edit",clearable:""},model:{value:e.searchValue.brand,callback:function(t){e.$set(e.searchValue,"brand",t)},expression:"searchValue.brand"}})],1),a("el-col",{attrs:{span:5}},[e._v("\n            状态:\n            "),a("el-select",{staticStyle:{width:"130px"},attrs:{clearable:"",placeholder:"状态",size:"mini"},model:{value:e.searchValue.status,callback:function(t){e.$set(e.searchValue,"status",t)},expression:"searchValue.status"}},e._l(e.statuses,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),a("el-row",{staticStyle:{"margin-top":"10px"}},[a("el-col",{attrs:{span:6}},[e._v("\n            负责人邮箱:\n            "),a("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini",clearable:"","prefix-icon":"el-icon-edit"},model:{value:e.searchValue.userEmail,callback:function(t){e.$set(e.searchValue,"userEmail",t)},expression:"searchValue.userEmail"}})],1),a("el-col",{attrs:{span:9}},[e._v("\n            申请时间:\n            "),a("el-date-picker",{attrs:{type:"daterange",size:"mini","unlink-panels":"","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.searchValue.dateScope,callback:function(t){e.$set(e.searchValue,"dateScope",t)},expression:"searchValue.dateScope"}})],1),a("el-col",{attrs:{span:5,offset:4}},[a("el-button",{attrs:{size:"mini"},on:{click:e.clearSearchValue}},[e._v("重置")]),a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.showAdvanceSearchView=!1}}},[e._v("取消")]),a("el-button",{attrs:{size:"mini",icon:"el-icon-search",type:"primary"},on:{click:e.initOrdersAdv}},[e._v("搜索")])],1)],1)],1)])],1),a("div",{staticStyle:{"margin-top":"10px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.orders,stripe:"",border:"","element-loading-text":"正在加载...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{prop:"id",fixed:"",label:"借用单号",align:"left",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.getOperateList(t.row)}}},[e._v(e._s(t.row.id))])]}}])}),a("el-table-column",{attrs:{prop:"asset.id",fixed:"",align:"left",label:"资产编号",width:"90"}}),a("el-table-column",{attrs:{fixed:"",prop:"asset.assetName","show-overflow-tooltip":!0,align:"left",label:"资产名称",width:"80"}}),a("el-table-column",{attrs:{prop:"asset.type",align:"left",label:"类型",width:"60"}}),a("el-table-column",{attrs:{prop:"asset.brand",label:"品牌",align:"left",width:"80"}}),a("el-table-column",{attrs:{prop:"statusName",width:"90",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return["2"==t.row.status||"3"==t.row.status?a("span",{staticStyle:{color:"#00e079","font-weight":"bold"}},[e._v(e._s(t.row.statusName))]):"6"==t.row.status||"8"==t.row.status||"7"==t.row.status?a("span",{staticStyle:{color:"#ff4777","font-weight":"bold"}},[e._v(e._s(t.row.statusName))]):"5"==t.row.status?a("span",{staticStyle:{color:"#c0c0c0"}},[e._v(e._s(t.row.statusName))]):a("span",[e._v(e._s(t.row.statusName))])]}}])}),a("el-table-column",{attrs:{prop:"expireTime",width:"100",align:"left",label:"预计归还时间"}}),a("el-table-column",{attrs:{prop:"reason",label:"申请理由"}}),a("el-table-column",{attrs:{prop:"user.name",width:"95",align:"left",label:"负责人"}}),a("el-table-column",{attrs:{prop:"user.username",width:"150",label:"负责人邮箱"}}),a("el-table-column",{attrs:{prop:"user.phone",width:"100",label:"负责人电话"}}),a("el-table-column",{attrs:{prop:"createTime",width:"100",align:"left",label:"申请时间"}}),a("el-table-column",{attrs:{prop:"asset.readyDate",width:"100",align:"left",label:"入库时间"}}),a("el-table-column",{attrs:{fixed:"right",width:"80",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{on:{click:function(a){return e.showEditView(t.row)}}},[e._v("编辑")])]}}])})],1),a("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[a("el-pagination",{attrs:{background:"",layout:"sizes, prev, pager, next, jumper, ->, total, slot",total:e.total},on:{"current-change":e.currentChange,"size-change":e.sizeChange}})],1)],1),a("OrderEdit",{attrs:{dialogVisible:e.dialogVisible,order:e.order,fileList:e.fileList,title:e.title},on:{close:function(t){e.dialogVisible=!1}}}),a("OrderDetail",{attrs:{dialogVisible2:e.dialogVisible2,order:e.order,title:e.title,urlList:e.urlList,operateList:e.operateList,out:e.out},on:{close:function(t){e.dialogVisible2=!1}}})],1)},i=[],r=a("b9d6"),l=a("3622"),n={name:"EmpBasic",data:function(){return{out:!0,searchValue:{type:null,brand:null,status:null,userEmail:null,dateScope:null},title:"",showAdvanceSearchView:!1,orders:[],loading:!1,dialogVisible:!1,dialogVisible2:!1,total:0,page:1,keyword:"",size:10,types:[],statuses:[{id:3,name:"已入库"},{id:4,name:"申请借用"},{id:5,name:"已借出"},{id:6,name:"审批未通过"},{id:7,name:"已关闭"}],operateList:[],order:{id:"",category:"",categoryName:"",status:"",statusName:"",expireTime:"",reason:"",userEmail:"",user:{id:"",name:"",phone:"",username:"",enabled:"",remark:""},createTime:"",updateTime:"",asset:{id:"",status:"",statusName:"",assetName:"",brand:"",type:"",price:"",fileList:[],adv:{},remark:""}},type:"",fileList:[],urlList:[]}},components:{OrderDetail:r["a"],OrderEdit:l["a"]},mounted:function(){this.initOrders(),this.initTypes()},methods:{exportData:function(){var e="/order/basic/export/out/?category=2";this.type&&"advanced"==this.type?(this.searchValue.type&&(e+="&type="+this.searchValue.type),this.searchValue.brand&&(e+="&brand="+this.searchValue.brand),this.searchValue.status&&(e+="&status="+this.searchValue.status),this.searchValue.userEmail&&(e+="&userEmail="+this.searchValue.userEmail),this.searchValue.dateScope&&(e+="&dateScope="+this.searchValue.dateScope)):e+="&id="+this.keyword,window.open(e,"_parent")},emptyOrder:function(){this.order={id:"",category:"",categoryName:"",status:"",statusName:"",expireTime:"",reason:"",userEmail:"",user:{id:"",name:"",phone:"",username:""},createTime:"",updateTime:"",asset:{id:"",brand:"",type:"",price:"",fileList:[],adv:{}}}},showEditView:function(e){this.title="编辑申请信息",this.order=e,this.order.asset.fileList&&this.order.asset.fileList.length>0?this.fileList=this.order.asset.fileList:this.fileList=[],this.dialogVisible=!0},showDetailView:function(e){if(this.title="申请单详情",this.order=e,this.order.asset&&this.order.asset.fileList){this.urlList=[];for(var t=0;t<this.order.asset.fileList.length;t++)this.urlList.push(this.order.asset.fileList[t].url)}else this.urlList=null;this.dialogVisible2=!0},getOperateList:function(e){var t=this;this.getRequest("/order/task/getOperateList?id="+e.id).then((function(a){a&&(t.operateList=a.obj,t.showDetailView(e))}))},deleteOrder:function(){var e=this;this.$confirm("此操作将永久删除选中的记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.deleteRequestWithData("/order/basic/delete",e.orderIds).then((function(t){t&&e.initOrders()}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},sizeChange:function(e){this.size=e,this.type&&"advanced"==this.type?this.initOrdersAdv():this.initOrders()},currentChange:function(e){this.page=e,this.type&&"advanced"==this.type?this.initOrdersAdv():this.initOrders()},initOrders:function(){var e=this;this.type="",this.loading=!0;var t="/order/basic/get/?category=2&page="+this.page+"&size="+this.size+"&oid="+this.keyword;this.getRequest(t).then((function(t){e.loading=!1,t&&(e.orders=t.data,e.total=t.total)}))},initOrdersAdv:function(){var e=this;this.type="advanced",this.loading=!0;var t="/order/basic/get/?category=2&page="+this.page+"&size="+this.size;this.searchValue.type&&(t+="&type="+this.searchValue.type),this.searchValue.brand&&(t+="&brand="+this.searchValue.brand),this.searchValue.status&&(t+="&status="+this.searchValue.status),this.searchValue.userEmail&&(t+="&userEmail="+this.searchValue.userEmail),this.searchValue.dateScope&&(t+="&dateScope="+this.searchValue.dateScope),this.getRequest(t).then((function(t){e.loading=!1,t&&(e.orders=t.data,e.total=t.total)}))},handleSelectionChange:function(e){for(var t=0;t<e.length;t++)this.orderIds.push(e[t].id)},clearSearchValue:function(){this.searchValue={type:null,brand:null,status:null,userEmail:null,dateScope:null}},initTypes:function(){var e=this,t="/asset/types/get";this.getRequest(t).then((function(t){t&&(e.types=t.obj)}))}}},o=n,c=a("2877"),d=Object(c["a"])(o,s,i,!1,null,null,null);t["default"]=d.exports},3622:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{title:e.title,visible:e.dialogVisible,"before-close":e.handleClose,width:"80%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",[a("el-form",{ref:"orderForm",attrs:{model:e.order,rules:e.rules}},[a("el-row",[a("el-col",{attrs:{span:15}},[a("el-form-item",{attrs:{label:"资产名称:",prop:"asset.assetName"}},[a("el-input",{staticStyle:{width:"800px"},attrs:{size:"mini","prefix-icon":"el-icon-edit"},model:{value:e.order.asset.assetName,callback:function(t){e.$set(e.order.asset,"assetName",t)},expression:"order.asset.assetName"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"品牌:",prop:"asset.brand"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini","prefix-icon":"el-icon-edit"},model:{value:e.order.asset.brand,callback:function(t){e.$set(e.order.asset,"brand",t)},expression:"order.asset.brand"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"类型:",prop:"type"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.order.asset.type,callback:function(t){e.$set(e.order.asset,"type",t)},expression:"order.asset.type"}},e._l(e.types,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.name}})})),1)],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"价格（元）:",prop:"asset.price"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini","prefix-icon":"el-icon-edit"},model:{value:e.order.asset.price,callback:function(t){e.$set(e.order.asset,"price",t)},expression:"order.asset.price"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"理由:",prop:"reason"}},[a("el-input",{attrs:{size:"mini",type:"textarea",rows:2,placeholder:"请输入申请理由"},model:{value:e.order.reason,callback:function(t){e.$set(e.order,"reason",t)},expression:"order.reason"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"资产备注:",prop:"asset.remark"}},[a("el-input",{attrs:{size:"mini",type:"textarea",rows:2},model:{value:e.order.asset.remark,callback:function(t){e.$set(e.order.asset,"remark",t)},expression:"order.asset.remark"}})],1)],1)],1)],1),e.order.asset.adv?[a("el-form",{directives:[{name:"show",rawName:"v-show",value:"手机"==e.order.asset.type,expression:"order.asset.type=='手机'"}],attrs:{model:e.order.asset.adv}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"内存（G）:",prop:"memory"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini","prefix-icon":"el-icon-edit"},model:{value:e.order.asset.adv.memory,callback:function(t){e.$set(e.order.asset.adv,"memory",t)},expression:"order.asset.adv.memory"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"屏幕尺寸（寸）:",prop:"screenSize"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini","prefix-icon":"el-icon-edit"},model:{value:e.order.asset.adv.screenSize,callback:function(t){e.$set(e.order.asset.adv,"screenSize",t)},expression:"order.asset.adv.screenSize"}})],1)],1)],1)],1),a("el-form",{directives:[{name:"show",rawName:"v-show",value:"交换机"==e.order.asset.type,expression:"order.asset.type=='交换机'"}],attrs:{model:e.order.asset.adv}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"接口数:",prop:"nums"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini","prefix-icon":"el-icon-edit"},model:{value:e.order.asset.adv.nums,callback:function(t){e.$set(e.order.asset.adv,"nums",t)},expression:"order.asset.adv.nums"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"类型:",prop:"type"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini","prefix-icon":"el-icon-edit"},model:{value:e.order.asset.adv.type,callback:function(t){e.$set(e.order.asset.adv,"type",t)},expression:"order.asset.adv.type"}})],1)],1)],1)],1),a("el-form",{directives:[{name:"show",rawName:"v-show",value:"主机"==e.order.asset.type,expression:"order.asset.type=='主机'"}],attrs:{model:e.order.asset.adv}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"cpu:",prop:"cpu"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini","prefix-icon":"el-icon-edit"},model:{value:e.order.asset.adv.cpu,callback:function(t){e.$set(e.order.asset.adv,"cpu",t)},expression:"order.asset.adv.cpu"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"内存（G）:",prop:"memory"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini","prefix-icon":"el-icon-edit"},model:{value:e.order.asset.adv.memory,callback:function(t){e.$set(e.order.asset.adv,"memory",t)},expression:"order.asset.adv.memory"}})],1)],1)],1)],1),a("el-form",{directives:[{name:"show",rawName:"v-show",value:"测距仪"==e.order.asset.type,expression:"order.asset.type=='测距仪'"}],attrs:{model:e.order.asset.adv}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"精度:",prop:"precision"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini","prefix-icon":"el-icon-edit"},model:{value:e.order.asset.adv.precision,callback:function(t){e.$set(e.order.asset.adv,"precision",t)},expression:"order.asset.adv.precision"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"距离:",prop:"distance"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini","prefix-icon":"el-icon-edit"},model:{value:e.order.asset.adv.distance,callback:function(t){e.$set(e.order.asset.adv,"distance",t)},expression:"order.asset.adv.distance"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"方式:",prop:"methods"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini","prefix-icon":"el-icon-edit"},model:{value:e.order.asset.adv.methods,callback:function(t){e.$set(e.order.asset.adv,"methods",t)},expression:"order.asset.adv.methods"}})],1)],1)],1)],1)]:e._e(),a("el-form",[a("el-row",[a("el-form-item",{attrs:{label:"资产相关图片:"}})],1),a("el-row",[a("el-form-item",{attrs:{prop:"pics"}},[a("el-upload",{ref:"upload",attrs:{data:e.uploadData,"file-list":e.fileList,action:"/order/basic/pic/add","list-type":"picture-card","on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove,"auto-upload":!1}},[a("i",{staticClass:"el-icon-plus"})])],1)],1)],1)],2),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.$emit("close")}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.doAddAsset}},[e._v("确 定")])],1)]),a("el-dialog",{attrs:{visible:e.visible},on:{"update:visible":function(t){e.visible=t}}},[a("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)},i=[],r=a("85f2"),l=a.n(r);function n(e,t,a){return t in e?l()(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var o={name:"OrderEdit",props:["order","fileList","title","dialogVisible","types"],data:function(){var e;return{uploadData:{aid:""},rules:(e={},n(e,"asset.assetName",[{required:!0,message:"请输入资产名称",trigger:"blur"}]),n(e,"asset.brand",[{required:!0,message:"请输入品牌",trigger:"blur"}]),n(e,"asset.price",[{required:!0,message:"请输入价格",trigger:"blur"}]),n(e,"reason",[{required:!0,message:"请输入申请理由",trigger:"blur"}]),e),dialogImageUrl:"",visible:!1}},methods:{doAddAsset:function(){var e=this;this.order.asset.id?this.$refs["orderForm"].validate((function(t){t&&e.putRequest("/order/basic/edit",e.order).then((function(t){t&&(e.uploadData.aid=e.order.asset.id,e.$refs.upload.submit(),e.$emit("close"),e.$parent.initOrders())}))})):this.$refs["orderForm"].validate((function(t){t&&e.postRequest("/order/basic/add",e.order).then((function(t){t&&(e.uploadData.aid=t.obj,e.$refs.upload.submit(),e.$emit("close"),e.$parent.initOrders())}))}))},handleClose:function(){this.$emit("close")},handleRemove:function(e,t){var a=this;e.id&&this.deleteRequest("/order/basic/pic/remove/?pid="+e.id).then((function(e){e&&a.$parent.initOrders()})),console.log(e,t)},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.visible=!0}}},c=o,d=a("2877"),u=Object(d["a"])(c,s,i,!1,null,"b83d1062",null);t["a"]=u.exports},"5c8f":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.title,visible:e.dialogVisible2,"before-close":e.handleClose,width:"80%"},on:{"update:visible":function(t){e.dialogVisible2=t}}},[a("div",[a("el-form",{attrs:{model:e.asset}},[a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"资产编号:",prop:"id"}},[e._v("\n            "+e._s(e.asset.id)+"\n          ")])],1)],1),a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"资产名称:",prop:"assetName"}},[e._v("\n            "+e._s(e.asset.assetName)+"\n          ")])],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"状态:",prop:"statusName"}},[e._v("\n            "+e._s(e.asset.statusName)+"\n          ")])],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"品牌:",prop:"brand"}},[e._v("\n            "+e._s(e.asset.brand)+"\n          ")])],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"类型:",prop:"type"}},[e._v("\n            "+e._s(e.asset.type)+"\n          ")])],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"价格（元）:",prop:"price"}},[e._v("\n            "+e._s(e.asset.price)+"\n          ")])],1)],1),a("el-row",[a("el-col",{attrs:{span:10}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.asset.remark&&""!=e.asset.remark,expression:"asset.remark&&asset.remark!=''"}],attrs:{label:"资产备注:",prop:"remark"}},[e._v("\n            "+e._s(e.asset.remark)+"\n          ")])],1)],1)],1),e.asset.adv?[a("el-form",{directives:[{name:"show",rawName:"v-show",value:"手机"==e.asset.type,expression:"asset.type=='手机'"}],attrs:{model:e.asset.adv}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"内存（G）:",prop:"memory"}},[e._v("\n              "+e._s(e.asset.adv.memory)+"\n            ")])],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"屏幕尺寸（寸）:",prop:"screenSize"}},[e._v("\n              "+e._s(e.asset.adv.screenSize)+"\n            ")])],1)],1)],1),a("el-form",{directives:[{name:"show",rawName:"v-show",value:"交换机"==e.asset.type,expression:"asset.type=='交换机'"}],attrs:{model:e.asset.adv}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"接口数:",prop:"nums"}},[e._v("\n              "+e._s(e.asset.adv.nums)+"\n            ")])],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"类型:",prop:"type"}},[e._v("\n              "+e._s(e.asset.adv.type)+"\n            ")])],1)],1)],1),a("el-form",{directives:[{name:"show",rawName:"v-show",value:"主机"==e.asset.type,expression:"asset.type=='主机'"}],attrs:{model:e.asset.adv}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"cpu:",prop:"cpu"}},[e._v("\n              "+e._s(e.asset.adv.cpu)+"\n            ")])],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"内存（G）:",prop:"memory"}},[e._v("\n              "+e._s(e.asset.adv.memory)+"\n            ")])],1)],1)],1),a("el-form",{directives:[{name:"show",rawName:"v-show",value:"测距仪"==e.asset.type,expression:"asset.type=='测距仪'"}],attrs:{model:e.asset.adv}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"精度:",prop:"precision"}},[e._v("\n              "+e._s(e.asset.adv.precision)+"\n            ")])],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"距离:",prop:"distance"}},[e._v("\n              "+e._s(e.asset.adv.distance)+"\n            ")])],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"方式:",prop:"methods"}},[e._v("\n              "+e._s(e.asset.adv.methods)+"\n            ")])],1)],1)],1),a("el-form",[a("el-row",{directives:[{name:"show",rawName:"v-show",value:e.urlList&&e.urlList.length>0,expression:"urlList&&urlList.length>0"}]},[a("el-form-item",{attrs:{label:"资产相关图片:"}})],1),a("el-row",[e._l(e.urlList,(function(t){return[a("el-col",{attrs:{span:3}},[a("el-form-item",[a("el-image",{staticStyle:{width:"130px",height:"130px"},attrs:{src:t,"preview-src-list":e.urlList}})],1)],1)]}))],2)],1)]:e._e()],2),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.$emit("close")}}},[e._v("关 闭")])],1)])},i=[],r={name:"AssetDetail",props:["asset","title","urlList","dialogVisible2"],methods:{handleClose:function(){this.$emit("close")}}},l=r,n=a("2877"),o=Object(n["a"])(l,s,i,!1,null,"4214fd36",null);t["a"]=o.exports},"9f77":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[a("div",[a("el-button",{staticStyle:{display:"inline-flex","margin-left":"8px"},attrs:{type:"success",icon:"el-icon-download"},on:{click:e.exportData}},[e._v("\n          导出数据\n        ")])],1),a("div",[a("el-input",{staticStyle:{width:"350px","margin-right":"10px"},attrs:{placeholder:"请输入资产编号进行搜索，可以直接回车搜索...","prefix-icon":"el-icon-search",clearable:"",disabled:e.showAdvanceSearchView},on:{clear:e.initAssets},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.initAssets(t)}},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}}),a("el-button",{attrs:{icon:"el-icon-search",type:"primary",disabled:e.showAdvanceSearchView},on:{click:e.initAssets}},[e._v("\n          搜索\n        ")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.showAdvanceSearchView=!e.showAdvanceSearchView}}},[a("i",{class:e.showAdvanceSearchView?"fa fa-angle-double-up":"fa fa-angle-double-down",attrs:{"aria-hidden":"true"}}),e._v("\n          高级搜索\n        ")])],1)]),a("transition",{attrs:{name:"slide-fade"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.showAdvanceSearchView,expression:"showAdvanceSearchView"}],staticStyle:{border:"1px solid #759ad1","border-radius":"5px","box-sizing":"border-box",padding:"5px",margin:"10px 0px"}},[a("el-row",[a("el-col",{attrs:{span:6}},[e._v("\n            类型:\n            "),a("el-select",{staticStyle:{width:"130px"},attrs:{clearable:"",placeholder:"类型",size:"mini"},model:{value:e.searchValue.type,callback:function(t){e.$set(e.searchValue,"type",t)},expression:"searchValue.type"}},e._l(e.types,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.name}})})),1)],1),a("el-col",{attrs:{span:5}},[e._v("\n            品牌:\n            "),a("el-input",{staticStyle:{width:"100px"},attrs:{size:"mini","prefix-icon":"el-icon-edit",clearable:""},model:{value:e.searchValue.brand,callback:function(t){e.$set(e.searchValue,"brand",t)},expression:"searchValue.brand"}})],1),a("el-col",{attrs:{span:5}},[e._v("\n            状态:\n            "),a("el-select",{staticStyle:{width:"130px"},attrs:{clearable:"",placeholder:"状态",size:"mini"},model:{value:e.searchValue.status,callback:function(t){e.$set(e.searchValue,"status",t)},expression:"searchValue.status"}},e._l(e.statuses,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),a("el-row",{staticStyle:{"margin-top":"10px"}},[a("el-col",{attrs:{span:6}},[e._v("\n            价格:\n            "),a("el-input",{staticStyle:{width:"100px"},attrs:{size:"mini","prefix-icon":"el-icon-edit",clearable:""},model:{value:e.searchValue.priceLow,callback:function(t){e.$set(e.searchValue,"priceLow",t)},expression:"searchValue.priceLow"}}),e._v("\n            至:\n            "),a("el-input",{staticStyle:{width:"100px"},attrs:{size:"mini","prefix-icon":"el-icon-edit",clearable:""},model:{value:e.searchValue.priceHigh,callback:function(t){e.$set(e.searchValue,"priceHigh",t)},expression:"searchValue.priceHigh"}})],1),a("el-col",{attrs:{span:9}},[e._v("\n            入库时间:\n            "),a("el-date-picker",{attrs:{type:"daterange",size:"mini","unlink-panels":"","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.searchValue.dateScope,callback:function(t){e.$set(e.searchValue,"dateScope",t)},expression:"searchValue.dateScope"}})],1),a("el-col",{attrs:{span:5,offset:4}},[a("el-button",{attrs:{size:"mini"},on:{click:e.clearSearchValue}},[e._v("重置")]),a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.showAdvanceSearchView=!1}}},[e._v("取消")]),a("el-button",{attrs:{size:"mini",icon:"el-icon-search",type:"primary"},on:{click:e.initAssetsAdv}},[e._v("搜索")])],1)],1)],1)])],1),a("div",{staticStyle:{"margin-top":"10px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.assets,stripe:"",border:"","element-loading-text":"正在加载...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{fixed:"",label:"资产编号",align:"left",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.showDetailView(t.row)}}},[e._v(e._s(t.row.id))])]}}])}),a("el-table-column",{attrs:{prop:"statusName",label:"状态",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return["2"==t.row.status?a("span",{staticStyle:{color:"#00e079","font-weight":"bold"}},[e._v(e._s(t.row.statusName))]):"3"==t.row.status?a("span",{staticStyle:{color:"#ff4777","font-weight":"bold"}},[e._v(e._s(t.row.statusName))]):"4"==t.row.status?a("span",{staticStyle:{color:"#c0c0c0"}},[e._v(e._s(t.row.statusName))]):a("span",[e._v(e._s(t.row.statusName))])]}}])}),a("el-table-column",{attrs:{prop:"type",align:"left",label:"类型",width:"80"}}),a("el-table-column",{attrs:{fixed:"",prop:"assetName","show-overflow-tooltip":!0,align:"left",label:"资产名称"}}),a("el-table-column",{attrs:{prop:"brand",label:"品牌",align:"left",width:"80"}}),a("el-table-column",{attrs:{prop:"price",label:"价格（元）",align:"left",width:"90"}}),a("el-table-column",{attrs:{prop:"readyDate",width:"100",align:"left",label:"入库时间"}}),a("el-table-column",{attrs:{prop:"updateTime",width:"100",align:"left",label:"更新时间"}}),a("el-table-column",{attrs:{fixed:"right",width:"80",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{on:{click:function(a){return e.showEditView(t.row)}}},[e._v("编辑")])]}}])})],1),a("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[a("el-pagination",{attrs:{background:"",layout:"sizes, prev, pager, next, jumper, ->, total, slot",total:e.total},on:{"current-change":e.currentChange,"size-change":e.sizeChange}})],1),a("AssetDetail",{attrs:{dialogVisible2:e.dialogVisible2,asset:e.asset,urlList:e.urlList,title:e.title},on:{close:function(t){e.dialogVisible2=!1}}}),a("el-dialog",{attrs:{title:e.title,visible:e.dialogVisible,width:"80%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",[a("el-form",{ref:"assetForm",attrs:{model:e.asset,rules:e.rules}},[a("el-row",[a("el-col",{attrs:{span:15}},[a("el-form-item",{attrs:{label:"资产名称:",prop:"asset.assetName"}},[a("el-input",{staticStyle:{width:"800px"},attrs:{size:"mini","prefix-icon":"el-icon-edit"},model:{value:e.asset.assetName,callback:function(t){e.$set(e.asset,"assetName",t)},expression:"asset.assetName"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"品牌:",prop:"brand"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini","prefix-icon":"el-icon-edit"},model:{value:e.asset.brand,callback:function(t){e.$set(e.asset,"brand",t)},expression:"asset.brand"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"类型:",prop:"type"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.asset.type,callback:function(t){e.$set(e.asset,"type",t)},expression:"asset.type"}},e._l(e.types,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.name}})})),1)],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"价格（元）:",prop:"price"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini","prefix-icon":"el-icon-edit"},model:{value:e.asset.price,callback:function(t){e.$set(e.asset,"price",t)},expression:"asset.price"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"资产备注:",prop:"asset.remark"}},[a("el-input",{attrs:{size:"mini",type:"textarea",rows:2},model:{value:e.asset.remark,callback:function(t){e.$set(e.asset,"remark",t)},expression:"asset.remark"}})],1)],1)],1)],1),e.asset.adv?[a("el-form",{directives:[{name:"show",rawName:"v-show",value:"手机"==e.asset.type,expression:"asset.type=='手机'"}],attrs:{model:e.asset.adv}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"内存（G）:",prop:"memory"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini","prefix-icon":"el-icon-edit"},model:{value:e.asset.adv.memory,callback:function(t){e.$set(e.asset.adv,"memory",t)},expression:"asset.adv.memory"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"屏幕尺寸（寸）:",prop:"screenSize"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini","prefix-icon":"el-icon-edit"},model:{value:e.asset.adv.screenSize,callback:function(t){e.$set(e.asset.adv,"screenSize",t)},expression:"asset.adv.screenSize"}})],1)],1)],1)],1),a("el-form",{directives:[{name:"show",rawName:"v-show",value:"交换机"==e.asset.type,expression:"asset.type=='交换机'"}],attrs:{model:e.asset.adv}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"接口数:",prop:"nums"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini","prefix-icon":"el-icon-edit"},model:{value:e.asset.adv.nums,callback:function(t){e.$set(e.asset.adv,"nums",t)},expression:"asset.adv.nums"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"类型:",prop:"type"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini","prefix-icon":"el-icon-edit"},model:{value:e.asset.adv.type,callback:function(t){e.$set(e.asset.adv,"type",t)},expression:"asset.adv.type"}})],1)],1)],1)],1),a("el-form",{directives:[{name:"show",rawName:"v-show",value:"主机"==e.asset.type,expression:"asset.type=='主机'"}],attrs:{model:e.asset.adv}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"cpu:",prop:"cpu"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini","prefix-icon":"el-icon-edit"},model:{value:e.asset.adv.cpu,callback:function(t){e.$set(e.asset.adv,"cpu",t)},expression:"asset.adv.cpu"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"内存（G）:",prop:"memory"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini","prefix-icon":"el-icon-edit"},model:{value:e.asset.adv.memory,callback:function(t){e.$set(e.asset.adv,"memory",t)},expression:"asset.adv.memory"}})],1)],1)],1)],1),a("el-form",{directives:[{name:"show",rawName:"v-show",value:"测距仪"==e.asset.type,expression:"asset.type=='测距仪'"}],attrs:{model:e.asset.adv}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"精度:",prop:"precision"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini","prefix-icon":"el-icon-edit"},model:{value:e.asset.adv.precision,callback:function(t){e.$set(e.asset.adv,"precision",t)},expression:"asset.adv.precision"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"距离:",prop:"distance"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini","prefix-icon":"el-icon-edit"},model:{value:e.asset.adv.distance,callback:function(t){e.$set(e.asset.adv,"distance",t)},expression:"asset.adv.distance"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"方式:",prop:"methods"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini","prefix-icon":"el-icon-edit"},model:{value:e.asset.adv.methods,callback:function(t){e.$set(e.asset.adv,"methods",t)},expression:"asset.adv.methods"}})],1)],1)],1)],1),a("el-form",[a("el-row",[a("el-form-item",{attrs:{label:"资产相关图片:"}})],1),a("el-row",[a("el-form-item",{attrs:{prop:"pics"}},[a("el-upload",{ref:"upload",attrs:{data:e.uploadData,"file-list":e.fileList,action:"/order/basic/pic/add","list-type":"picture-card","on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove,"auto-upload":!1}},[a("i",{staticClass:"el-icon-plus"})])],1)],1)],1)]:e._e()],2),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.editAsset}},[e._v("确 定")])],1)])],1)])},i=[],r=a("5c8f"),l={name:"AssetInfo",mounted:function(){this.initAssets(),this.initTypes()},data:function(){return{uploadData:{aid:""},showAdvanceSearchView:!1,searchValue:{type:null,brand:null,status:null,priceLow:null,priceHigh:null,dateScope:null},loading:!1,total:0,page:1,keyword:"",size:10,dialogVisible:!1,dialogVisible2:!1,title:"",assets:[],asset:{id:"",status:"",statusName:"",assetName:"",brand:"",type:"",price:"",fileList:[],adv:{},remark:""},fileList:[],urlList:[],rules:{brand:[{required:!0,message:"请输入品牌",trigger:"blur"}],price:[{required:!0,message:"请输入价格",trigger:"blur"}]},type:"",types:[],statuses:[{id:2,name:"正常"},{id:3,name:"故障"},{id:4,name:"报废"}],dialogImageUrl:"",visible:!1}},components:{AssetDetail:r["a"]},methods:{exportData:function(){var e="/asset/export/?1=1";this.type&&"advanced"==this.type?(this.searchValue.type&&(e+="&type="+this.searchValue.type),this.searchValue.brand&&(e+="&brand="+this.searchValue.brand),this.searchValue.status&&(e+="&status="+this.searchValue.status),this.searchValue.userEmail&&(e+="&userEmail="+this.searchValue.userEmail),this.searchValue.priceLow&&(e+="&priceLow="+this.searchValue.priceLow),this.searchValue.priceHigh&&(e+="&priceHigh="+this.searchValue.priceHigh),this.searchValue.dateScope&&(e+="&dateScope="+this.searchValue.dateScope)):e+="&id="+this.keyword,window.open(e,"_parent")},sizeChange:function(e){this.size=e,this.type&&"advanced"==this.type?this.initAssetsAdv():this.initAssets()},currentChange:function(e){this.page=e,this.type&&"advanced"==this.type?this.initAssetsAdv():this.initAssets()},showEditView:function(e){this.title="编辑资产信息",this.asset=e,this.asset.fileList&&this.asset.fileList.length>0?this.fileList=this.asset.fileList:this.fileList=[],this.dialogVisible=!0},showDetailView:function(e){if(this.title="资产信息详情",this.asset=e,this.asset&&this.asset.fileList){this.urlList=[];for(var t=0;t<this.asset.fileList.length;t++)this.urlList.push(this.asset.fileList[t].url)}else this.urlList=null;this.dialogVisible2=!0},initAssets:function(){var e=this;this.type="",this.loading=!0;var t="/asset/get/?page="+this.page+"&size="+this.size+"&aid="+this.keyword;this.getRequest(t).then((function(t){e.loading=!1,t&&(e.assets=t.data,e.total=t.total)}))},initAssetsAdv:function(){var e=this;this.type="advanced",this.loading=!0;var t="/asset/get/?page="+this.page+"&size="+this.size;this.searchValue.type&&(t+="&type="+this.searchValue.type),this.searchValue.brand&&(t+="&brand="+this.searchValue.brand),this.searchValue.status&&(t+="&status="+this.searchValue.status),this.searchValue.userEmail&&(t+="&userEmail="+this.searchValue.userEmail),this.searchValue.priceLow&&(t+="&priceLow="+this.searchValue.priceLow),this.searchValue.priceHigh&&(t+="&priceHigh="+this.searchValue.priceHigh),this.searchValue.dateScope&&(t+="&dateScope="+this.searchValue.dateScope),this.getRequest(t).then((function(t){e.loading=!1,t&&(e.assets=t.data,e.total=t.total)}))},editAsset:function(){var e=this;this.$refs["assetForm"].validate((function(t){t&&e.putRequest("/asset/edit",e.asset).then((function(t){t&&(e.uploadData.aid=e.asset.id,e.$refs.upload.submit(),e.dialogVisible=!1,e.initAssets())}))}))},clearSearchValue:function(){this.searchValue={type:null,brand:null,status:null,priceLow:null,priceHigh:null,dateScope:null}},handleRemove:function(e,t){var a=this;e.id&&this.deleteRequest("/order/basic/pic/remove/?pid="+e.id).then((function(e){e&&a.initAssets()})),console.log(e,t)},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.visible=!0},initTypes:function(){var e=this,t="/asset/types/get";this.getRequest(t).then((function(t){t&&(e.types=t.obj)}))}}},n=l,o=a("2877"),c=Object(o["a"])(n,s,i,!1,null,"6bbfb5b3",null);t["default"]=c.exports},b9d6:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{title:e.title,visible:e.dialogVisible2,"before-close":e.handleClose,width:"80%"},on:{"update:visible":function(t){e.dialogVisible2=t}}},[a("div",[a("el-form",{attrs:{model:e.order.asset}},[a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"资产编号:",prop:"id"}},[e._v("\n              "+e._s(e.order.asset.id)+"\n            ")])],1)],1),a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"名称:",prop:"assetName"}},[e._v("\n              "+e._s(e.order.asset.assetName)+"\n            ")])],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"品牌:",prop:"brand"}},[e._v("\n              "+e._s(e.order.asset.brand)+"\n            ")])],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"类型:",prop:"type"}},[e._v("\n              "+e._s(e.order.asset.type)+"\n            ")])],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"价格（元）:",prop:"price"}},[e._v("\n              "+e._s(e.order.asset.price)+"\n            ")])],1)],1),e.order.user?[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"用户:",prop:"applicant"}},[e._v("\n                "+e._s(e.order.user.name)+"\n              ")])],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"电话:",prop:"applicantPhone"}},[e._v("\n                "+e._s(e.order.user.phone)+"\n              ")])],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"邮件:",prop:"applicantEmail"}},[e._v("\n                "+e._s(e.order.user.username)+"\n              ")])],1)],1)]:e._e(),a("el-row",[a("el-col",{attrs:{span:10}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.order.expireTime,expression:"order.expireTime"}],attrs:{label:"预计归还时间:",prop:"expireTime"}},[e._v("\n              "+e._s(e.order.expireTime)+"\n            ")])],1)],1),a("el-row",[a("el-col",{attrs:{span:10}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.order.reason&&""!=e.order.reason,expression:"order.reason&&order.reason!=''"}],attrs:{label:"理由:",prop:"reason"}},[e._v("\n              "+e._s(e.order.reason)+"\n            ")])],1)],1),a("el-row",[a("el-col",{attrs:{span:10}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.order.asset&&""!=e.order.asset.remark,expression:"order.asset&&order.asset.remark!=''"}],attrs:{label:"资产备注:",prop:"remark"}},[e._v("\n              "+e._s(e.order.asset.remark)+"\n            ")])],1)],1)],2),e.order.asset.adv?[a("el-form",{directives:[{name:"show",rawName:"v-show",value:"手机"==e.order.asset.type,expression:"order.asset.type=='手机'"}],attrs:{model:e.order.asset.adv}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"内存（G）:",prop:"memory"}},[e._v("\n                "+e._s(e.order.asset.adv.memory)+"\n              ")])],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"屏幕尺寸（寸）:",prop:"screenSize"}},[e._v("\n                "+e._s(e.order.asset.adv.screenSize)+"\n              ")])],1)],1)],1),a("el-form",{directives:[{name:"show",rawName:"v-show",value:"交换机"==e.order.asset.type,expression:"order.asset.type=='交换机'"}],attrs:{model:e.order.asset.adv}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"接口数:",prop:"nums"}},[e._v("\n                "+e._s(e.order.asset.adv.nums)+"\n              ")])],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"类型:",prop:"type"}},[e._v("\n                "+e._s(e.order.asset.adv.type)+"\n              ")])],1)],1)],1),a("el-form",{directives:[{name:"show",rawName:"v-show",value:"主机"==e.order.asset.type,expression:"order.asset.type=='主机'"}],attrs:{model:e.order.asset.adv}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"cpu:",prop:"cpu"}},[e._v("\n                "+e._s(e.order.asset.adv.cpu)+"\n              ")])],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"内存（G）:",prop:"memory"}},[e._v("\n                "+e._s(e.order.asset.adv.memory)+"\n              ")])],1)],1)],1),a("el-form",{directives:[{name:"show",rawName:"v-show",value:"测距仪"==e.order.asset.type,expression:"order.asset.type=='测距仪'"}],attrs:{model:e.order.asset.adv}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"精度:",prop:"precision"}},[e._v("\n                "+e._s(e.order.asset.adv.precision)+"\n              ")])],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"距离:",prop:"distance"}},[e._v("\n                "+e._s(e.order.asset.adv.distance)+"\n              ")])],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"方式:",prop:"methods"}},[e._v("\n                "+e._s(e.order.asset.adv.methods)+"\n              ")])],1)],1)],1),a("el-form",[a("el-row",{directives:[{name:"show",rawName:"v-show",value:e.urlList&&e.urlList.length>0,expression:"urlList&&urlList.length>0"}]},[a("el-form-item",{attrs:{label:"资产相关图片:"}})],1),a("el-row",[e._l(e.urlList,(function(t){return[a("el-col",{attrs:{span:3}},[a("el-form-item",[a("el-image",{staticStyle:{width:"130px",height:"130px"},attrs:{src:t,"preview-src-list":e.urlList}})],1)],1)]}))],2)],1)]:e._e()],2),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[!e.out||1!=e.out||"3"!=e.order.status&&"8"!=e.order.status&&"7"!=e.order.status?e._e():a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.visible2=!0}}},[e._v("借 用")]),e._l(e.operateList,(function(t){return[a("el-button",{attrs:{type:"primary"},on:{click:function(a){return e.checkAndHandle(t.operateType)}}},[e._v(e._s(t.operate))])]})),a("el-button",{on:{click:function(t){return e.$emit("close")}}},[e._v("取 消")])],2)]),a("el-dialog",{attrs:{visible:e.visible,width:"30%"},on:{"update:visible":function(t){e.visible=t}}},[a("el-form",{ref:"transForm",attrs:{model:e.taskHandleDto,rules:e.rules}},[a("el-row",{staticStyle:{margin:"0 auto",width:"300px"}},[a("el-form-item",{attrs:{label:"转交至:"}})],1),a("el-row",{staticStyle:{margin:"0 auto",width:"300px"}},[a("el-form-item",{attrs:{label:"姓名:",prop:"name"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{size:"mini","prefix-icon":"el-icon-edit"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1)],1),a("el-row",{staticStyle:{margin:"0 auto",width:"300px"}},[a("el-form-item",{attrs:{label:"邮箱:",prop:"candidateUser"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{size:"mini","prefix-icon":"el-icon-edit"},model:{value:e.taskHandleDto.candidateUser,callback:function(t){e.$set(e.taskHandleDto,"candidateUser",t)},expression:"taskHandleDto.candidateUser"}})],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.transfer}},[e._v("转交")]),a("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("取 消")])],1)],1),a("el-dialog",{attrs:{visible:e.visible2,width:"30%"},on:{"update:visible":function(t){e.visible2=t}}},[a("el-form",{ref:"borrowForm",attrs:{model:e.order,rules:e.borrowFormRules}},[a("el-row",{staticStyle:{margin:"0 auto",width:"300px"}},[a("el-form-item",{attrs:{label:"预计归还时间:",prop:"expireTime"}},[a("el-date-picker",{attrs:{type:"date","picker-options":e.pickerOptions,placeholder:"选择日期",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd"},model:{value:e.order.expireTime,callback:function(t){e.$set(e.order,"expireTime",t)},expression:"order.expireTime"}})],1)],1),a("el-row",{staticStyle:{margin:"0 auto",width:"300px"}},[a("el-form-item",{attrs:{label:"申请理由:",prop:"reason"}},[a("el-input",{attrs:{size:"mini",type:"textarea",rows:2},model:{value:e.order.reason,callback:function(t){e.$set(e.order,"reason",t)},expression:"order.reason"}})],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.borrow}},[e._v("确 认")]),a("el-button",{on:{click:e.clearBorrowForm}},[e._v("取 消")])],1)],1)],1)},i=[],r={name:"OrderDetail",props:["order","title","dialogVisible2","urlList","operateList","out"],data:function(){var e=this;return{visible:!1,visible2:!1,name:"",taskHandleDto:{id:null,operateType:null,candidateUser:null},rules:{candidateUser:[{required:!0,message:"请输入转交人邮箱",trigger:"blur"}]},borrowFormRules:{expireTime:[{required:!0,message:"请输入预计转交时间",trigger:"blur"}],reason:[{required:!0,message:"请输入申请理由",trigger:"blur"}]},pickerOptions:{disabledDate:function(t){return e.dealDisabledDate(t)}}}},methods:{transfer:function(){var e=this;this.$refs["transForm"].validate((function(t){t&&e.handle()}))},handle:function(){var e=this;this.taskHandleDto.id=this.order.id,this.postRequest("/order/task/handleTask",this.taskHandleDto).then((function(t){t&&(e.visible=!1,e.$emit("close"),e.$parent.initOrders())}))},cancel:function(){var e=this;this.taskHandleDto.id=this.order.id,this.postRequest("/order/task/cancel",this.taskHandleDto).then((function(t){t&&(e.visible=!1,e.$emit("close"),e.$parent.initOrders())}))},checkAndHandle:function(e){this.taskHandleDto.operateType=e,"5"==e?this.visible=!0:"7"==e?this.cancel():this.handle()},borrow:function(){var e=this;this.$refs["borrowForm"].validate((function(t){t&&e.postRequest("/order/basic/borrow",e.order).then((function(t){t&&(e.visible2=!1,e.$emit("close"),e.$parent.initOrders())}))}))},handleClose:function(){this.$emit("close")},dealDisabledDate:function(e){var t=Date.now()-864e5;return e.getTime()<t},clearBorrowForm:function(){this.order.expireTime="",this.order.reason="",this.visible2=!1}}},l=r,n=a("2877"),o=Object(n["a"])(l,s,i,!1,null,"414317cc",null);t["a"]=o.exports},bb79:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[a("div",[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.showAddView}},[e._v("\n          新增资产\n        ")]),a("el-button",{attrs:{type:"warning",icon:"el-icon-plus"},on:{click:e.showPurchaseOrderAddView}},[e._v("\n          添加订单信息\n        ")]),a("el-button",{staticStyle:{display:"inline-flex","margin-left":"8px"},attrs:{type:"success",icon:"el-icon-download"},on:{click:e.exportData}},[e._v("\n          导出数据\n        ")]),a("el-button",{staticStyle:{display:"inline-flex","margin-left":"8px"},attrs:{type:"danger"},on:{click:e.deleteOrder}},[e._v("\n          删除\n        ")])],1),a("div",[a("el-input",{staticStyle:{width:"350px","margin-right":"10px"},attrs:{placeholder:"请输入采购单号进行搜索，可以直接回车搜索...","prefix-icon":"el-icon-search",clearable:"",disabled:e.showAdvanceSearchView},on:{clear:e.initOrders},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.initOrders(t)}},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}}),a("el-button",{attrs:{icon:"el-icon-search",type:"primary",disabled:e.showAdvanceSearchView},on:{click:e.initOrders}},[e._v("\n          搜索\n        ")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.showAdvanceSearchView=!e.showAdvanceSearchView}}},[a("i",{class:e.showAdvanceSearchView?"fa fa-angle-double-up":"fa fa-angle-double-down",attrs:{"aria-hidden":"true"}}),e._v("\n          高级搜索\n        ")])],1)]),a("transition",{attrs:{name:"slide-fade"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.showAdvanceSearchView,expression:"showAdvanceSearchView"}],staticStyle:{border:"1px solid #759ad1","border-radius":"5px","box-sizing":"border-box",padding:"5px",margin:"10px 0px"}},[a("el-row",[a("el-col",{attrs:{span:6}},[e._v("\n            类型:\n            "),a("el-select",{staticStyle:{width:"130px"},attrs:{clearable:"",placeholder:"类型",size:"mini"},model:{value:e.searchValue.type,callback:function(t){e.$set(e.searchValue,"type",t)},expression:"searchValue.type"}},e._l(e.types,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.name}})})),1)],1),a("el-col",{attrs:{span:5}},[e._v("\n            品牌:\n            "),a("el-input",{staticStyle:{width:"100px"},attrs:{size:"mini","prefix-icon":"el-icon-edit",clearable:""},model:{value:e.searchValue.brand,callback:function(t){e.$set(e.searchValue,"brand",t)},expression:"searchValue.brand"}})],1),a("el-col",{attrs:{span:5}},[e._v("\n            状态:\n            "),a("el-select",{staticStyle:{width:"130px"},attrs:{clearable:"",placeholder:"状态",size:"mini"},model:{value:e.searchValue.status,callback:function(t){e.$set(e.searchValue,"status",t)},expression:"searchValue.status"}},e._l(e.statuses,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-col",{attrs:{span:5}},[e._v("\n            申请人邮箱:\n            "),a("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini",clearable:"","prefix-icon":"el-icon-edit"},model:{value:e.searchValue.userEmail,callback:function(t){e.$set(e.searchValue,"userEmail",t)},expression:"searchValue.userEmail"}})],1)],1),a("el-row",{staticStyle:{"margin-top":"10px"}},[a("el-col",{attrs:{span:6}},[e._v("\n            价格:\n            "),a("el-input",{staticStyle:{width:"100px"},attrs:{size:"mini","prefix-icon":"el-icon-edit",clearable:""},model:{value:e.searchValue.priceLow,callback:function(t){e.$set(e.searchValue,"priceLow",t)},expression:"searchValue.priceLow"}}),e._v("\n            至:\n            "),a("el-input",{staticStyle:{width:"100px"},attrs:{size:"mini","prefix-icon":"el-icon-edit",clearable:""},model:{value:e.searchValue.priceHigh,callback:function(t){e.$set(e.searchValue,"priceHigh",t)},expression:"searchValue.priceHigh"}})],1),a("el-col",{attrs:{span:9}},[e._v("\n            申请时间:\n            "),a("el-date-picker",{attrs:{type:"daterange",size:"mini","unlink-panels":"","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.searchValue.dateScope,callback:function(t){e.$set(e.searchValue,"dateScope",t)},expression:"searchValue.dateScope"}})],1),a("el-col",{attrs:{span:5,offset:4}},[a("el-button",{attrs:{size:"mini"},on:{click:e.clearSearchValue}},[e._v("重置")]),a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.showAdvanceSearchView=!1}}},[e._v("取消")]),a("el-button",{attrs:{size:"mini",icon:"el-icon-search",type:"primary"},on:{click:e.initOrdersAdv}},[e._v("搜索")])],1)],1)],1)])],1),a("div",{staticStyle:{"margin-top":"10px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.orders,stripe:"",border:"","element-loading-text":"正在加载...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{fixed:"",label:"采购单号",align:"left",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.getOperateList(t.row)}}},[e._v(e._s(t.row.id))])]}}])}),a("el-table-column",{attrs:{fixed:"",prop:"asset.id",align:"left",label:"资产编号",width:"80"}}),a("el-table-column",{attrs:{fixed:"",prop:"asset.assetName","show-overflow-tooltip":!0,align:"left",label:"资产名称",width:"80"}}),a("el-table-column",{attrs:{prop:"asset.type",align:"left",label:"类型",width:"60"}}),a("el-table-column",{attrs:{prop:"asset.brand",label:"品牌",align:"left",width:"60"}}),a("el-table-column",{attrs:{prop:"statusName",width:"90",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return["2"==t.row.status||"3"==t.row.status?a("span",{staticStyle:{color:"#00e079","font-weight":"bold"}},[e._v(e._s(t.row.statusName))]):"6"==t.row.status||"8"==t.row.status||"7"==t.row.status?a("span",{staticStyle:{color:"#ff4777","font-weight":"bold"}},[e._v(e._s(t.row.statusName))]):"5"==t.row.status?a("span",{staticStyle:{color:"#c0c0c0"}},[e._v(e._s(t.row.statusName))]):a("span",[e._v(e._s(t.row.statusName))])]}}])}),a("el-table-column",{attrs:{prop:"asset.price",width:"90",label:"价格（元）"}}),a("el-table-column",{attrs:{prop:"reason","show-overflow-tooltip":!0,label:"申请理由"}}),a("el-table-column",{attrs:{prop:"user.name",width:"95",align:"left",label:"申请人"}}),a("el-table-column",{attrs:{prop:"user.username",width:"150",align:"left",label:"申请人邮箱"}}),a("el-table-column",{attrs:{prop:"user.phone",width:"100",label:"申请人电话"}}),a("el-table-column",{attrs:{prop:"createTime",width:"100",align:"left",label:"申请时间"}}),a("el-table-column",{attrs:{fixed:"right",width:"80",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{on:{click:function(a){return e.showEditView(t.row)}}},[e._v("编辑")])]}}])})],1),a("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[a("el-pagination",{attrs:{background:"",layout:"sizes, prev, pager, next, jumper, ->, total, slot",total:e.total},on:{"current-change":e.currentChange,"size-change":e.sizeChange}})],1)],1),a("OrderEdit",{attrs:{dialogVisible:e.dialogVisible,order:e.order,fileList:e.fileList,title:e.title,types:e.types},on:{close:function(t){e.dialogVisible=!1}}}),a("PurchaseOrderEdit",{attrs:{dialogVisible3:e.dialogVisible3,purchase:e.purchase,assetIds:e.assetIds,title:e.title},on:{close:function(t){e.dialogVisible3=!1},empty:function(t){e.assetIds=[]}}}),a("OrderDetail",{attrs:{dialogVisible2:e.dialogVisible2,order:e.order,title:e.title,urlList:e.urlList,operateList:e.operateList},on:{close:function(t){e.dialogVisible2=!1}}})],1)},i=[],r=a("b9d6"),l=a("3622"),n=a("27fb"),o={name:"AssetIn",data:function(){return{searchValue:{type:null,brand:null,status:null,userEmail:null,priceLow:null,priceHigh:null,dateScope:null},title:"",showAdvanceSearchView:!1,orders:[],loading:!1,dialogVisible:!1,dialogVisible2:!1,dialogVisible3:!1,total:0,page:1,keyword:"",size:10,types:[],statuses:[{id:1,name:"申请采购"},{id:2,name:"审批通过"},{id:6,name:"审批未通过"},{id:7,name:"已关闭"}],operateList:[],orderIds:[],assetIds:[],order:{id:"",category:"",categoryName:"",status:"",statusName:"",expireTime:"",reason:"",userEmail:"",user:{id:"",name:"",phone:"",username:"",enabled:"",remark:""},createTime:"",updateTime:"",asset:{id:"",status:"",statusName:"",assetName:"",brand:"",type:"",price:"",fileList:[],adv:{},remark:""}},type:"",fileList:[],urlList:[],purchase:{id:"",name:"",total:"",discount:"",pay:"",purchaseDate:"",hasInvoice:"",invoiceDate:"",remark:"",creatorEmail:"",updaterEmail:"",creator:{},updater:{},createTime:"",updateTime:"",assetList:[],fileList:[]}}},components:{OrderDetail:r["a"],OrderEdit:l["a"],PurchaseOrderEdit:n["a"]},mounted:function(){this.initOrders(),this.initTypes()},methods:{exportData:function(){var e="/order/basic/export/in/?category=1";this.type&&"advanced"==this.type?(this.searchValue.type&&(e+="&type="+this.searchValue.type),this.searchValue.brand&&(e+="&brand="+this.searchValue.brand),this.searchValue.status&&(e+="&status="+this.searchValue.status),this.searchValue.userEmail&&(e+="&userEmail="+this.searchValue.userEmail),this.searchValue.priceLow&&(e+="&priceLow="+this.searchValue.priceLow),this.searchValue.priceHigh&&(e+="&priceHigh="+this.searchValue.priceHigh),this.searchValue.dateScope&&(e+="&dateScope="+this.searchValue.dateScope)):e+="&id="+this.keyword,window.open(e,"_parent")},emptyOrder:function(){this.order={id:"",category:"",categoryName:"",status:"",statusName:"",expireTime:"",reason:"",userEmail:"",user:{id:"",name:"",phone:"",username:""},createTime:"",updateTime:"",asset:{id:"",brand:"",type:"",price:"",fileList:[],adv:{},remark:""}}},emptyPurchase:function(){this.purchase={id:"",name:"",total:"",discount:"",pay:"",purchaseDate:"",hasInvoice:"",invoiceDate:"",remark:"",creatorEmail:"",updaterEmail:"",creator:{},updater:{},createTime:"",updateTime:"",assetList:[],fileList:[]}},showAddView:function(){this.emptyOrder(),this.fileList=[],this.title="资产采购申请",this.dialogVisible=!0},showEditView:function(e){this.title="编辑申请信息",this.order=e,this.order.asset.fileList&&this.order.asset.fileList.length>0?this.fileList=this.order.asset.fileList:this.fileList=[],this.dialogVisible=!0},showDetailView:function(e){if(this.title="申请单详情",this.order=e,this.order.asset&&this.order.asset.fileList){this.urlList=[];for(var t=0;t<this.order.asset.fileList.length;t++)this.urlList.push(this.order.asset.fileList[t].url)}else this.urlList=null;this.dialogVisible2=!0},getOperateList:function(e){var t=this;this.getRequest("/order/task/getOperateList?id="+e.id).then((function(a){a&&(t.operateList=a.obj,t.showDetailView(e))}))},deleteOrder:function(){var e=this;this.$confirm("此操作将永久删除选中的记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.deleteRequestWithData("/order/basic/delete",e.orderIds).then((function(t){t&&(e.orderIds=[],e.initOrders())}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},showPurchaseOrderAddView:function(){this.emptyPurchase(),this.fileList=[],this.title="新增订单信息",this.dialogVisible3=!0},sizeChange:function(e){this.size=e,this.type&&"advanced"==this.type?this.initOrdersAdv():this.initOrders()},currentChange:function(e){this.page=e,this.type&&"advanced"==this.type?this.initOrdersAdv():this.initOrders()},initOrders:function(){var e=this;this.type="",this.loading=!0;var t="/order/basic/get/?category=1&page="+this.page+"&size="+this.size+"&oid="+this.keyword;this.getRequest(t).then((function(t){e.loading=!1,t&&(e.orders=t.data,e.total=t.total)}))},initOrdersAdv:function(){var e=this;this.type="advanced",this.loading=!0;var t="/order/basic/get/?category=1&page="+this.page+"&size="+this.size;this.searchValue.type&&(t+="&type="+this.searchValue.type),this.searchValue.brand&&(t+="&brand="+this.searchValue.brand),this.searchValue.status&&(t+="&status="+this.searchValue.status),this.searchValue.userEmail&&(t+="&userEmail="+this.searchValue.userEmail),this.searchValue.priceLow&&(t+="&priceLow="+this.searchValue.priceLow),this.searchValue.priceHigh&&(t+="&priceHigh="+this.searchValue.priceHigh),this.searchValue.dateScope&&(t+="&dateScope="+this.searchValue.dateScope),this.getRequest(t).then((function(t){e.loading=!1,t&&(e.orders=t.data,e.total=t.total)}))},initTypes:function(){var e=this,t="/asset/types/get";this.getRequest(t).then((function(t){t&&(e.types=t.obj)}))},handleSelectionChange:function(e){this.orderIds=[],this.assetIds=[];for(var t=0;t<e.length;t++)this.orderIds.push(e[t].id),this.assetIds.push(e[t].asset.id)},clearSearchValue:function(){this.searchValue={type:null,brand:null,status:null,userEmail:null,priceLow:null,priceHigh:null,dateScope:null}}}},c=o,d=a("2877"),u=Object(d["a"])(c,s,i,!1,null,null,null);t["default"]=u.exports},cf71:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[a("div",{staticStyle:{display:"inline-flex","margin-left":"8px"}}),a("div",[a("el-input",{staticStyle:{width:"350px","margin-right":"10px"},attrs:{placeholder:"请输入资产编号进行搜索，可以直接回车搜索...","prefix-icon":"el-icon-search",clearable:"",disabled:e.showAdvanceSearchView},on:{clear:e.initAssets},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.initAssets(t)}},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}}),a("el-button",{attrs:{icon:"el-icon-search",type:"primary",disabled:e.showAdvanceSearchView},on:{click:e.initAssets}},[e._v("\n          搜索\n        ")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.showAdvanceSearchView=!e.showAdvanceSearchView}}},[a("i",{class:e.showAdvanceSearchView?"fa fa-angle-double-up":"fa fa-angle-double-down",attrs:{"aria-hidden":"true"}}),e._v("\n          高级搜索\n        ")])],1)]),a("transition",{attrs:{name:"slide-fade"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.showAdvanceSearchView,expression:"showAdvanceSearchView"}],staticStyle:{border:"1px solid #759ad1","border-radius":"5px","box-sizing":"border-box",padding:"5px",margin:"10px 0px"}},[a("el-row",[a("el-col",{attrs:{span:6}},[e._v("\n            类型:\n            "),a("el-select",{staticStyle:{width:"130px"},attrs:{clearable:"",placeholder:"类型",size:"mini"},model:{value:e.searchValue.type,callback:function(t){e.$set(e.searchValue,"type",t)},expression:"searchValue.type"}},e._l(e.types,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.name}})})),1)],1),a("el-col",{attrs:{span:5}},[e._v("\n            品牌:\n            "),a("el-input",{staticStyle:{width:"100px"},attrs:{size:"mini","prefix-icon":"el-icon-edit",clearable:""},model:{value:e.searchValue.brand,callback:function(t){e.$set(e.searchValue,"brand",t)},expression:"searchValue.brand"}})],1),a("el-col",{attrs:{span:5}},[e._v("\n            状态:\n            "),a("el-select",{staticStyle:{width:"130px"},attrs:{clearable:"",placeholder:"状态",size:"mini"},model:{value:e.searchValue.status,callback:function(t){e.$set(e.searchValue,"status",t)},expression:"searchValue.status"}},e._l(e.statuses,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),a("el-row",{staticStyle:{"margin-top":"10px"}},[a("el-col",{attrs:{span:6}},[e._v("\n            价格:\n            "),a("el-input",{staticStyle:{width:"100px"},attrs:{size:"mini","prefix-icon":"el-icon-edit",clearable:""},model:{value:e.searchValue.priceLow,callback:function(t){e.$set(e.searchValue,"priceLow",t)},expression:"searchValue.priceLow"}}),e._v("\n            至:\n            "),a("el-input",{staticStyle:{width:"100px"},attrs:{size:"mini","prefix-icon":"el-icon-edit",clearable:""},model:{value:e.searchValue.priceHigh,callback:function(t){e.$set(e.searchValue,"priceHigh",t)},expression:"searchValue.priceHigh"}})],1),a("el-col",{attrs:{span:9}},[e._v("\n            入库时间:\n            "),a("el-date-picker",{attrs:{type:"daterange",size:"mini","unlink-panels":"","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.searchValue.dateScope,callback:function(t){e.$set(e.searchValue,"dateScope",t)},expression:"searchValue.dateScope"}})],1),a("el-col",{attrs:{span:5,offset:4}},[a("el-button",{attrs:{size:"mini"},on:{click:e.clearSearchValue}},[e._v("重置")]),a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.showAdvanceSearchView=!1}}},[e._v("取消")]),a("el-button",{attrs:{size:"mini",icon:"el-icon-search",type:"primary"},on:{click:e.initAssetsAdv}},[e._v("搜索")])],1)],1)],1)])],1),a("div",{staticStyle:{"margin-top":"10px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.assets,stripe:"",border:"","element-loading-text":"正在加载...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{fixed:"",label:"资产编号",align:"left",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.showDetailView(t.row)}}},[e._v(e._s(t.row.id))])]}}])}),a("el-table-column",{attrs:{prop:"statusName",label:"状态",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return["2"==t.row.status?a("span",{staticStyle:{color:"#00e079","font-weight":"bold"}},[e._v(e._s(t.row.statusName))]):"3"==t.row.status?a("span",{staticStyle:{color:"#ff4777","font-weight":"bold"}},[e._v(e._s(t.row.statusName))]):"4"==t.row.status?a("span",{staticStyle:{color:"#c0c0c0"}},[e._v(e._s(t.row.statusName))]):a("span",[e._v(e._s(t.row.statusName))])]}}])}),a("el-table-column",{attrs:{prop:"type",align:"left",label:"类型",width:"80"}}),a("el-table-column",{attrs:{fixed:"",prop:"assetName","show-overflow-tooltip":!0,align:"left",label:"资产名称"}}),a("el-table-column",{attrs:{prop:"brand",label:"品牌",align:"left",width:"80"}}),a("el-table-column",{attrs:{prop:"price",label:"价格（元）",align:"left",width:"90"}}),a("el-table-column",{attrs:{prop:"readyDate",width:"100",align:"left",label:"入库时间"}}),a("el-table-column",{attrs:{prop:"updateTime",width:"100",align:"left",label:"更新时间"}}),a("el-table-column",{attrs:{fixed:"right",width:"80",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"show",rawName:"v-show",value:"3"!=t.row.status&&"4"!=t.row.status,expression:"scope.row.status!='3'&&scope.row.status!='4'"}],on:{click:function(a){return e.changeStatus(t.row,"3")}}},[e._v("\n            报修\n          ")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:"3"==t.row.status,expression:"scope.row.status=='3'"}],attrs:{type:"success"},on:{click:function(a){return e.changeStatus(t.row,"2")}}},[e._v("\n            恢复\n          ")])]}}])})],1),a("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[a("el-pagination",{attrs:{background:"",layout:"sizes, prev, pager, next, jumper, ->, total, slot",total:e.total},on:{"current-change":e.currentChange,"size-change":e.sizeChange}})],1),a("AssetDetail",{attrs:{dialogVisible2:e.dialogVisible2,asset:e.asset,urlList:e.urlList,title:e.title},on:{close:function(t){e.dialogVisible2=!1}}})],1)])},i=[],r=a("5c8f"),l={name:"AssetRepair",mounted:function(){this.initAssets(),this.initTypes()},data:function(){return{showAdvanceSearchView:!1,searchValue:{type:null,brand:null,status:null,priceLow:null,priceHigh:null,dateScope:null},loading:!1,total:0,page:1,keyword:"",size:10,dialogVisible2:!1,title:"",assets:[],asset:{id:"",status:"",statusName:"",assetName:"",brand:"",type:"",price:"",fileList:[],adv:{}},rules:{brand:[{required:!0,message:"请输入品牌",trigger:"blur"}],price:[{required:!0,message:"请输入价格",trigger:"blur"}]},type:"",types:[],statuses:[{id:2,name:"正常"},{id:3,name:"故障"},{id:4,name:"报废"}],urlList:[]}},components:{AssetDetail:r["a"]},methods:{sizeChange:function(e){this.size=e,this.type&&"advanced"==this.type?this.initAssetsAdv():this.initAssets()},currentChange:function(e){this.page=e,this.type&&"advanced"==this.type?this.initAssetsAdv():this.initAssets()},changeStatus:function(e,t){var a=this;e.status=t,this.putRequest("/asset/changeStatus",e).then((function(e){a.initAssets()}))},showDetailView:function(e){if(this.title="资产信息详情",this.asset=e,this.asset&&this.asset.fileList){this.urlList=[];for(var t=0;t<this.asset.fileList.length;t++)this.urlList.push(this.asset.fileList[t].url)}else this.urlList=null;this.dialogVisible2=!0},initAssets:function(){var e=this;this.type="",this.loading=!0;var t="/asset/get/?page="+this.page+"&size="+this.size+"&aid="+this.keyword;this.getRequest(t).then((function(t){e.loading=!1,t&&(e.assets=t.data,e.total=t.total)}))},initAssetsAdv:function(){var e=this;this.type="advanced",this.loading=!0;var t="/asset/get/?category=1&page="+this.page+"&size="+this.size;this.searchValue.type&&(t+="&type="+this.searchValue.type),this.searchValue.brand&&(t+="&brand="+this.searchValue.brand),this.searchValue.status&&(t+="&status="+this.searchValue.status),this.searchValue.userEmail&&(t+="&userEmail="+this.searchValue.userEmail),this.searchValue.priceLow&&(t+="&priceLow="+this.searchValue.priceLow),this.searchValue.priceHigh&&(t+="&priceHigh="+this.searchValue.priceHigh),this.searchValue.dateScope&&(t+="&dateScope="+this.searchValue.dateScope),this.getRequest(t).then((function(t){e.loading=!1,t&&(e.assets=t.data,e.total=t.total)}))},clearSearchValue:function(){this.searchValue={type:null,brand:null,status:null,priceLow:null,priceHigh:null,dateScope:null}},initTypes:function(){var e=this,t="/asset/types/get";this.getRequest(t).then((function(t){t&&(e.types=t.obj)}))}}},n=l,o=a("2877"),c=Object(o["a"])(n,s,i,!1,null,"40de6008",null);t["default"]=c.exports},e11c:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[a("div",{staticStyle:{display:"inline-flex","margin-left":"8px"}}),a("div",[a("el-input",{staticStyle:{width:"350px","margin-right":"10px"},attrs:{placeholder:"请输入资产编号进行搜索，可以直接回车搜索...","prefix-icon":"el-icon-search",clearable:"",disabled:e.showAdvanceSearchView},on:{clear:e.initAssets},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.initAssets(t)}},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}}),a("el-button",{attrs:{icon:"el-icon-search",type:"primary",disabled:e.showAdvanceSearchView},on:{click:e.initAssets}},[e._v("\n          搜索\n        ")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.showAdvanceSearchView=!e.showAdvanceSearchView}}},[a("i",{class:e.showAdvanceSearchView?"fa fa-angle-double-up":"fa fa-angle-double-down",attrs:{"aria-hidden":"true"}}),e._v("\n          高级搜索\n        ")])],1)]),a("transition",{attrs:{name:"slide-fade"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.showAdvanceSearchView,expression:"showAdvanceSearchView"}],staticStyle:{border:"1px solid #759ad1","border-radius":"5px","box-sizing":"border-box",padding:"5px",margin:"10px 0px"}},[a("el-row",[a("el-col",{attrs:{span:6}},[e._v("\n            类型:\n            "),a("el-select",{staticStyle:{width:"130px"},attrs:{clearable:"",placeholder:"类型",size:"mini"},model:{value:e.searchValue.type,callback:function(t){e.$set(e.searchValue,"type",t)},expression:"searchValue.type"}},e._l(e.types,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.name}})})),1)],1),a("el-col",{attrs:{span:5}},[e._v("\n            品牌:\n            "),a("el-input",{staticStyle:{width:"100px"},attrs:{size:"mini","prefix-icon":"el-icon-edit",clearable:""},model:{value:e.searchValue.brand,callback:function(t){e.$set(e.searchValue,"brand",t)},expression:"searchValue.brand"}})],1),a("el-col",{attrs:{span:5}},[e._v("\n            状态:\n            "),a("el-select",{staticStyle:{width:"130px"},attrs:{clearable:"",placeholder:"状态",size:"mini"},model:{value:e.searchValue.status,callback:function(t){e.$set(e.searchValue,"status",t)},expression:"searchValue.status"}},e._l(e.statuses,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),a("el-row",{staticStyle:{"margin-top":"10px"}},[a("el-col",{attrs:{span:6}},[e._v("\n            价格:\n            "),a("el-input",{staticStyle:{width:"100px"},attrs:{size:"mini","prefix-icon":"el-icon-edit",clearable:""},model:{value:e.searchValue.priceLow,callback:function(t){e.$set(e.searchValue,"priceLow",t)},expression:"searchValue.priceLow"}}),e._v("\n            至:\n            "),a("el-input",{staticStyle:{width:"100px"},attrs:{size:"mini","prefix-icon":"el-icon-edit",clearable:""},model:{value:e.searchValue.priceHigh,callback:function(t){e.$set(e.searchValue,"priceHigh",t)},expression:"searchValue.priceHigh"}})],1),a("el-col",{attrs:{span:9}},[e._v("\n            入库时间:\n            "),a("el-date-picker",{attrs:{type:"daterange",size:"mini","unlink-panels":"","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.searchValue.beginDateScope,callback:function(t){e.$set(e.searchValue,"beginDateScope",t)},expression:"searchValue.beginDateScope"}})],1),a("el-col",{attrs:{span:5,offset:4}},[a("el-button",{attrs:{size:"mini"},on:{click:e.clearSearchValue}},[e._v("重置")]),a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.showAdvanceSearchView=!1}}},[e._v("取消")]),a("el-button",{attrs:{size:"mini",icon:"el-icon-search",type:"primary"},on:{click:e.initAssetsAdv}},[e._v("搜索")])],1)],1)],1)])],1),a("div",{staticStyle:{"margin-top":"10px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.assets,stripe:"",border:"","element-loading-text":"正在加载...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{fixed:"",label:"资产编号",align:"left",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.showDetailView(t.row)}}},[e._v(e._s(t.row.id))])]}}])}),a("el-table-column",{attrs:{prop:"statusName",label:"状态",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return["2"==t.row.status?a("span",{staticStyle:{color:"#00e079","font-weight":"bold"}},[e._v(e._s(t.row.statusName))]):"3"==t.row.status?a("span",{staticStyle:{color:"#ff4777","font-weight":"bold"}},[e._v(e._s(t.row.statusName))]):"4"==t.row.status?a("span",{staticStyle:{color:"#c0c0c0"}},[e._v(e._s(t.row.statusName))]):a("span",[e._v(e._s(t.row.statusName))])]}}])}),a("el-table-column",{attrs:{prop:"type",align:"left",label:"类型",width:"80"}}),a("el-table-column",{attrs:{fixed:"",prop:"assetName","show-overflow-tooltip":!0,align:"left",label:"资产名称"}}),a("el-table-column",{attrs:{prop:"brand",label:"品牌",align:"left",width:"80"}}),a("el-table-column",{attrs:{prop:"price",label:"价格（元）",align:"left",width:"90"}}),a("el-table-column",{attrs:{prop:"readyDate",width:"100",align:"left",label:"入库时间"}}),a("el-table-column",{attrs:{prop:"updateTime",width:"100",align:"left",label:"更新时间"}}),a("el-table-column",{attrs:{fixed:"right",width:"80",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"show",rawName:"v-show",value:"4"!=t.row.status,expression:"scope.row.status!='4'"}],attrs:{type:"danger"},on:{click:function(a){return e.changeStatus(t.row,"4")}}},[e._v("清退\n          ")])]}}])})],1),a("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[a("el-pagination",{attrs:{background:"",layout:"sizes, prev, pager, next, jumper, ->, total, slot",total:e.total},on:{"current-change":e.currentChange,"size-change":e.sizeChange}})],1),a("AssetDetail",{attrs:{dialogVisible2:e.dialogVisible2,asset:e.asset,urlList:e.urlList,title:e.title},on:{close:function(t){e.dialogVisible2=!1}}})],1)])},i=[],r=a("5c8f"),l={name:"AssetClean",mounted:function(){this.initAssets(),this.initTypes()},data:function(){return{showAdvanceSearchView:!1,searchValue:{type:null,brand:null,status:null,priceLow:null,priceHigh:null,beginDateScope:null},loading:!1,total:0,page:1,keyword:"",size:10,dialogVisible:!1,dialogVisible2:!1,title:"",assets:[],asset:{id:"",status:"",statusName:"",assetName:"",brand:"",type:"",price:"",fileList:[],adv:{}},type:"",types:[],statuses:[{id:2,name:"正常"},{id:3,name:"故障"},{id:4,name:"报废"}],urlList:[]}},components:{AssetDetail:r["a"]},methods:{sizeChange:function(e){this.size=e,this.type&&"advanced"==this.type?this.initAssetsAdv():this.initAssets()},currentChange:function(e){this.page=e,this.type&&"advanced"==this.type?this.initAssetsAdv():this.initAssets()},changeStatus:function(e,t){var a=this;e.status=t,this.putRequest("/asset/changeStatus",e).then((function(e){a.initAssets()}))},showDetailView:function(e){if(this.title="资产信息详情",this.asset=e,this.asset&&this.asset.fileList){this.urlList=[];for(var t=0;t<this.asset.fileList.length;t++)this.urlList.push(this.asset.fileList[t].url)}else this.urlList=null;this.dialogVisible2=!0},initAssets:function(){var e=this;this.type="",this.loading=!0;var t="/asset/get/?page="+this.page+"&size="+this.size+"&aid="+this.keyword;this.getRequest(t).then((function(t){e.loading=!1,t&&(e.assets=t.data,e.total=t.total)}))},initAssetsAdv:function(){var e=this;this.type="advanced",this.loading=!0;var t="/asset/get/?category=1&page="+this.page+"&size="+this.size;this.searchValue.type&&(t+="&type="+this.searchValue.type),this.searchValue.brand&&(t+="&brand="+this.searchValue.brand),this.searchValue.status&&(t+="&status="+this.searchValue.status),this.searchValue.userEmail&&(t+="&userEmail="+this.searchValue.userEmail),this.searchValue.priceLow&&(t+="&priceLow="+this.searchValue.priceLow),this.searchValue.priceHigh&&(t+="&priceHigh="+this.searchValue.priceHigh),this.searchValue.beginDateScope&&(t+="&beginDateScope="+this.searchValue.beginDateScope),this.getRequest(t).then((function(t){e.loading=!1,t&&(e.assets=t.data,e.total=t.total)}))},clearSearchValue:function(){this.searchValue={type:null,brand:null,status:null,priceLow:null,priceHigh:null,beginDateScope:null}},initTypes:function(){var e=this,t="/asset/types/get";this.getRequest(t).then((function(t){t&&(e.types=t.obj)}))}}},n=l,o=a("2877"),c=Object(o["a"])(n,s,i,!1,null,"51235768",null);t["default"]=c.exports}}]);
//# sourceMappingURL=chunk-c1cfb636.4e408eda.js.map