(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c7012f02"],{"27fb":function(e,t,a){"use strict";var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{title:e.title,visible:e.dialogVisible3,"before-close":e.handleClose,width:"80%"},on:{"update:visible":function(t){e.dialogVisible3=t}}},[a("div",[a("el-form",{ref:"purchaseForm",attrs:{model:e.purchase,rules:e.rules}},[a("el-row",[a("el-col",{attrs:{span:15}},[a("el-form-item",{attrs:{label:"订单名称:",prop:"name"}},[a("el-input",{staticStyle:{width:"800px"},attrs:{size:"mini","prefix-icon":"el-icon-edit"},model:{value:e.purchase.name,callback:function(t){e.$set(e.purchase,"name",t)},expression:"purchase.name"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"订单总价（元）:",prop:"total"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini","prefix-icon":"el-icon-edit"},model:{value:e.purchase.total,callback:function(t){e.$set(e.purchase,"total",t)},expression:"purchase.total"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"订单优惠（元）:",prop:"discount"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini","prefix-icon":"el-icon-edit"},model:{value:e.purchase.discount,callback:function(t){e.$set(e.purchase,"discount",t)},expression:"purchase.discount"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"实际支付（元）:",prop:"pay"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini","prefix-icon":"el-icon-edit"},model:{value:e.purchase.pay,callback:function(t){e.$set(e.purchase,"pay",t)},expression:"purchase.pay"}})],1)],1),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:"购买日期:",prop:"purchaseDate"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.purchase.purchaseDate,callback:function(t){e.$set(e.purchase,"purchaseDate",t)},expression:"purchase.purchaseDate"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"是否有发票:",prop:"hasInvoice"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.purchase.hasInvoice,callback:function(t){e.$set(e.purchase,"hasInvoice",t)},expression:"purchase.hasInvoice"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:"发票日期:",prop:"invoiceDate"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.purchase.invoiceDate,callback:function(t){e.$set(e.purchase,"invoiceDate",t)},expression:"purchase.invoiceDate"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"订单备注:",prop:"remark"}},[a("el-input",{attrs:{size:"mini",type:"textarea",rows:2},model:{value:e.purchase.remark,callback:function(t){e.$set(e.purchase,"remark",t)},expression:"purchase.remark"}})],1)],1)],1)],1),a("el-form",[a("el-row",[a("el-form-item",{attrs:{label:"订单相关图片:"}})],1),a("el-row",[a("el-form-item",{attrs:{prop:"pics"}},[a("el-upload",{ref:"upload",attrs:{data:e.uploadData,"file-list":e.fileList,action:"/purchase/pic/add","list-type":"picture-card","on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove,"auto-upload":!1}},[a("i",{staticClass:"el-icon-plus"})])],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.$emit("close")}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.doAddPurchase}},[e._v("确 定")])],1)]),a("el-dialog",{attrs:{visible:e.visible},on:{"update:visible":function(t){e.visible=t}}},[a("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)},i=[],s={name:"PurchaseOrderEdit",props:["purchase","fileList","title","dialogVisible3","assetIds"],data:function(){return{addData:{purchaseOrder:{},aids:[]},uploadData:{poid:""},options:[{value:!0,label:"是"},{value:!1,label:"否"}],rules:{total:[{required:!0,message:"请输入订单总价",trigger:"blur"}],discount:[{required:!0,message:"请输入订单优惠",trigger:"blur"}],pay:[{required:!0,message:"请输入实际支付",trigger:"blur"}],purchaseDate:[{required:!0,message:"请输入购买日期",trigger:"blur"}],hasInvoice:[{required:!0,message:"请选择发票情况",trigger:"blur"}]},dialogImageUrl:"",visible:!1}},methods:{doAddPurchase:function(){var e=this;this.purchase.id?this.$refs["purchaseForm"].validate((function(t){t&&e.putRequest("/purchase/edit",e.purchase).then((function(t){t&&(e.uploadData.poid=e.purchase.id,e.$refs.upload.submit(),e.$emit("empty"),e.$emit("close"),e.$parent.initPurchaseOrders())}))})):this.$refs["purchaseForm"].validate((function(t){t&&(e.addData.purchaseOrder=e.purchase,e.addData.aids=e.assetIds,e.postRequest("/purchase/add",e.addData).then((function(t){t&&(e.uploadData.poid=t.obj,e.$refs.upload.submit(),e.$emit("empty"),e.$emit("close"),e.$parent.initPurchaseOrders())})))}))},handleClose:function(){this.$emit("close")},handleRemove:function(e,t){var a=this;e.id&&this.deleteRequest("/purchase/pic/remove/?pid="+e.id).then((function(e){e&&a.$parent.initPurchaseOrders()})),console.log(e,t)},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.visible=!0}}},r=s,o=a("2877"),n=Object(o["a"])(r,l,i,!1,null,"9a84273e",null);t["a"]=n.exports},"2fe9":function(e,t,a){var l={"./PurchaseOrder.vue":"d66d"};function i(e){var t=s(e);return a(t)}function s(e){if(!a.o(l,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return l[e]}i.keys=function(){return Object.keys(l)},i.resolve=s,e.exports=i,i.id="2fe9"},d66d:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[a("div",[a("el-button",{staticStyle:{display:"inline-flex","margin-left":"8px"},attrs:{type:"success",icon:"el-icon-download"},on:{click:e.exportData}},[e._v("\n          导出数据\n        ")]),a("el-button",{staticStyle:{display:"inline-flex","margin-left":"8px"},attrs:{type:"danger"},on:{click:e.deleteOrder}},[e._v("\n          删除\n        ")])],1),a("div",[a("el-input",{staticStyle:{width:"350px","margin-right":"10px"},attrs:{placeholder:"请输入订单号进行搜索，可以直接回车搜索...","prefix-icon":"el-icon-search",clearable:"",disabled:e.showAdvanceSearchView},on:{clear:e.initPurchaseOrders},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.initPurchaseOrders(t)}},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}}),a("el-button",{attrs:{icon:"el-icon-search",type:"primary",disabled:e.showAdvanceSearchView},on:{click:e.initPurchaseOrders}},[e._v("\n          搜索\n        ")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.showAdvanceSearchView=!e.showAdvanceSearchView}}},[a("i",{class:e.showAdvanceSearchView?"fa fa-angle-double-up":"fa fa-angle-double-down",attrs:{"aria-hidden":"true"}}),e._v("\n          高级搜索\n        ")])],1)]),a("transition",{attrs:{name:"slide-fade"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.showAdvanceSearchView,expression:"showAdvanceSearchView"}],staticStyle:{border:"1px solid #759ad1","border-radius":"5px","box-sizing":"border-box",padding:"5px",margin:"10px 0px"}},[a("el-row",[a("el-col",{attrs:{span:9}},[e._v("\n            订单名称:\n            "),a("el-input",{staticStyle:{width:"300px"},attrs:{size:"mini","prefix-icon":"el-icon-edit",clearable:""},model:{value:e.searchValue.name,callback:function(t){e.$set(e.searchValue,"name",t)},expression:"searchValue.name"}})],1),a("el-col",{attrs:{span:7}},[e._v("\n            是否有发票:\n            "),a("el-select",{staticStyle:{width:"130px"},attrs:{clearable:"",placeholder:"是否有发票",size:"mini"},model:{value:e.searchValue.hasInvoice,callback:function(t){e.$set(e.searchValue,"hasInvoice",t)},expression:"searchValue.hasInvoice"}},e._l(e.options,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.value}})})),1)],1),a("el-col",{attrs:{span:8}},[e._v("\n            创建人邮箱:\n            "),a("el-input",{staticStyle:{width:"250px"},attrs:{size:"mini",clearable:"","prefix-icon":"el-icon-edit"},model:{value:e.searchValue.creatorEmail,callback:function(t){e.$set(e.searchValue,"creatorEmail",t)},expression:"searchValue.creatorEmail"}})],1)],1),a("el-row",{staticStyle:{"margin-top":"10px"}},[a("el-col",{attrs:{span:9}},[e._v("\n            订单总价（元）:\n            "),a("el-input",{staticStyle:{width:"100px"},attrs:{size:"mini","prefix-icon":"el-icon-edit",clearable:""},model:{value:e.searchValue.totalLow,callback:function(t){e.$set(e.searchValue,"totalLow",t)},expression:"searchValue.totalLow"}}),e._v("\n            至:\n            "),a("el-input",{staticStyle:{width:"100px"},attrs:{size:"mini","prefix-icon":"el-icon-edit",clearable:""},model:{value:e.searchValue.totalHigh,callback:function(t){e.$set(e.searchValue,"totalHigh",t)},expression:"searchValue.totalHigh"}})],1),a("el-col",{attrs:{span:9}},[e._v("\n            实际支付（元）:\n            "),a("el-input",{staticStyle:{width:"100px"},attrs:{size:"mini","prefix-icon":"el-icon-edit",clearable:""},model:{value:e.searchValue.payLow,callback:function(t){e.$set(e.searchValue,"payLow",t)},expression:"searchValue.payLow"}}),e._v("\n            至:\n            "),a("el-input",{staticStyle:{width:"100px"},attrs:{size:"mini","prefix-icon":"el-icon-edit",clearable:""},model:{value:e.searchValue.payHigh,callback:function(t){e.$set(e.searchValue,"payHigh",t)},expression:"searchValue.payHigh"}})],1)],1),a("el-row",{staticStyle:{"margin-top":"10px"}},[a("el-col",{attrs:{span:9}},[e._v("\n            购买时间:\n            "),a("el-date-picker",{attrs:{type:"daterange",size:"mini","unlink-panels":"","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.searchValue.purchaseDateScope,callback:function(t){e.$set(e.searchValue,"purchaseDateScope",t)},expression:"searchValue.purchaseDateScope"}})],1),a("el-col",{attrs:{span:8}},[e._v("\n            发票时间:\n            "),a("el-date-picker",{attrs:{type:"daterange",size:"mini","unlink-panels":"","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.searchValue.invoiceDateScope,callback:function(t){e.$set(e.searchValue,"invoiceDateScope",t)},expression:"searchValue.invoiceDateScope"}})],1),a("el-col",{attrs:{span:4,offset:3}},[a("el-button",{attrs:{size:"mini"},on:{click:e.clearSearchValue}},[e._v("重置")]),a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.showAdvanceSearchView=!1}}},[e._v("取消")]),a("el-button",{attrs:{size:"mini",icon:"el-icon-search",type:"primary"},on:{click:e.initPurchaseOrdersAdv}},[e._v("搜索")])],1)],1)],1)])],1),a("div",{staticStyle:{"margin-top":"10px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.purchases,stripe:"",border:"","element-loading-text":"正在加载...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{fixed:"",label:"订单号",align:"left",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.showDetailView(t.row)}}},[e._v(e._s(t.row.id))])]}}])}),a("el-table-column",{attrs:{fixed:"",prop:"name","show-overflow-tooltip":!0,align:"left",label:"订单名称",width:"80"}}),a("el-table-column",{attrs:{fixed:"",prop:"total",align:"left",label:"订单总价（元）",width:"110"}}),a("el-table-column",{attrs:{prop:"discount",align:"left",label:"订单优惠（元）",width:"110"}}),a("el-table-column",{attrs:{prop:"pay",label:"实际支付（元）",align:"left",width:"110"}}),a("el-table-column",{attrs:{prop:"hasInvoice",width:"95",align:"left",label:"是否有发票"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.hasInvoice?a("span",[e._v("是")]):a("span",[e._v("否")])]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"关联资产编号"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._l(t.row.assetList,(function(t,l){return a("el-tag",{key:l,staticStyle:{"margin-right":"4px"},attrs:{type:"success"}},[e._v(e._s(t.id)+"\n          ")])})),a("el-popover",{attrs:{placement:"right",title:"资产编号列表",width:"200",trigger:"click"},on:{show:function(a){return e.showPop(t.row)},hide:function(a){return e.hidePop(t.row)}}},[a("el-select",{attrs:{multiple:"",filterable:"",placeholder:"请选择"},model:{value:e.selectedAids,callback:function(t){e.selectedAids=t},expression:"selectedAids"}},e._l(e.aids,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})})),1),a("el-button",{attrs:{slot:"reference",icon:"el-icon-more",type:"text"},slot:"reference"})],1)]}}])}),a("el-table-column",{attrs:{prop:"remark","show-overflow-tooltip":!0,label:"订单备注",width:"150"}}),a("el-table-column",{attrs:{prop:"createTime",width:"100",align:"left",label:"创建日期"}}),a("el-table-column",{attrs:{prop:"updateTime",width:"100",align:"left",label:"更新日期"}}),a("el-table-column",{attrs:{fixed:"right",width:"80",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{on:{click:function(a){return e.showEditView(t.row)}}},[e._v("编辑")])]}}])})],1),a("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[a("el-pagination",{attrs:{background:"",layout:"sizes, prev, pager, next, jumper, ->, total, slot",total:e.total},on:{"current-change":e.currentChange,"size-change":e.sizeChange}})],1)],1),a("PurchaseOrderEdit",{attrs:{dialogVisible3:e.dialogVisible3,purchase:e.purchase,title:e.title,fileList:e.fileList},on:{close:function(t){e.dialogVisible3=!1}}}),a("PurchaseOrderDetail",{attrs:{dialogVisible2:e.dialogVisible2,purchase:e.purchase,title:e.title,urlList:e.urlList},on:{close:function(t){e.dialogVisible2=!1}}})],1)},i=[],s=(a("ac6a"),a("7f7f"),a("27fb")),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.title,visible:e.dialogVisible2,"before-close":e.handleClose,width:"80%"},on:{"update:visible":function(t){e.dialogVisible2=t}}},[a("div",[a("el-form",{attrs:{model:e.purchase}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"订单编号:",prop:"id"}},[e._v("\n            "+e._s(e.purchase.id)+"\n          ")])],1)],1),a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"订单名称:",prop:"name"}},[e._v("\n            "+e._s(e.purchase.name)+"\n          ")])],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"订单总价（元）:",prop:"total"}},[e._v("\n            "+e._s(e.purchase.total)+"\n          ")])],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"订单优惠（元）:",prop:"discount"}},[e._v("\n            "+e._s(e.purchase.discount)+"\n          ")])],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"实际支付（元）:",prop:"pay"}},[e._v("\n            "+e._s(e.purchase.pay)+"\n          ")])],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"购买日期:",prop:"purchaseDate"}},[e._v("\n            "+e._s(e.purchase.purchaseDate)+"\n          ")])],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"是否有发票:",prop:"hasInvoice"}},[1==e.purchase.status?a("span",[e._v("是")]):a("span",[e._v("否")])])],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"发票日期:",prop:"invoiceDate"}},[e._v("\n            "+e._s(e.purchase.invoiceDate)+"\n          ")])],1)],1),this.purchase.creator?a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"创建人姓名:",prop:"creator.name"}},[e._v("\n            "+e._s(e.purchase.creator.name)+"\n          ")])],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"创建人邮箱:",prop:"creatorEmail"}},[e._v("\n            "+e._s(e.purchase.creatorEmail)+"\n          ")])],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"创建人电话:",prop:"creator.phone"}},[e._v("\n            "+e._s(e.purchase.creator.phone)+"\n          ")])],1)],1):e._e(),this.purchase.updater?a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"更新人姓名:",prop:"updater.name"}},[e._v("\n            "+e._s(e.purchase.updater.name)+"\n          ")])],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"更新人邮箱:",prop:"updaterEmail"}},[e._v("\n            "+e._s(e.purchase.updaterEmail)+"\n          ")])],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"更新人电话:",prop:"updater.phone"}},[e._v("\n            "+e._s(e.purchase.updater.phone)+"\n          ")])],1)],1):e._e(),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"关联资产信息:"}})],1)],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.purchase.assetList,stripe:"",border:"","element-loading-text":"正在加载...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[a("el-table-column",{attrs:{fixed:"",prop:"id",label:"资产编号",align:"left",width:"100"}}),a("el-table-column",{attrs:{fixed:"",prop:"assetName","show-overflow-tooltip":!0,align:"left",label:"资产名称"}}),a("el-table-column",{attrs:{prop:"statusName",label:"状态",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return["2"==t.row.status?a("span",{staticStyle:{color:"#00e079","font-weight":"bold"}},[e._v(e._s(t.row.statusName))]):"3"==t.row.status?a("span",{staticStyle:{color:"#ff4777","font-weight":"bold"}},[e._v(e._s(t.row.statusName))]):"4"==t.row.status?a("span",{staticStyle:{color:"#c0c0c0"}},[e._v(e._s(t.row.statusName))]):a("span",[e._v(e._s(t.row.statusName))])]}}])}),a("el-table-column",{attrs:{prop:"type",align:"left",label:"类型",width:"200"}}),a("el-table-column",{attrs:{prop:"brand",label:"品牌",align:"left",width:"200"}}),a("el-table-column",{attrs:{prop:"price",label:"价格（元）",align:"left",width:"200"}})],1),a("el-row",{staticStyle:{"margin-top":"10px"}},[a("el-col",{attrs:{span:10}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.purchase.remark&&""!=e.purchase.remark,expression:"purchase.remark&&purchase.remark!=''"}],attrs:{label:"订单备注:",prop:"remark"}},[e._v("\n            "+e._s(e.purchase.remark)+"\n          ")])],1)],1)],1),a("el-form",[a("el-row",{directives:[{name:"show",rawName:"v-show",value:e.urlList&&e.urlList.length>0,expression:"urlList&&urlList.length>0"}]},[a("el-form-item",{attrs:{label:"资产相关图片:"}})],1),a("el-row",[e._l(e.urlList,(function(t){return[a("el-col",{attrs:{span:3}},[a("el-form-item",[a("el-image",{staticStyle:{width:"130px",height:"130px"},attrs:{src:t,"preview-src-list":e.urlList}})],1)],1)]}))],2)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.$emit("close")}}},[e._v("关 闭")])],1)])},o=[],n={name:"PurchaseOrderDetail",props:["purchase","title","urlList","dialogVisible2"],methods:{handleClose:function(){this.$emit("close")}}},c=n,u=a("2877"),p=Object(u["a"])(c,r,o,!1,null,"e40a6a74",null),h=p.exports,d={name:"PurchaseOrder",data:function(){return{searchValue:{name:null,hasInvoice:null,creatorEmail:null,totalLow:null,totalHigh:null,payLow:null,payHigh:null,purchaseDateScope:null,invoiceDateScope:null},title:"",showAdvanceSearchView:!1,purchases:[],loading:!1,dialogVisible2:!1,dialogVisible3:!1,total:0,page:1,keyword:"",size:10,options:[{name:"是",value:!0},{name:"否",value:!1}],operateList:[],orderIds:[],type:"",fileList:[],urlList:[],purchase:{id:"",name:"",total:"",discount:"",pay:"",purchaseDate:"",hasInvoice:"",invoiceDate:"",remark:"",creatorEmail:"",updaterEmail:"",creator:{},updater:{},createTime:"",updateTime:"",assetList:[],fileList:[]},aids:[],selectedAids:[]}},components:{PurchaseOrderEdit:s["a"],PurchaseOrderDetail:h},mounted:function(){this.initPurchaseOrders()},methods:{exportData:function(){var e="/purchase/export/?1=1";this.type&&"advanced"==this.type?(this.searchValue.name&&(e+="&name="+this.searchValue.name),this.searchValue.hasInvoice&&(e+="&hasInvoice="+this.searchValue.hasInvoice),this.searchValue.creatorEmail&&(e+="&creatorEmail="+this.searchValue.creatorEmail),this.searchValue.totalLow&&(e+="&totalLow="+this.searchValue.totalLow),this.searchValue.totalHigh&&(e+="&totalHigh="+this.searchValue.totalHigh),this.searchValue.payLow&&(e+="&payLow="+this.searchValue.payLow),this.searchValue.payHigh&&(e+="&payHigh="+this.searchValue.payHigh),this.searchValue.purchaseDateScope&&(e+="&purchaseDateScope="+this.searchValue.purchaseDateScope),this.searchValue.invoiceDateScope&&(e+="&invoiceDateScope="+this.searchValue.invoiceDateScope)):e+="&id="+this.keyword,window.open(e,"_parent")},showEditView:function(e){this.title="编辑订单信息",this.purchase=e,this.purchase.fileList&&this.purchase.fileList.length>0?this.fileList=this.purchase.fileList:this.fileList=[],this.dialogVisible3=!0},showDetailView:function(e){if(this.title="订单详情",this.purchase=e,this.purchase&&this.purchase.fileList){this.urlList=[];for(var t=0;t<this.purchase.fileList.length;t++)this.urlList.push(this.purchase.fileList[t].url)}else this.urlList=null;this.dialogVisible2=!0},deleteOrder:function(){var e=this;this.$confirm("此操作将永久删除选中的记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.deleteRequestWithData("/order/basic/delete",e.orderIds).then((function(t){t&&e.initPurchaseOrders()}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},sizeChange:function(e){this.size=e,this.type&&"advanced"==this.type?this.initPurchaseOrdersAdv():this.initPurchaseOrders()},currentChange:function(e){this.page=e,this.type&&"advanced"==this.type?this.initPurchaseOrdersAdv():this.initPurchaseOrders()},initPurchaseOrders:function(){var e=this;this.type="",this.loading=!0;var t="/purchase/get/?page="+this.page+"&size="+this.size+"&poid="+this.keyword;this.getRequest(t).then((function(t){e.loading=!1,t&&(e.purchases=t.data,e.total=t.total)}))},initPurchaseOrdersAdv:function(){var e=this;this.type="advanced",this.loading=!0;var t="/purchase/get/?page="+this.page+"&size="+this.size;this.searchValue.name&&(t+="&name="+this.searchValue.name),this.searchValue.hasInvoice&&(t+="&hasInvoice="+this.searchValue.hasInvoice),this.searchValue.creatorEmail&&(t+="&creatorEmail="+this.searchValue.creatorEmail),this.searchValue.totalLow&&(t+="&totalLow="+this.searchValue.totalLow),this.searchValue.totalHigh&&(t+="&totalHigh="+this.searchValue.totalHigh),this.searchValue.payLow&&(t+="&payLow="+this.searchValue.payLow),this.searchValue.payHigh&&(t+="&payHigh="+this.searchValue.payHigh),this.searchValue.purchaseDateScope&&(t+="&purchaseDateScope="+this.searchValue.purchaseDateScope),this.searchValue.invoiceDateScope&&(t+="&invoiceDateScope="+this.searchValue.invoiceDateScope),this.getRequest(t).then((function(t){e.loading=!1,t&&(e.purchases=t.data,e.total=t.total)}))},handleSelectionChange:function(e){for(var t=0;t<e.length;t++)this.orderIds.push(e[t].id)},clearSearchValue:function(){this.searchValue={name:null,hasInvoice:null,creatorEmail:null,totalLow:null,totalHigh:null,payLow:null,payHigh:null,purchaseDateScope:null,invoiceDateScope:null}},hidePop:function(e){var t=this,a="/purchase/asset?poid="+e.id;this.putRequest(a,this.selectedAids).then((function(e){e&&t.initPurchaseOrdersAdv()}))},showPop:function(e){var t=this;this.initAllAssetIds();var a=e.assetList;this.selectedAids=[],a.forEach((function(e){t.selectedAids.push(e.id)}))},initAllAssetIds:function(){var e=this;this.getRequest("/asset/all").then((function(t){t&&(e.aids=t.obj)}))}}},m=d,f=Object(u["a"])(m,l,i,!1,null,null,null);t["default"]=f.exports}}]);
//# sourceMappingURL=chunk-c7012f02.61dc16d7.js.map